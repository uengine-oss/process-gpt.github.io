import{p as le,b1 as ne,m as se,b2 as re,b3 as oe,f as ie,g as ue,b4 as de,h as ce,b5 as me,b6 as H,b7 as fe,b8 as ge,b9 as ve,ac as he,ba as be,q as pe,bb as we,b as s,bc as xe,v as _e,b0 as ye,J as C,av as A,ar as P,as as S,a3 as B,a1 as Ve,bd as ke,r as Ce,s as Se,o as u,c as k,w as r,a as V,a2 as X,V as $,al as Ie,am as Me,aq as Ne,a$ as Te,x as p,B as Y,H as O,aw as De,a8 as Le,d as I,z as E,ak as Re,T as Be,L as U,M as J,R as ee,F as Ae,D as Ee,A as Pe,C as F}from"./index-dcd728bc.js";/* empty css                                                    */import{V as j}from"./VSheet-42154d36.js";import{d as $e,a as K,g as Oe}from"./index-18289fd3.js";const Ue=le({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ne,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...se(),...re({location:"top end"}),...oe(),...ie(),...ue(),...de({transition:"scale-rotate-transition"})},"VBadge"),te=ce()({name:"VBadge",inheritAttrs:!1,props:Ue(),setup(e,n){const{backgroundColorClasses:l,backgroundColorStyles:v}=me(H(e,"color")),{roundedClasses:f}=fe(e),{t:M}=ge(),{textColorClasses:T,textColorStyles:h}=ve(H(e,"textColor")),{themeClasses:N}=he(),{locationStyles:g}=be(e,!0,m=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(m)?+(e.offsetY??0):["left","right"].includes(m)?+(e.offsetX??0):0));return pe(()=>{const m=Number(e.content),w=!e.max||isNaN(m)?e.content:m<=+e.max?m:`${e.max}+`,[b,o]=we(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return s(e.tag,C({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},o,{style:e.style}),{default:()=>{var x,_;return[s("div",{class:"v-badge__wrapper"},[(_=(x=n.slots).default)==null?void 0:_.call(x),s(xe,{transition:e.transition},{default:()=>{var D,y;return[_e(s("span",C({class:["v-badge__badge",N.value,l.value,f.value,T.value],style:[v.value,h.value,e.inline?{}:g.value],"aria-atomic":"true","aria-label":M(e.label,m),"aria-live":"polite",role:"status"},b),[e.dot?void 0:n.slots.badge?(y=(D=n.slots).badge)==null?void 0:y.call(D):e.icon?s(A,{icon:e.icon},null):w]),[[ye,e.modelValue]])]}})])]}})}),{}}});function ze(e,n){P(2,arguments);var l=S(e),v=S(n),f=l.getTime()-v.getTime();return f<0?-1:f>0?1:f}function Ye(e,n){return P(2,arguments),S(e).getTime()-S(n).getTime()}var G={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},Fe="trunc";function je(e){return e?G[e]:G[Fe]}function qe(e,n,l){P(2,arguments);var v=Ye(e,n)/1e3;return je(l==null?void 0:l.roundingMethod)(v)}function ae(e,n){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}function He(e){return ae({},e)}var Q=1e3*60,z=60*24,W=z*30,Z=z*365;function Xe(e,n,l){var v,f,M;P(2,arguments);var T=Oe(),h=(v=(f=l==null?void 0:l.locale)!==null&&f!==void 0?f:T.locale)!==null&&v!==void 0?v:$e;if(!h.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var N=ze(e,n);if(isNaN(N))throw new RangeError("Invalid time value");var g=ae(He(l),{addSuffix:!!(l!=null&&l.addSuffix),comparison:N}),m,w;N>0?(m=S(n),w=S(e)):(m=S(e),w=S(n));var b=String((M=l==null?void 0:l.roundingMethod)!==null&&M!==void 0?M:"round"),o;if(b==="floor")o=Math.floor;else if(b==="ceil")o=Math.ceil;else if(b==="round")o=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var x=w.getTime()-m.getTime(),_=x/Q,D=K(w)-K(m),y=(x-D)/Q,R=l==null?void 0:l.unit,c;if(R?c=String(R):_<1?c="second":_<60?c="minute":_<z?c="hour":y<W?c="day":y<Z?c="month":c="year",c==="second"){var d=o(x/1e3);return h.formatDistance("xSeconds",d,g)}else if(c==="minute"){var i=o(_);return h.formatDistance("xMinutes",i,g)}else if(c==="hour"){var L=o(_/60);return h.formatDistance("xHours",L,g)}else if(c==="day"){var a=o(y/z);return h.formatDistance("xDays",a,g)}else if(c==="month"){var t=o(y/W);return t===12&&R!=="month"?h.formatDistance("xYears",1,g):h.formatDistance("xMonths",t,g)}else if(c==="year"){var q=o(y/Z);return h.formatDistance("xYears",q,g)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function Je(e,n){return P(1,arguments),Xe(e,Date.now(),n)}const Ke={class:"px-6 pt-3"},Ge={class:"d-flex"},Qe=I("mdi-chat-plus"),We=I(" 채팅방 설정 "),Ze=I("mdi-account-circle"),et=I("취소"),tt=["src","alt"],at=["src","alt"],lt=V("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1),nt={class:"textPrimary text-subtitle-2"},st=I("mdi-dots-vertical"),gt={props:{chatRoomList:Array,userList:Array,userInfo:Object},emits:["chat-selected","create-chat-room"],setup(e,{emit:n}){const l=e,v=d=>{const i=new Date(d);return qe(new Date,i)<60?"now":Je(i,{addSuffix:!1})},f=B(Date.now()),M=()=>{f.value=Date.now()};let T;Ve(()=>{T=setInterval(M,6e4)}),ke(()=>{clearInterval(T)});const h=d=>{n("chat-selected",d)},N=l.chatRoomList,g=B(""),m=Ce(()=>N.filter(d=>d.name.toLowerCase().includes(g.value.toLowerCase()))),w=d=>{if(d=="system@uengine.org")return"/src/assets/images/chat/chat-icon.png";{const i=l.userList.find(L=>L.email===d);return i&&i.profile?i.profile:"/images/defaultUser.png"}},b=B(!1),o=B({name:"",participants:[]}),x=B(!1),_=[d=>!!d||"채팅방 이름을 입력해주세요."],D=[d=>d&&d.length>0||"참여자를 하나 이상 선택해주세요."],y=()=>{if(!o.value.name||!o.value.participants.length){console.log("Invalid input");return}n("create-chat-room",o.value),b.value=!1},R=()=>{o.value={name:"",participants:[]},x.value=!1,b.value=!0},c=d=>{o.value={...d},x.value=!0,b.value=!0};return(d,i)=>{const L=Se("perfect-scrollbar");return u(),k(U,null,[s(j,null,{default:r(()=>[V("div",Ke,[V("div",Ge,[s(X,{variant:"outlined",modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=a=>g.value=a),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),s($,{icon:"",onClick:R,style:{"margin-left":"10px"}},{default:r(()=>[s(A,null,{default:r(()=>[Qe]),_:1})]),_:1})])])]),_:1}),s(Re,{modelValue:b.value,"onUpdate:modelValue":i[4]||(i[4]=a=>b.value=a),persistent:"","max-width":"600px"},{default:r(()=>[s(Ie,null,{default:r(()=>[s(Me,null,{default:r(()=>[We]),_:1}),s(Ne,null,{default:r(()=>[s(X,{label:"채팅방 이름",modelValue:o.value.name,"onUpdate:modelValue":i[1]||(i[1]=a=>o.value.name=a),rules:_},null,8,["modelValue"]),s(Te,{modelValue:o.value.participants,"onUpdate:modelValue":i[2]||(i[2]=a=>o.value.participants=a),items:e.userList,chips:"","closable-chips":"",color:"blue-grey-lighten-2","item-title":"username","item-value":a=>a,multiple:"",label:"참여자 선택","small-chips":"","item-avatar":"image",rules:D},{chip:r(({props:a,item:t})=>[t.raw.profile?(u(),p(Y,C({key:0},a,{"prepend-avatar":t.raw.profile,text:t.raw.username?t.raw.username:t.raw.email}),null,16,["prepend-avatar","text"])):t.raw.id=="system_id"?(u(),p(Y,C({key:1},a,{"prepend-avatar":"/src/assets/images/chat/chat-icon.png",text:"System"}),null,16)):(u(),p(Y,C({key:2},a,{"prepend-icon":"mdi-account-circle",text:t.raw.username?t.raw.username:t.raw.email}),null,16,["text"]))]),item:r(({props:a,item:t})=>[t.raw.profile?(u(),p(O,C({key:0},a,{"prepend-avatar":t.raw.profile,title:t.raw.username?t.raw.username:t.raw.email,subtitle:t.raw.email}),null,16,["prepend-avatar","title","subtitle"])):t.raw.id=="system_id"?(u(),p(O,C({key:1},a,{"prepend-avatar":"/src/assets/images/chat/chat-icon.png",title:"System"}),null,16)):(u(),p(O,C({key:2},a,{title:t.raw.username?t.raw.username:t.raw.email,subtitle:t.raw.email}),{prepend:r(()=>[s(A,{style:{position:"relative","margin-right":"10px","margin-left":"-3px"},size:"48"},{default:r(()=>[Ze]),_:1})]),_:2},1040,["title","subtitle"]))]),_:1},8,["modelValue","items","item-value"])]),_:1}),s(De,null,{default:r(()=>[s(Le),s($,{color:"blue darken-1",text:"",onClick:i[3]||(i[3]=a=>b.value=!1)},{default:r(()=>[et]),_:1}),s($,{color:"blue darken-1",text:"",onClick:y},{default:r(()=>[I(E(x.value?"수정":"생성"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(L,{class:"lgScroll"},{default:r(()=>[s(Be,null,{default:r(()=>[(u(!0),k(U,null,J(F(m),a=>(u(),p(O,{value:a.id,color:"secondary",class:"text-no-wrap chatItem",key:a.id,lines:"two",onClick:t=>h(a)},{prepend:r(()=>[s(ee,{color:"#f0f5f9",size:"large",style:{width:"50px",height:"50px",display:"flex","flex-wrap":"wrap"}},{default:r(()=>[a.participants.length?(u(),k(U,{key:0},[a.participants.filter(t=>t.email!==e.userInfo.email).length===1?(u(),k("img",{key:0,src:w(a.participants.find(t=>t.email!==e.userInfo.email).email),alt:a.participants.find(t=>t.email!==e.userInfo.email).username,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,tt)):(u(!0),k(U,{key:1},J(a.participants.filter(t=>t.email!==e.userInfo.email).slice(0,4),(t,q)=>(u(),k("div",{key:t.id,style:{width:"50%",height:"50%",position:"relative"}},[V("img",{src:w(t.email),alt:t.username,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,at)]))),128))],64)):(u(),p(A,{key:1,icon:"mdi-account-multiple",size:"large"}))]),_:2},1024)]),append:r(()=>[(u(),k("div",{key:f.value},[V("small",nt,[I(E(v(a.message.createdAt))+" ",1),a.participants.find(t=>t.email==e.userInfo.email).isExistUnReadMessage?(u(),p(te,{key:0,style:{position:"relative",top:"1.5px"},dot:"",inline:"",color:"info"})):Ae("",!0),s($,{size:"x-small",icon:""},{default:r(()=>[s(A,{onClick:t=>c(a)},{default:r(()=>[st]),_:2},1032,["onClick"])]),_:2},1024)])]))]),default:r(()=>[s(Ee,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:r(()=>[I(E(a.name),1)]),_:2},1024),a.message.type=="img"?(u(),p(j,{key:0},{default:r(()=>[lt]),_:1})):(u(),k("div",{key:1,class:Pe(["text-subtitle-2 textPrimary mt-1 text-truncate w-100",{"font-weight-bold":a.participants.find(t=>t.email==e.userInfo.email).isExistUnReadMessage}])},E(a.message.msg),3))]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})],64)}}},rt={class:"d-flex gap-2 align-center pa-6"},ot=["src"],it={class:"text-subtitle-1 font-weight-semibold"},ut=V("span",{class:"text-subtitle-2 font-weight-medium text-grey100"},"Admin",-1),vt={setup(e){const n=localStorage.getItem("userName");localStorage.getItem("email");const l=localStorage.getItem("picture");return(v,f)=>(u(),p(j,null,{default:r(()=>[V("div",rt,[s(ee,{size:"large"},{default:r(()=>[V("img",{src:F(l),alt:"pro",width:"54"},null,8,ot)]),_:1}),s(te,{class:"badg-dotDetail",dot:"",color:"success"}),V("div",null,[V("h5",it,E(F(n)),1),ut])])]),_:1}))}};export{te as V,gt as _,vt as a,Je as f};
