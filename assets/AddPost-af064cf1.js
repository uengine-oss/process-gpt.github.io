import{W as _t,X as B,aM as F,aL as xt,P as W,a3 as A,o as i,c as p,b as e,w as a,a as o,R as I,z as f,d as _,S as G,V as h,J as M,al as E,L as z,M as N,F as V,a2 as pt,s as C,_ as ft,x as w,aj as vt,ae as gt,C as Y,bK as nt,a0 as kt,bL as lt,T as $t,H as St,an as wt,D as Tt,aS as ht,$ as It,bM as Ct,bN as jt,a1 as Vt,r as zt,ay as Pt}from"./index-dcd728bc.js";const H=_t({id:"post",state:()=>({posts:[]}),getters:{},actions:{async fetchPosts(){try{const t=await B.get("/api/posts/list");this.posts=t.data}catch(t){alert(t),console.log(t)}},async likePost(t){try{const s=await B.post("/api/posts/list/like",{postId:t});this.posts=s.data.posts}catch(s){alert(s),console.log(s)}},async addComment(t,s){try{const n=await B.post("/api/comments/add",{postId:t,comment:s});this.posts=n.data.posts}catch(n){alert(n),console.log(n)}},async addReply(t,s,n){try{const l=await B.post("/api/replies/add",{postId:t,commentId:s,reply:n});this.posts=l.data.posts}catch(l){alert(l),console.log(l)}}}});var Ot=typeof F=="object"&&F&&F.Object===Object&&F,Lt=Ot,Rt=Lt,At=typeof self=="object"&&self&&self.Object===Object&&self,Mt=Rt||At||Function("return this")(),Nt=Mt,Ut=Nt,Bt=Ut.Symbol,J=Bt;function Ft(t,s){for(var n=-1,l=t==null?0:t.length,m=Array(l);++n<l;)m[n]=s(t[n],n,t);return m}var Gt=Ft,Et=Array.isArray,Dt=Et,it=J,bt=Object.prototype,qt=bt.hasOwnProperty,Yt=bt.toString,R=it?it.toStringTag:void 0;function Wt(t){var s=qt.call(t,R),n=t[R];try{t[R]=void 0;var l=!0}catch{}var m=Yt.call(t);return l&&(s?t[R]=n:delete t[R]),m}var Ht=Wt,Jt=Object.prototype,Kt=Jt.toString;function Xt(t){return Kt.call(t)}var Qt=Xt,rt=J,Zt=Ht,te=Qt,ee="[object Null]",ae="[object Undefined]",ct=rt?rt.toStringTag:void 0;function se(t){return t==null?t===void 0?ae:ee:ct&&ct in Object(t)?Zt(t):te(t)}var oe=se;function ne(t){return t!=null&&typeof t=="object"}var le=ne,ie=oe,re=le,ce="[object Symbol]";function de(t){return typeof t=="symbol"||re(t)&&ie(t)==ce}var me=de,dt=J,ue=Gt,pe=Dt,fe=me,ve=1/0,mt=dt?dt.prototype:void 0,ut=mt?mt.toString:void 0;function yt(t){if(typeof t=="string")return t;if(pe(t))return ue(t,yt)+"";if(fe(t))return ut?ut.call(t):"";var s=t+"";return s=="0"&&1/t==-ve?"-0":s}var ge=yt,he=ge;function be(t){return t==null?"":he(t)}var ye=be,_e=ye,xe=0;function ke(t){var s=++xe;return _e(t)+s}var $e=ke;const D=xt($e),Se={class:"d-flex gap-3 align-center"},we=["src"],Te={class:"d-block d-sm-flex align-center gap-3"},Ie={class:"text-h6"},Ce={class:"text-subtitle-2 opacity-50"},je={class:"py-3 text-body-1"},Ve={class:"my-1 d-flex align-center gap-3"},ze={class:"text-subtitle-1 font-weight-semibold"},Pe={key:0,class:"ml-10"},Oe={class:"d-flex gap-3 align-center"},Le=["src"],Re={class:"d-block d-sm-flex align-center gap-3"},Ae={class:"text-h6"},Me={class:"text-subtitle-2 opacity-50"},Ne={class:"py-3 text-body-1"},Ue={key:1,class:"d-block d-sm-flex gap-3 align-center mb-5 ml-10"},Be=["src"],Fe=_(" Reply "),Ge=W({props:{comments:Object||Array,postId:String},setup(t){const s=t,n=H(),l=A(""),m=async(U,x,T)=>{var c,$;const k={id:D("#REPLY_"),profile:{id:D("#REPLY_"),avatar:(c=s.comments)==null?void 0:c.profile.avatar,name:($=s.comments)==null?void 0:$.profile.name,time:"now"},data:{comment:T,likes:{like:!1,value:0},replies:[]}};n.addReply(U,x,k),l.value=""},b=A(!1),q=()=>b.value=!b.value;return(U,x)=>{var c,$,j;const T=C("CircleIcon"),P=C("ThumbUpIcon"),k=C("ArrowBackUpIcon");return i(),p(z,null,[e(E,{variant:"flat",class:"mb-3 pa-5 border bg-surface"},{default:a(()=>{var r,v,u,g,O,L;return[o("div",Se,[e(I,{size:"30"},{default:a(()=>{var y;return[o("img",{src:(y=t.comments)==null?void 0:y.profile.avatar,width:"30",alt:"avatar"},null,8,we)]}),_:1}),o("div",Te,[o("h6",Ie,f((r=t.comments)==null?void 0:r.profile.name),1),o("span",Ce,[e(T,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+f((v=t.comments)==null?void 0:v.profile.time),1)])])]),o("div",je,f((u=t.comments)==null?void 0:u.data.comment),1),o("div",Ve,[e(G,{text:"Like"},{activator:a(({props:y})=>[e(h,M({icon:"",color:"primary",variant:"flat",size:"x-small"},y),{default:a(()=>[e(P,{size:"16"})]),_:2},1040)]),_:1}),o("span",ze,f(((g=t.comments)==null?void 0:g.data)&&((O=t.comments)==null?void 0:O.data.likes)&&((L=t.comments)==null?void 0:L.data.likes.value)),1),e(G,{text:"Reply"},{activator:a(({props:y})=>[e(h,M({icon:"",color:"secondary",variant:"flat"},y,{size:"x-small",onClick:q}),{default:a(()=>[e(k,{size:"16"})]),_:2},1040)]),_:1})])]}),_:1}),(c=t.comments)!=null&&c.data.replies?(i(),p("div",Pe,[(i(!0),p(z,null,N(($=t.comments)==null?void 0:$.data.replies,r=>(i(),p("div",null,[e(E,{variant:"flat",class:"mb-3 pa-5 border"},{default:a(()=>[o("div",Oe,[e(I,{size:"30"},{default:a(()=>[o("img",{src:r.profile.avatar,width:"30",alt:"avatar"},null,8,Le)]),_:2},1024),o("div",Re,[o("h6",Ae,f(r.profile.name),1),o("span",Me,[e(T,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+f(r.profile.time),1)])])]),o("div",Ne,f(r.data.comment),1)]),_:2},1024)]))),256))])):V("",!0),b.value?(i(),p("div",Ue,[o("img",{src:(j=t.comments)==null?void 0:j.profile.avatar,width:"40",class:"flex-shrink-0 d-none d-sm-block",alt:"avatar"},null,8,Be),e(pt,{variant:"outlined",color:"primary",modelValue:l.value,"onUpdate:modelValue":x[0]||(x[0]=r=>l.value=r),label:"Write Reply","hide-details":""},null,8,["modelValue"]),e(h,{color:"secondary",class:"mt-3 mt-sm-0",variant:"flat",size:"large",onClick:x[1]||(x[1]=r=>{var v;return m(t.postId,(v=t.comments)==null?void 0:v.id,l.value)})},{default:a(()=>[Fe]),_:1})])):V("",!0)],64)}}});const Ee=ft(Ge,[["__scopeId","data-v-e6ee9a0c"]]),De={class:"d-flex gap-3 align-center"},qe=["src"],Ye={class:"d-block d-sm-flex align-center gap-3"},We={class:"text-h6"},He={class:"text-subtitle-2 opacity-50"},Je={class:"py-4 text-body-1"},Ke=["src"],Xe={key:1,class:"rounded-md overflow-hidden my-5"},Qe=["src"],Ze={class:"my-4 mt-5 d-flex align-center gap-3"},ta={class:"text-subtitle-1 font-weight-semibold"},ea={class:"text-subtitle-1 font-weight-semibold"},aa={key:0,class:"pa-5 pt-0"},sa={key:1},oa={class:"d-block d-sm-flex gap-3 align-center mb-4 px-4 pt-4"},na=["src"],la=_(" Comment "),ia=W({props:{post:Object||Array},setup(t){var T,P;const s=t,n=H(),l=A(!((T=s.post)!=null&&T.comments&&((P=s.post)==null?void 0:P.comments.length)>0)),m=A(""),b=A([{title:"Share Now",icon:lt},{title:"Share to Friends",icon:Ct},{title:"Send in Messanger",icon:nt},{title:"Copy Link",icon:jt}]),q=()=>l.value=!l.value,U=async k=>{await n.likePost(k)},x=async(k,c)=>{var r,v;const j={id:D("#COMMENT_"),profile:{id:D("#COMMENT_"),avatar:(r=s.post)==null?void 0:r.profile.avatar,name:(v=s.post)==null?void 0:v.profile.name,time:"now"},data:{comment:c,likes:{like:!1,value:0},replies:[]}};n.addComment(k,j),m.value=""};return(k,c)=>{const $=C("CircleIcon"),j=C("ThumbUpIcon");return i(),w(E,{elevation:"10",class:"bg-surface"},{default:a(()=>{var r,v;return[e(ht,null,{default:a(()=>{var u,g,O,L,y,K,X,Q,Z,tt,et;return[o("div",De,[e(I,{size:"40"},{default:a(()=>{var d;return[o("img",{src:(d=t.post)==null?void 0:d.profile.avatar,width:"40",alt:"avatar"},null,8,qe)]}),_:1}),o("div",Ye,[o("h6",We,f((u=t.post)==null?void 0:u.profile.name),1),o("span",He,[e($,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+f((g=t.post)==null?void 0:g.profile.time),1)])])]),o("div",Je,f((O=t.post)==null?void 0:O.data.content),1),(L=t.post)!=null&&L.data.images?(i(),w(vt,{key:0},{default:a(()=>{var d;return[(i(!0),p(z,null,N((d=t.post)==null?void 0:d.data.images,S=>(i(),w(gt,{md:S.featured?"12":"6"},{default:a(()=>[e(I,{class:"rounded-md w-100",size:"360"},{default:a(()=>[o("img",{src:S.img,alt:"photo"},null,8,Ke)]),_:2},1024)]),_:2},1032,["md"]))),256))]}),_:1})):V("",!0),(y=t.post)!=null&&y.data.video?(i(),p("div",Xe,[o("iframe",{src:`https://www.youtube.com/embed/${(K=t.post)==null?void 0:K.data.video}`,frameborder:"0",width:"100%",height:"400"},null,8,Qe)])):V("",!0),o("div",Ze,[e(G,{text:"Like"},{activator:a(({props:d})=>{var S,at,st;return[e(h,M({onClick:c[0]||(c[0]=fa=>{var ot;return U(`${(ot=t.post)==null?void 0:ot.id}`)})},d,{icon:"",color:(S=t.post)!=null&&S.data&&((at=t.post)!=null&&at.data.likes)&&((st=t.post)!=null&&st.data.likes.like)?"primary":"grey100",variant:"flat",size:"x-small"}),{default:a(()=>[e(j,{size:"16"})]),_:2},1040,["color"])]}),_:1}),o("span",ta,f(((X=t.post)==null?void 0:X.data)&&((Q=t.post)==null?void 0:Q.data.likes)&&((Z=t.post)==null?void 0:Z.data.likes.value)),1),e(G,{text:"Comment"},{activator:a(({props:d})=>[e(h,M({icon:""},d,{color:"secondary",variant:"flat",size:"x-small",onClick:q}),{default:a(()=>[e(Y(nt),{size:"16"})]),_:2},1040)]),_:1}),o("span",ea,f((tt=t.post)!=null&&tt.data.comments?(et=t.post)==null?void 0:et.data.comments.length:0),1),e(kt,null,{activator:a(({props:d})=>[e(h,M({icon:"",class:"ml-auto",variant:"text",size:"small"},d),{default:a(()=>[e(Y(lt),{size:"16"})]),_:2},1040)]),default:a(()=>[e($t,null,{default:a(()=>[(i(!0),p(z,null,N(b.value,(d,S)=>(i(),w(St,{key:S,value:S},{prepend:a(()=>[(i(),w(wt(d.icon),{"stroke-width":"1.5",size:"20"}))]),default:a(()=>[e(Tt,{class:"ml-3"},{default:a(()=>[_(f(d.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]}),_:1}),(r=t.post)!=null&&r.data.comments?(i(),p("div",aa,[(i(!0),p(z,null,N((v=t.post)==null?void 0:v.data.comments,u=>{var g;return i(),p("div",null,[e(Ee,{comments:u,postId:(g=t.post)==null?void 0:g.id},null,8,["comments","postId"])])}),256))])):V("",!0),l.value?(i(),p("div",sa,[e(It),o("div",oa,[e(I,{class:"flex-shrink-0 d-none d-sm-block",size:"33"},{default:a(()=>{var u;return[o("img",{src:(u=t.post)==null?void 0:u.profile.avatar,width:"33",alt:"avatar"},null,8,na)]}),_:1}),e(pt,{variant:"outlined",color:"primary",modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=u=>m.value=u),placeholder:"Comment","hide-details":""},null,8,["modelValue"]),e(h,{color:"primary",disabled:m.value==="",class:"mt-3 mt-sm-0",size:"large",onClick:c[2]||(c[2]=u=>{var g;return x((g=t.post)==null?void 0:g.id,m.value)})},{default:a(()=>[la]),_:1},8,["disabled"])])])):V("",!0)]}),_:1})}}}),ga=W({setup(t){const s=H();Vt(()=>{s.fetchPosts()});const n=zt(()=>s.posts);return(l,m)=>(i(),w(vt,{class:"mt-4"},{default:a(()=>[(i(!0),p(z,null,N(Y(n),b=>(i(),w(gt,{cols:"12",key:b.id},{default:a(()=>[e(ia,{post:b},null,8,["post"])]),_:2},1024))),128))]),_:1}))}}),ra={},ca={class:"d-flex pb-2"},da=_(" Photo / Video "),ma=_(" Article "),ua=_("Post");function pa(t,s){const n=C("PhotoIcon"),l=C("NotebookIcon");return i(),w(E,{elevation:"10",class:"bg-surface"},{default:a(()=>[e(ht,null,{default:a(()=>[e(Pt,{elevation:"10",color:"primary",name:"input-7-4",placeholder:"Share your thoughts",rows:"5"}),o("div",ca,[e(I,{size:"32",color:"primary",class:"mr-2"},{default:a(()=>[e(n,{size:"16"})]),_:1}),e(h,{color:"inherit",type:"upload",variant:"plain",class:"opacity-1"},{default:a(()=>[da]),_:1}),e(h,{color:"inherit",variant:"plain",class:"opacity-1"},{default:a(()=>[e(I,{size:"32",color:"secondary",class:"mr-2"},{default:a(()=>[e(l,{size:"16"})]),_:1}),ma]),_:1}),e(h,{class:"bg-primary ml-auto",size:"large"},{default:a(()=>[ua]),_:1})])]),_:1})]),_:1})}const ha=ft(ra,[["render",pa]]);export{ha as A,ga as _};
