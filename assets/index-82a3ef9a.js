import{u as te}from"./ChatDetail.vue_vue_type_style_index_0_lang-18b9bb84.js";import{P as q,a3 as se,o as p,c as _,b as d,w as m,V as C,a2 as we,a7 as De,s as w,r as L,Y as j,a as c,z as b,C as g,L as V,M as T,F as R,x as $,R as z,d as Ce,ab as Ie,a1 as $e,$ as Q}from"./index-dcd728bc.js";import{V as D}from"./VSheet-42154d36.js";import{V as Ae}from"./VAlert-d5b63406.js";import{V as Pe,f as Z}from"./ChatProfile-d853de6b.js";const Fe=q({setup(l){const e=se(""),s=te();function t(i){console.log(i),i.length!==0&&(s.sendMsg(s.chatContent,e.value),e.value="")}return(i,r)=>{const n=w("MoodSmileIcon"),a=w("SendIcon"),o=w("PhotoIcon"),h=w("PaperclipIcon");return p(),_("form",{class:"d-flex align-center pa-4",onSubmit:r[1]||(r[1]=De(y=>t(e.value),["prevent"]))},[d(C,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:m(()=>[d(n,{size:"24"})]),_:1}),d(we,{variant:"solo","hide-details":"",modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=y=>e.value=y),color:"primary",class:"shadow-none",density:"compact",placeholder:"Type a Message"},null,8,["modelValue"]),d(C,{icon:"",variant:"text",type:"submit",class:"text-medium-emphasis",disabled:!e.value},{default:m(()=>[d(a,{size:"20"})]),_:1},8,["disabled"]),d(C,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:m(()=>[d(o,{size:"20"})]),_:1}),d(C,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:m(()=>[d(h,{size:"20"})]),_:1})],32)}}}),Ne={key:0,class:"pa-6"},Me={class:"text-h6 mb-3"},je={key:0},ke=["src"],Ve={class:"text-h6 mb-3 mt-7"},Te=["src"],Oe={class:"pl-4"},Ee={class:"text-subtitle-1 font-weight-semibold"},He={class:"text-subtitle-2 mt-1"},Se=Ce(" No Attachments Found! "),Be=q({props:{chatDetail:Object},setup(l){const e=l,s=L(()=>{var i;return j.uniq(j.flatten((i=e.chatDetail)==null?void 0:i.chatHistory.map(r=>r.attachment))).length}),t=L(()=>{var i;return j.uniq(j.flatten((i=e.chatDetail)==null?void 0:i.chatHistory.map(r=>(r==null?void 0:r.type)==="img"?r.msg:null))).length-1});return(i,r)=>l.chatDetail?(p(),_("div",Ne,[c("h6",Me,"Media ("+b(g(t))+")",1),(p(!0),_(V,null,T(l.chatDetail.chatHistory,n=>(p(),_("div",{key:n.id},[n.type=="img"?(p(),_("div",je,[c("img",{src:n.msg,alt:"img",width:"100"},null,8,ke)])):R("",!0)]))),128)),c("h6",Ve,"Attachments ("+b(g(s))+")",1),g(s)!=0?(p(),$(D,{key:0},{default:m(()=>[(p(!0),_(V,null,T(l.chatDetail.chatHistory,n=>(p(),_("div",{key:n.id},[(p(!0),_(V,null,T(n.attachment,a=>(p(),_("div",{class:"d-flex align-center mt-7",key:a.file},[d(z,{class:"rounded-md bg-lightsecondary",size:"48"},{default:m(()=>[c("img",{width:"24",alt:"file",src:a.icon},null,8,Te)]),_:2},1024),c("div",Oe,[c("h6",Ee,b(a.file),1),c("h5",He,b(a.fileSize),1)])]))),128))]))),128))]),_:1})):(p(),$(D,{key:1},{default:m(()=>[d(Ae,{color:"error",type:"warning",density:"compact",variant:"tonal",class:"text-subtitle-1"},{default:m(()=>[Se]),_:1})]),_:1}))])):R("",!0)}}),Le={key:0,class:"customHeight"},ze={class:"d-flex align-center gap-3 pa-4 justify-space-between"},qe={class:"d-flex gap-2 align-center"},We=["src"],xe={class:"text-h5 mb-n1"},Ue={class:"textPrimary"},Ye={class:"d-flex"},Ge={class:"d-flex"},Xe={class:"w-100",style:{height:"calc(100vh - 360px)"}},Je={key:0,class:"justify-end d-flex text-end mb-1"},Ke={key:0,class:"text-medium-emphasis text-subtitle-2"},Qe={class:"text-body-1"},Ze=["src"],et={key:1,class:"d-flex align-items-start gap-3 mb-1"},tt=["src"],st={key:0,class:"text-medium-emphasis text-subtitle-2"},it={class:"text-body-1"},rt=["src"],lt={key:0,class:"right-sidebar"},Ft=q({setup(l){const{lgAndUp:e}=Ie(),s=te();$e(()=>{s.fetchChats()});const t=L(()=>s.chats[s.chatContent-1]),i=se(!!e);function r(){i.value=!i.value}return(n,a)=>{const o=w("PhoneIcon"),h=w("VideoPlusIcon"),y=w("DotsVerticalIcon"),v=w("perfect-scrollbar");return g(t)?(p(),_("div",Le,[c("div",null,[c("div",ze,[c("div",qe,[d(z,null,{default:m(()=>[c("img",{src:g(t).thumb,alt:"pro",width:"50"},null,8,We)]),_:1}),d(Pe,{class:"badg-dotDetail",dot:"",color:g(t).status==="away"?"warning":g(t).status==="busy"?"error":g(t).status==="online"?"success":"containerBg"},null,8,["color"]),c("div",null,[c("h5",xe,b(g(t).name),1),c("small",Ue,b(g(t).status),1)])]),c("div",Ye,[d(C,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:m(()=>[d(o,{size:"24"})]),_:1}),d(C,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:m(()=>[d(h,{size:"24"})]),_:1}),d(C,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:r},{default:m(()=>[d(y,{size:"24"})]),_:1})])]),d(Q),d(v,{class:"rightpartHeight h-100"},{default:m(()=>[c("div",Ge,[c("div",Xe,[(p(!0),_(V,null,T(g(t).chatHistory,u=>(p(),_("div",{key:u.id,class:"pa-5"},[g(t).id===u.senderId?(p(),_("div",Je,[c("div",null,[u.createdAt?(p(),_("small",Ke,b(g(Z)(new Date(u.createdAt),{addSuffix:!1}))+" ago",1)):R("",!0),u.type=="text"?(p(),$(D,{key:1,class:"bg-lightprimary rounded-md px-3 py-2 mb-1"},{default:m(()=>[c("p",Qe,b(u.msg),1)]),_:2},1024)):R("",!0),u.type=="img"?(p(),$(D,{key:2,class:"mb-1"},{default:m(()=>[c("img",{src:u.msg,class:"rounded-md",alt:"pro",width:"250"},null,8,Ze)]),_:2},1024)):R("",!0)])])):(p(),_("div",et,[d(z,null,{default:m(()=>[c("img",{src:g(t).thumb,alt:"pro",width:"40"},null,8,tt)]),_:1}),c("div",null,[u.createdAt?(p(),_("small",st,b(g(t).name)+", "+b(g(Z)(new Date(u.createdAt),{addSuffix:!1}))+" ago ",1)):R("",!0),u.type=="text"?(p(),$(D,{key:1,class:"bg-lightsecondary rounded-md px-3 py-2 mb-1"},{default:m(()=>[c("p",it,b(u.msg),1)]),_:2},1024)):R("",!0),u.type=="img"?(p(),$(D,{key:2,class:"mb-1"},{default:m(()=>[c("img",{src:u.msg,class:"rounded-md",alt:"pro",width:"250"},null,8,rt)]),_:2},1024)):R("",!0)])]))]))),128))]),i.value?(p(),_("div",lt,[d(D,null,{default:m(()=>[d(Be,{chatDetail:g(t)},null,8,["chatDetail"])]),_:1})])):R("",!0)])]),_:1})]),d(Q),d(Fe)])):R("",!0)}}});class nt{constructor(e){this.selfOptions=e||{},this.pipes={}}options(e){return e&&(this.selfOptions=e),this.selfOptions}pipe(e,s){let t=s;if(typeof e=="string"){if(typeof t>"u")return this.pipes[e];this.pipes[e]=t}if(e&&e.name){if(t=e,t.processor===this)return t;this.pipes[t.name]=t}return t.processor=this,t}process(e,s){let t=e;t.options=this.options();let i=s||e.pipe||"default",r;for(;i;)typeof t.nextAfterChildren<"u"&&(t.next=t.nextAfterChildren,t.nextAfterChildren=null),typeof i=="string"&&(i=this.pipe(i)),i.process(t),r=i,i=null,t&&t.next&&(t=t.next,i=t.pipe||r);return t.hasResult?t.result:void 0}}const at=nt;class ot{constructor(e){this.name=e,this.filters=[]}process(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");const s=this.debug,t=this.filters.length,i=e;for(let r=0;r<t;r++){const n=this.filters[r];if(s&&this.log(`filter: ${n.filterName}`),n(i),typeof i=="object"&&i.exiting){i.exiting=!1;break}}!i.next&&this.resultCheck&&this.resultCheck(i)}log(e){console.log(`[jsondiffpatch] ${this.name} pipe, ${e}`)}append(...e){return this.filters.push(...e),this}prepend(...e){return this.filters.unshift(...e),this}indexOf(e){if(!e)throw new Error("a filter name is required");for(let s=0;s<this.filters.length;s++)if(this.filters[s].filterName===e)return s;throw new Error(`filter not found: ${e}`)}list(){return this.filters.map(e=>e.filterName)}after(e,...s){const t=this.indexOf(e);return this.filters.splice(t+1,0,...s),this}before(e,...s){const t=this.indexOf(e);return this.filters.splice(t,0,...s),this}replace(e,...s){const t=this.indexOf(e);return this.filters.splice(t,1,...s),this}remove(e){const s=this.indexOf(e);return this.filters.splice(s,1),this}clear(){return this.filters.length=0,this}shouldHaveResult(e){if(e===!1){this.resultCheck=null;return}if(!this.resultCheck)return this.resultCheck=s=>{if(!s.hasResult){console.log(s);const t=new Error(`${this.name} failed`);throw t.noResult=!0,t}},this}}const S=ot;class W{setResult(e){return this.result=e,this.hasResult=!0,this}exit(){return this.exiting=!0,this}push(e,s){return e.parent=this,typeof s<"u"&&(e.childName=s),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}function ft(l){const e=/^\/(.*)\/([gimyu]*)$/.exec(l.toString());return new RegExp(e[1],e[2])}function O(l){if(typeof l!="object")return l;if(l===null)return null;if(Array.isArray(l))return l.map(O);if(l instanceof Date)return new Date(l.getTime());if(l instanceof RegExp)return ft(l);const e={};for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=O(l[s]));return e}class ht extends W{constructor(e,s){super(),this.left=e,this.right=s,this.pipe="diff"}setResult(e){if(this.options.cloneDiffValues&&typeof e=="object"){const s=typeof this.options.cloneDiffValues=="function"?this.options.cloneDiffValues:O;typeof e[0]=="object"&&(e[0]=s(e[0])),typeof e[1]=="object"&&(e[1]=s(e[1]))}return super.setResult(e)}}const I=ht;class ut extends W{constructor(e,s){super(),this.left=e,this.delta=s,this.pipe="patch"}}const x=ut;class dt extends W{constructor(e){super(),this.delta=e,this.pipe="reverse"}}const U=dt,ie=function(e){if(e.left===e.right){e.setResult(void 0).exit();return}if(typeof e.left>"u"){if(typeof e.right=="function")throw new Error("functions are not supported");e.setResult([e.right]).exit();return}if(typeof e.right>"u"){e.setResult([e.left,0,0]).exit();return}if(typeof e.left=="function"||typeof e.right=="function")throw new Error("functions are not supported");if(e.leftType=e.left===null?"null":typeof e.left,e.rightType=e.right===null?"null":typeof e.right,e.leftType!==e.rightType){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="boolean"||e.leftType==="number"){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="object"&&(e.leftIsArray=Array.isArray(e.left)),e.rightType==="object"&&(e.rightIsArray=Array.isArray(e.right)),e.leftIsArray!==e.rightIsArray){e.setResult([e.left,e.right]).exit();return}e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit())};ie.filterName="trivial";const re=function(e){if(typeof e.delta>"u"){e.setResult(e.left).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;const s=e.delta;if(s.length===1){e.setResult(s[0]).exit();return}if(s.length===2){if(e.left instanceof RegExp){const t=/^\/(.*)\/([gimyu]+)$/.exec(s[1]);if(t){e.setResult(new RegExp(t[1],t[2])).exit();return}}e.setResult(s[1]).exit();return}s.length===3&&s[2]===0&&e.setResult(void 0).exit()};re.filterName="trivial";const le=function(e){if(typeof e.delta>"u"){e.setResult(e.delta).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;const s=e.delta;if(s.length===1){e.setResult([s[0],0,0]).exit();return}if(s.length===2){e.setResult([s[1],s[0]]).exit();return}s.length===3&&s[2]===0&&e.setResult([s[0]]).exit()};le.filterName="trivial";const ne=l=>{if(!l||!l.children)return;const e=l.children.length;let s,t=l.result;for(let i=0;i<e;i++)s=l.children[i],!(typeof s.result>"u")&&(t=t||{},t[s.childName]=s.result);t&&l.leftIsArray&&(t._t="a"),l.setResult(t).exit()};ne.filterName="collectChildren";const ae=l=>{if(l.leftIsArray||l.leftType!=="object")return;const e=l.left,s=l.right;let t,i;const r=l.options.propertyFilter;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r&&!r(t,l)||(i=new I(e[t],s[t]),l.push(i,t)));for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r&&!r(t,l)||typeof e[t]>"u"&&(i=new I(void 0,s[t]),l.push(i,t)));if(!l.children||l.children.length===0){l.setResult(void 0).exit();return}l.exit()};ae.filterName="objects";const oe=function(e){if(!e.nested)return;const s=e.delta;if(s._t)return;const t=s;let i,r;for(i in t)r=new x(e.left[i],t[i]),e.push(r,i);e.exit()};oe.filterName="objects";const fe=function(e){if(!e||!e.children||e.delta._t)return;const t=e.left,i=e.children.length;let r;for(let n=0;n<i;n++){r=e.children[n];const a=r.childName;Object.prototype.hasOwnProperty.call(e.left,a)&&r.result===void 0?delete t[a]:t[a]!==r.result&&(t[a]=r.result)}e.setResult(t).exit()};fe.filterName="collectChildren";const he=function(e){if(!e.nested||e.delta._t)return;const t=e.delta;let i,r;for(i in t)r=new U(t[i]),e.push(r,i);e.exit()};he.filterName="objects";const ue=l=>{if(!l||!l.children||l.delta._t)return;const s=l.children.length;let t;const i={};for(let r=0;r<s;r++){t=l.children[r];const n=t.childName;i[n]!==t.result&&(i[n]=t.result)}l.setResult(i).exit()};ue.filterName="collectChildren";const ct=function(l,e,s,t){return l[s]===e[t]},pt=function(l,e,s,t){const i=l.length,r=e.length;let n,a;const o=new Array(i+1);for(n=0;n<i+1;n++)for(o[n]=new Array(r+1),a=0;a<r+1;a++)o[n][a]=0;for(o.match=s,n=1;n<i+1;n++)for(a=1;a<r+1;a++)s(l,e,n-1,a-1,t)?o[n][a]=o[n-1][a-1]+1:o[n][a]=Math.max(o[n-1][a],o[n][a-1]);return o},mt=function(l,e,s,t){let i=e.length,r=s.length;const n={sequence:[],indices1:[],indices2:[]};for(;i!==0&&r!==0;)if(l.match(e,s,i-1,r-1,t))n.sequence.unshift(e[i-1]),n.indices1.unshift(i-1),n.indices2.unshift(r-1),--i,--r;else{const o=l[i][r-1],h=l[i-1][r];o>h?--r:--i}return n},yt=function(l,e,s,t){const i=t||{},r=pt(l,e,s||ct,i);return mt(r,l,e,i)},gt={get:yt},A=3;function _t(l,e,s,t){for(let i=0;i<s;i++){const r=l[i];for(let n=0;n<t;n++){const a=e[n];if(i!==n&&r===a)return!0}}}function k(l,e,s,t,i){const r=l[s],n=e[t];if(r===n)return!0;if(typeof r!="object"||typeof n!="object")return!1;const a=i.objectHash;if(!a)return i.matchByPosition&&s===t;i.hashCache1=i.hashCache1||[];let o=i.hashCache1[s];if(typeof o>"u"&&(i.hashCache1[s]=o=a(r,s)),typeof o>"u")return!1;i.hashCache2=i.hashCache2||[];let h=i.hashCache2[t];return typeof h>"u"&&(i.hashCache2[t]=h=a(n,t)),typeof h>"u"?!1:o===h}const de=function(e){if(!e.leftIsArray)return;const s={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition};let t=0,i=0,r,n,a;const o=e.left,h=e.right,y=o.length,v=h.length;let u;for(y>0&&v>0&&!s.objectHash&&typeof s.matchByPosition!="boolean"&&(s.matchByPosition=!_t(o,h,y,v));t<y&&t<v&&k(o,h,t,t,s);)r=t,u=new I(o[r],h[r]),e.push(u,r),t++;for(;i+t<y&&i+t<v&&k(o,h,y-1-i,v-1-i,s);)n=y-1-i,a=v-1-i,u=new I(o[n],h[a]),e.push(u,a),i++;let f;if(t+i===y){if(y===v){e.setResult(void 0).exit();return}for(f=f||{_t:"a"},r=t;r<v-i;r++)f[r]=[h[r]];e.setResult(f).exit();return}if(t+i===v){for(f=f||{_t:"a"},r=t;r<y-i;r++)f[`_${r}`]=[o[r],0,0];e.setResult(f).exit();return}delete s.hashCache1,delete s.hashCache2;const P=o.slice(t,y-i),Y=h.slice(t,v-i),F=gt.get(P,Y,k,s),N=[];for(f=f||{_t:"a"},r=t;r<y-i;r++)F.indices1.indexOf(r-t)<0&&(f[`_${r}`]=[o[r],0,0],N.push(r));let G=!0;e.options&&e.options.arrays&&e.options.arrays.detectMove===!1&&(G=!1);let X=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(X=!0);const J=N.length;for(r=t;r<v-i;r++){const H=F.indices2.indexOf(r-t);if(H<0){let K=!1;if(G&&J>0){for(let M=0;M<J;M++)if(n=N[M],k(P,Y,n-t,r-t,s)){f[`_${n}`].splice(1,2,r,A),X||(f[`_${n}`][0]=""),a=r,u=new I(o[n],h[a]),e.push(u,a),N.splice(M,1),K=!0;break}}K||(f[r]=[h[r]])}else n=F.indices1[H]+t,a=F.indices2[H]+t,u=new I(o[n],h[a]),e.push(u,a)}e.setResult(f).exit()};de.filterName="arrays";const ee={numerically(l,e){return l-e},numericallyBy(l){return(e,s)=>e[l]-s[l]}},ce=function(e){if(!e.nested)return;const s=e.delta;if(s._t!=="a")return;let t,i;const r=s,n=e.left;let a=[],o=[];const h=[];for(t in r)if(t!=="_t")if(t[0]==="_"){const f=t;if(r[f][2]===0||r[f][2]===A)a.push(parseInt(t.slice(1),10));else throw new Error(`only removal or move can be applied at original array indices, invalid diff type: ${r[f][2]}`)}else{const f=t;r[f].length===1?o.push({index:parseInt(f,10),value:r[f][0]}):h.push({index:parseInt(f,10),delta:r[f]})}for(a=a.sort(ee.numerically),t=a.length-1;t>=0;t--){i=a[t];const f=r[`_${i}`],P=n.splice(i,1)[0];f[2]===A&&o.push({index:f[1],value:P})}o=o.sort(ee.numericallyBy("index"));const y=o.length;for(t=0;t<y;t++){const f=o[t];n.splice(f.index,0,f.value)}const v=h.length;let u;if(v>0)for(t=0;t<v;t++){const f=h[t];u=new x(n[f.index],f.delta),e.push(u,f.index)}if(!e.children){e.setResult(n).exit();return}e.exit()};ce.filterName="arrays";const pe=function(e){if(!e||!e.children||e.delta._t!=="a")return;const t=e.left,i=e.children.length;let r;for(let n=0;n<i;n++){r=e.children[n];const a=r.childName;t[a]=r.result}e.setResult(t).exit()};pe.filterName="arraysCollectChildren";const me=function(e){if(!e.nested){const n=e.delta;if(n[2]===A){const a=n;e.newName=`_${a[1]}`,e.setResult([a[0],parseInt(e.childName.substring(1),10),A]).exit()}return}const s=e.delta;if(s._t!=="a")return;const t=s;let i,r;for(i in t)i!=="_t"&&(r=new U(t[i]),e.push(r,i));e.exit()};me.filterName="arrays";const vt=(l,e,s)=>{if(typeof e=="string"&&e[0]==="_")return parseInt(e.substring(1),10);if(Array.isArray(s)&&s[2]===0)return`_${e}`;let t=+e;for(const i in l){const r=l[i];if(Array.isArray(r))if(r[2]===A){const n=parseInt(i.substring(1),10),a=r[1];if(a===+e)return n;n<=t&&a>t?t++:n>=t&&a<t&&t--}else r[2]===0?parseInt(i.substring(1),10)<=t&&t++:r.length===1&&parseInt(i,10)<=t&&t--}return t},ye=l=>{if(!l||!l.children)return;const e=l.delta;if(e._t!=="a")return;const s=e,t=l.children.length;let i;const r={_t:"a"};for(let n=0;n<t;n++){i=l.children[n];let a=i.newName;typeof a>"u"&&(a=vt(s,i.childName,i.result)),r[a]!==i.result&&(r[a]=i.result)}l.setResult(r).exit()};ye.filterName="arraysCollectChildren";const ge=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};ge.filterName="dates";const E=2,bt=60;let B=null;function _e(l,e){var s;if(!B){let t;if(!((s=l==null?void 0:l.textDiff)===null||s===void 0)&&s.diffMatchPatch)t=new l.textDiff.diffMatchPatch;else{if(!e)return null;const i=new Error("The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.");throw i.diff_match_patch_not_found=!0,i}B={diff:function(i,r){return t.patch_toText(t.patch_make(i,r))},patch:function(i,r){const n=t.patch_apply(t.patch_fromText(r),i);for(let a=0;a<n[1].length;a++)if(!n[1][a]){const o=new Error("text patch failed");o.textPatchFailed=!0}return n[0]}}}return B}const ve=function(e){if(e.leftType!=="string")return;const s=e.left,t=e.right,i=e.options&&e.options.textDiff&&e.options.textDiff.minLength||bt;if(s.length<i||t.length<i){e.setResult([s,t]).exit();return}const r=_e(e.options);if(!r){e.setResult([s,t]).exit();return}const n=r.diff;e.setResult([n(s,t),0,E]).exit()};ve.filterName="texts";const be=function(e){if(e.nested)return;const s=e.delta;if(s[2]!==E)return;const t=s,i=_e(e.options,!0).patch;e.setResult(i(e.left,t[0])).exit()};be.filterName="texts";const Rt=function(l){let e,s,t,i,r=null;const n=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;let a;const o=l.split(`
`);for(e=0,s=o.length;e<s;e++){t=o[e];const h=t.slice(0,1);h==="@"?(r=n.exec(t),a=e,o[a]="@@ -"+r[3]+","+r[4]+" +"+r[1]+","+r[2]+" @@"):h==="+"?(o[e]="-"+o[e].slice(1),o[e-1].slice(0,1)==="+"&&(i=o[e],o[e]=o[e-1],o[e-1]=i)):h==="-"&&(o[e]="+"+o[e].slice(1))}return o.join(`
`)},Re=function(e){if(e.nested)return;const s=e.delta;if(s[2]!==E)return;const t=s;e.setResult([Rt(t[0]),0,E]).exit()};Re.filterName="texts";class wt{constructor(e){this.processor=new at(e),this.processor.pipe(new S("diff").append(ne,ie,ge,ve,ae,de).shouldHaveResult()),this.processor.pipe(new S("patch").append(fe,pe,re,be,oe,ce).shouldHaveResult()),this.processor.pipe(new S("reverse").append(ue,ye,le,Re,he,me).shouldHaveResult())}options(e){return this.processor.options(e)}diff(e,s){return this.processor.process(new I(e,s))}patch(e,s){return this.processor.process(new x(e,s))}reverse(e){return this.processor.process(new U(e))}unpatch(e,s){return this.patch(e,this.reverse(s))}clone(e){return O(e)}}const Dt=wt;function Nt(l){return new Dt(l)}export{Ft as _,Nt as c};
