import{_ as V,db as _,I as h,o as i,x as p,w as s,b as l,am as N,ae as g,c as x,M as C,aj as E,a2 as u,L as w,aq as y,V as f,aw as k,al as D,d as m}from"./index-dcd728bc.js";const P={components:{BpmnRoleParameterContexts:_},props:{definitionId:String,roles:Array},data:()=>({newProcess:{id:"",label:""},uengine:null,isNewDef:!1,addDialog:!1,updateDialog:!1,roleName:"",roleEndpoint:"",resourceNames:"",roleMappings:[]}),computed:{},watch:{},created(){let a=this;this.uengine=h.createBackend(),this.roles.forEach(function(o){a.roleMappings.push({roleName:o,roleEndpoint:"",resourceNames:""})})},methods:{closeDialog(){this.$emit("close")},async executeProcess(){var a=this;a.$try({context:a,action:async()=>{let o=[];a.roleMappings.forEach(d=>{let r=d.roleEndpoint.split(","),t=d.resourceNames.split(",");r=r.map(e=>e.trim()).filter(e=>e!==""),t=t.map(e=>e.trim()),r.length>0&&o.push({name:d.roleName,endpoints:r,resourceNames:t})});let c={processDefinitionId:a.definitionId};o.length>0&&(c.roleMappings=o),await a.uengine.start(c),a.closeDialog()},successMsg:"Process 실행 완료"})}}},B=m(" Process 실행 "),b=m("실행"),U=m("닫기");function v(a,o,c,d,r,t){return i(),p(D,{style:{width:"100%",height:"100%"}},{default:s(()=>[l(N,null,{default:s(()=>[B]),_:1}),l(y,null,{default:s(()=>[l(g,null,{default:s(()=>[(i(!0),x(w,null,C(a.roleMappings,e=>(i(),p(E,null,{default:s(()=>[l(u,{label:"Role Name",readonly:"",modelValue:e.roleName,"onUpdate:modelValue":n=>e.roleName=n},null,8,["modelValue","onUpdate:modelValue"]),l(u,{label:"Role Endpoint",modelValue:e.roleEndpoint,"onUpdate:modelValue":n=>e.roleEndpoint=n},null,8,["modelValue","onUpdate:modelValue"]),l(u,{label:"Resource Names",modelValue:e.resourceNames,"onUpdate:modelValue":n=>e.resourceNames=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1}),l(k,{class:"justify-center"},{default:s(()=>[l(f,{color:"primary",variant:"flat",class:"cp-process-save",onClick:t.executeProcess},{default:s(()=>[b]),_:1},8,["onClick"]),l(f,{color:"error",variant:"flat",onClick:o[0]||(o[0]=e=>t.closeDialog())},{default:s(()=>[U]),_:1})]),_:1})]),_:1})}const $=V(P,[["render",v]]);export{$ as P};
