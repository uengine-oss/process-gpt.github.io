import{P as Fe,b6 as ne,r as U,an as Re,aV as pe,cj as Je,C as d,a1 as Qe,ch as xe,cx as be,a5 as Z,cV as en,ag as nn,a3 as J,dY as Te,bq as me,e0 as tn,cy as Vn,dZ as On}from"./index-dcd728bc.js";/**
  * vee-validate v4.6.7
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function de(e){return typeof e=="function"}function ye(e){return e==null}const le=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function rn(e){return Number(e)>=0}function pn(e){const n=parseFloat(e);return isNaN(n)?e:n}const bn={};function An(e){return bn[e]}const oe=Symbol("vee-validate-form"),Fn=Symbol("vee-validate-field-instance"),Ae=Symbol("Default empty value");function Ce(e){return de(e)&&!!e.__locatorRef}function he(e){return!!e&&de(e.validate)}function fe(e){return e==="checkbox"||e==="radio"}function Sn(e){return le(e)||Array.isArray(e)}function an(e){return Array.isArray(e)?e.length===0:le(e)&&Object.keys(e).length===0}function Se(e){return/^\[.+\]$/i.test(e)}function En(e){return un(e)&&e.multiple}function un(e){return e.tagName==="SELECT"}function wn(e,n){const t=![!1,null,void 0,0].includes(n.multiple)&&!Number.isNaN(n.multiple);return e==="select"&&"multiple"in n&&t}function jn(e,n){return!wn(e,n)&&n.type!=="file"&&!fe(n.type)}function ln(e){return Pe(e)&&e.target&&"submit"in e.target}function Pe(e){return e?!!(typeof Event<"u"&&de(Event)&&e instanceof Event||e&&e.srcElement):!1}function qe(e,n){return n in e&&e[n]!==Ae}var Ge=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var i,r,a;if(Array.isArray(n)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!e(n[r],t[r]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(a=Object.keys(n),i=a.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=i;r--!==0;){var l=a[r];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t};function Ue(e){return Se(e)?e.replace(/\[|\]/gi,""):e}function k(e,n,t){return e?Se(n)?e[Ue(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,a)=>Sn(r)&&a in r?r[a]:t,e):t}function ue(e,n,t){if(Se(n)){e[Ue(n)]=t;return}const i=n.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<i.length;a++){if(a===i.length-1){r[i[a]]=t;return}(!(i[a]in r)||ye(r[i[a]]))&&(r[i[a]]=rn(i[a+1])?[]:{}),r=r[i[a]]}}function _e(e,n){if(Array.isArray(e)&&rn(n)){e.splice(Number(n),1);return}le(e)&&delete e[n]}function Me(e,n){if(Se(n)){delete e[Ue(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let a=0;a<t.length;a++){if(a===t.length-1){_e(i,t[a]);break}if(!(t[a]in i)||ye(i[t[a]]))break;i=i[t[a]]}const r=t.map((a,l)=>k(e,t.slice(0,l).join(".")));for(let a=r.length-1;a>=0;a--)if(an(r[a])){if(a===0){_e(e,t[0]);continue}_e(r[a-1],t[a-1])}}function z(e){return Object.keys(e)}function ge(e,n=void 0){const t=nn();return(t==null?void 0:t.provides[e])||Je(e,n)}function Ie(e){tn(`[vee-validate]: ${e}`)}function Be(e,n,t){if(Array.isArray(e)){const i=[...e],r=i.findIndex(a=>Ge(a,n));return r>=0?i.splice(r,1):i.push(n),i}return Ge(e,n)?t:n}function We(e,n=0){let t=null,i=[];return function(...r){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const a=e(...r);i.forEach(l=>l(a)),i=[]},n),new Promise(a=>i.push(a))}}function _n(e,n){return le(n)&&n.number?pn(e):e}function Ne(e,n){let t;return async function(...r){const a=e(...r);t=a;const l=await a;return a!==t||(t=void 0,n(l,r)),l}}const Ee=(e,n,t)=>n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var i,r;return(r=(i=n.slots).default)===null||r===void 0?void 0:r.call(i,t())}}:n.slots.default;function ke(e){if(on(e))return e._value}function on(e){return"_value"in e}function ze(e){if(!Pe(e))return e;const n=e.target;if(fe(n.type)&&on(n))return ke(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(En(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(ke);if(un(n)){const t=Array.from(n.options).find(i=>i.selected);return t?ke(t):n.value}return n.value}function sn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?le(e)&&e._$$isNormalized?e:le(e)?Object.keys(e).reduce((t,i)=>{const r=Mn(e[i]);return e[i]!==!1&&(t[i]=He(r)),t},n):typeof e!="string"?n:e.split("|").reduce((t,i)=>{const r=In(i);return r.name&&(t[r.name]=He(r.params)),t},n):n}function Mn(e){return e===!0?[]:Array.isArray(e)||le(e)?e:[e]}function He(e){const n=t=>typeof t=="string"&&t[0]==="@"?kn(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,i)=>(t[i]=n(e[i]),t),{})}const In=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function kn(e){const n=t=>k(t,e)||t[e];return n.__locatorRef=e,n}function Cn(e){return Array.isArray(e)?e.filter(Ce):z(e).filter(n=>Ce(e[n])).map(n=>e[n])}const Bn={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Nn=Object.assign({},Bn);const De=()=>Nn;async function cn(e,n,t={}){const i=t==null?void 0:t.bails,r={name:(t==null?void 0:t.name)||"{field}",rules:n,bails:i??!0,formData:(t==null?void 0:t.values)||{}},l=(await Rn(r,e)).errors;return{errors:l,valid:!l.length}}async function Rn(e,n){if(he(e.rules))return Tn(n,e.rules,{bails:e.bails});if(de(e.rules)||Array.isArray(e.rules)){const l={field:e.name,form:e.formData,value:n},m=Array.isArray(e.rules)?e.rules:[e.rules],s=m.length,y=[];for(let b=0;b<s;b++){const g=m[b],A=await g(n,l);if(typeof A!="string"&&A)continue;const B=typeof A=="string"?A:dn(l);if(y.push(B),e.bails)return{errors:y}}return{errors:y}}const t=Object.assign(Object.assign({},e),{rules:sn(e.rules)}),i=[],r=Object.keys(t.rules),a=r.length;for(let l=0;l<a;l++){const m=r[l],s=await Pn(t,n,{name:m,params:t.rules[m]});if(s.error&&(i.push(s.error),e.bails))return{errors:i}}return{errors:i}}async function Tn(e,n,t){var i;return{errors:await n.validate(e,{abortEarly:(i=t.bails)!==null&&i!==void 0?i:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function Pn(e,n,t){const i=An(t.name);if(!i)throw new Error(`No such validator '${t.name}' exists.`);const r=Un(t.params,e.formData),a={field:e.name,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:r})},l=await i(n,r,a);return typeof l=="string"?{error:l}:{error:l?void 0:dn(a)}}function dn(e){const n=De().generateMessage;return n?n(e):"Field is invalid"}function Un(e,n){const t=i=>Ce(i)?i(n):i;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((i,r)=>(i[r]=t(e[r]),i),{})}async function zn(e,n){const t=await e.validate(n,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),i={},r={};for(const a of t){const l=a.errors;i[a.path]={valid:!l.length,errors:l},l.length&&(r[a.path]=l[0])}return{valid:!t.length,results:i,errors:r}}async function Dn(e,n,t){const r=z(e).map(async y=>{var b,g,A;const M=await cn(k(n,y),e[y],{name:((b=t==null?void 0:t.names)===null||b===void 0?void 0:b[y])||y,values:n,bails:(A=(g=t==null?void 0:t.bailsMap)===null||g===void 0?void 0:g[y])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},M),{path:y})});let a=!0;const l=await Promise.all(r),m={},s={};for(const y of l)m[y.path]={valid:y.valid,errors:y.errors},y.valid||(a=!1,s[y.path]=y.errors[0]);return{valid:a,results:m,errors:s}}function Ke(e,n,t){typeof t.value=="object"&&(t.value=C(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function C(e){if(typeof e!="object")return e;var n=0,t,i,r,a=Object.prototype.toString.call(e);if(a==="[object Object]"?r=Object.create(e.__proto__||null):a==="[object Array]"?r=Array(e.length):a==="[object Set]"?(r=new Set,e.forEach(function(l){r.add(C(l))})):a==="[object Map]"?(r=new Map,e.forEach(function(l,m){r.set(C(m),C(l))})):a==="[object Date]"?r=new Date(+e):a==="[object RegExp]"?r=new RegExp(e.source,e.flags):a==="[object DataView]"?r=new e.constructor(C(e.buffer)):a==="[object ArrayBuffer]"?r=e.slice(0):a.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)Ke(r,i[n],Object.getOwnPropertyDescriptor(e,i[n]));for(n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++)Object.hasOwnProperty.call(r,t=i[n])&&r[t]===e[t]||Ke(r,t,Object.getOwnPropertyDescriptor(e,t))}return r||e}var Q=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var i,r,a;if(Array.isArray(n)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!e(n[r],t[r]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;for(r of n.entries())if(!e(r[1],t.get(r[0])))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(n[r]!==t[r])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(a=Object.keys(n),i=a.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=i;r--!==0;){var l=a[r];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t};let Ye=0;function $n(e,n){const{value:t,initialValue:i,setInitialValue:r}=fn(e,n.modelValue,!n.standalone),{errorMessage:a,errors:l,setErrors:m}=qn(e,!n.standalone),s=Ln(t,i,l),y=Ye>=Number.MAX_SAFE_INTEGER?0:++Ye;function b(g){var A;"value"in g&&(t.value=g.value),"errors"in g&&m(g.errors),"touched"in g&&(s.touched=(A=g.touched)!==null&&A!==void 0?A:s.touched),"initialValue"in g&&r(g.initialValue)}return{id:y,path:e,value:t,initialValue:i,meta:s,errors:l,errorMessage:a,setState:b}}function fn(e,n,t=!0){const i=t===!0?ge(oe,void 0):void 0,r=J(d(n));function a(){return i?k(i.meta.value.initialValues,d(e),d(r)):d(r)}function l(b){if(!i){r.value=b;return}i.stageInitialValue(d(e),b,!0)}const m=U(a);if(!i)return{value:J(a()),initialValue:m,setInitialValue:l};const s=n?d(n):k(i.values,d(e),d(m));return i.stageInitialValue(d(e),s,!0),{value:U({get(){return k(i.values,d(e))},set(b){i.setFieldValue(d(e),b)}}),initialValue:m,setInitialValue:l}}function Ln(e,n,t){const i=Te({touched:!1,pending:!1,valid:!0,validated:!!d(t).length,initialValue:U(()=>d(n)),dirty:U(()=>!Q(d(e),d(n)))});return Z(t,r=>{i.valid=!r.length},{immediate:!0,flush:"sync"}),i}function qn(e,n){const t=n?ge(oe,void 0):void 0;function i(a){return a?Array.isArray(a)?a:[a]:[]}if(!t){const a=J([]);return{errors:a,errorMessage:U(()=>a.value[0]),setErrors:l=>{a.value=i(l)}}}const r=U(()=>t.errorBag.value[d(e)]||[]);return{errors:r,errorMessage:U(()=>r.value[0]),setErrors:a=>{t.setFieldErrorBag(d(e),i(a))}}}function Gn(e,n,t){return fe(t==null?void 0:t.type)?Kn(e,n,t):vn(e,n,t)}function vn(e,n,t){const{initialValue:i,validateOnMount:r,bails:a,type:l,checkedValue:m,label:s,validateOnValueUpdate:y,uncheckedValue:b,standalone:g,keepValueOnUnmount:A,modelPropName:M,syncVModel:B}=Wn(d(e),t),w=g?void 0:ge(oe);let W=!1;const{id:L,value:T,initialValue:v,meta:c,setState:F,errors:p,errorMessage:S}=$n(e,{modelValue:i,standalone:g});B&&Yn({value:T,prop:M,handleChange:ie});const E=()=>{c.touched=!0},N=U(()=>{let f=d(n);const _=d(w==null?void 0:w.schema);return _&&!he(_)&&(f=Hn(_,d(e))||f),he(f)||de(f)||Array.isArray(f)?f:sn(f)});async function I(f){var _,D;return w!=null&&w.validateSchema?(_=(await w.validateSchema(f)).results[d(e)])!==null&&_!==void 0?_:{valid:!0,errors:[]}:cn(T.value,N.value,{name:d(s)||d(e),values:(D=w==null?void 0:w.values)!==null&&D!==void 0?D:{},bails:a})}const j=Ne(async()=>(c.pending=!0,c.validated=!0,I("validated-only")),f=>(W&&(f.valid=!0,f.errors=[]),F({errors:f.errors}),c.pending=!1,f)),P=Ne(async()=>I("silent"),f=>(W&&(f.valid=!0),c.valid=f.valid,f));function K(f){return(f==null?void 0:f.mode)==="silent"?P():j()}function ie(f,_=!0){const D=ze(f);T.value=D,!y&&_&&j()}Qe(()=>{if(r)return j();(!w||!w.validateSchema)&&P()});function G(f){c.touched=f}let H;function q(){H=Z(T,(f,_)=>{if(Q(f,_))return;(y?j:P)()},{deep:!0})}q();function te(f){var _;H==null||H();const D=f&&"value"in f?f.value:v.value;F({value:C(D),initialValue:C(D),touched:(_=f==null?void 0:f.touched)!==null&&_!==void 0?_:!1,errors:(f==null?void 0:f.errors)||[]}),c.pending=!1,c.validated=!1,P(),me(()=>{q()})}function Ve(f){T.value=f}function Oe(f){F({errors:Array.isArray(f)?f:[f]})}const Y={id:L,name:e,label:s,value:T,meta:c,errors:p,errorMessage:S,type:l,checkedValue:m,uncheckedValue:b,bails:a,keepValueOnUnmount:A,resetField:te,handleReset:()=>te(),validate:K,handleChange:ie,handleBlur:E,setState:F,setTouched:G,setErrors:Oe,setValue:Ve};if(xe(Fn,Y),be(n)&&typeof d(n)!="function"&&Z(n,(f,_)=>{Q(f,_)||(c.validated?j():P())},{deep:!0}),!w)return Y;w.register(Y),en(()=>{W=!0,w.unregister(Y)});const re=U(()=>{const f=N.value;return!f||de(f)||he(f)||Array.isArray(f)?{}:Object.keys(f).reduce((_,D)=>{const we=Cn(f[D]).map(se=>se.__locatorRef).reduce((se,x)=>{const ae=k(w.values,x)||w.values[x];return ae!==void 0&&(se[x]=ae),se},{});return Object.assign(_,we),_},{})});return Z(re,(f,_)=>{if(!Object.keys(f).length)return;!Q(f,_)&&(c.validated?j():P())}),Y}function Wn(e,n){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!n)return t();const i="valueProp"in n?n.valueProp:n.checkedValue;return Object.assign(Object.assign(Object.assign({},t()),n||{}),{checkedValue:i})}function Hn(e,n){if(e)return e[n]}function Kn(e,n,t){const i=t!=null&&t.standalone?void 0:ge(oe),r=t==null?void 0:t.checkedValue,a=t==null?void 0:t.uncheckedValue;function l(m){const s=m.handleChange,y=U(()=>{const g=d(m.value),A=d(r);return Array.isArray(g)?g.findIndex(M=>Q(M,A))>=0:Q(A,g)});function b(g,A=!0){var M;if(y.value===((M=g==null?void 0:g.target)===null||M===void 0?void 0:M.checked))return;let B=ze(g);i||(B=Be(d(m.value),d(r),d(a))),s(B,A)}return Object.assign(Object.assign({},m),{checked:y,checkedValue:r,uncheckedValue:a,handleChange:b})}return l(vn(e,n,t))}function Yn({prop:e,value:n,handleChange:t}){const i=nn();if(!i)return;const r=e||"modelValue",a=`update:${r}`;r in i.props&&(Z(n,l=>{Q(l,Xe(i,r))||i.emit(a,l)}),Z(()=>Xe(i,r),l=>{if(l===Ae&&n.value===void 0)return;const m=l===Ae?void 0:l;Q(m,_n(n.value,i.props.modelModifiers))||t(m)}))}function Xe(e,n){return e.props[n]}Fe({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>De().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Ae},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,n){const t=ne(e,"rules"),i=ne(e,"name"),r=ne(e,"label"),a=ne(e,"uncheckedValue"),l=ne(e,"keepValue"),{errors:m,value:s,errorMessage:y,validate:b,handleChange:g,handleBlur:A,setTouched:M,resetField:B,handleReset:w,meta:W,checked:L,setErrors:T}=Gn(i,t,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:n.attrs.type,initialValue:Zn(e,n),checkedValue:n.attrs.value,uncheckedValue:a,label:r,validateOnValueUpdate:!1,keepValueOnUnmount:l}),v=function(N,I=!0){g(N,I),n.emit("update:modelValue",s.value)},c=E=>{fe(n.attrs.type)||(s.value=ze(E))},F=function(N){c(N),n.emit("update:modelValue",s.value)},p=U(()=>{const{validateOnInput:E,validateOnChange:N,validateOnBlur:I,validateOnModelUpdate:j}=Xn(e),P=[A,n.attrs.onBlur,I?b:void 0].filter(Boolean),K=[q=>v(q,E),n.attrs.onInput].filter(Boolean),ie=[q=>v(q,N),n.attrs.onChange].filter(Boolean),G={name:e.name,onBlur:P,onInput:K,onChange:ie};G["onUpdate:modelValue"]=q=>v(q,j),fe(n.attrs.type)&&L&&(G.checked=L.value);const H=Ze(e,n);return jn(H,n.attrs)&&(G.value=s.value),G});function S(){return{field:p.value,value:s.value,meta:W,errors:m.value,errorMessage:y.value,validate:b,resetField:B,handleChange:v,handleInput:F,handleReset:w,handleBlur:A,setTouched:M,setErrors:T}}return n.expose({setErrors:T,setTouched:M,reset:B,validate:b,handleChange:g}),()=>{const E=Re(Ze(e,n)),N=Ee(E,n,S);return E?pe(E,Object.assign(Object.assign({},n.attrs),p.value),N):N}}});function Ze(e,n){let t=e.as||"";return!e.as&&!n.slots.default&&(t="input"),t}function Xn(e){var n,t,i,r;const{validateOnInput:a,validateOnChange:l,validateOnBlur:m,validateOnModelUpdate:s}=De();return{validateOnInput:(n=e.validateOnInput)!==null&&n!==void 0?n:a,validateOnChange:(t=e.validateOnChange)!==null&&t!==void 0?t:l,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:m,validateOnModelUpdate:(r=e.validateOnModelUpdate)!==null&&r!==void 0?r:s}}function Zn(e,n){return fe(n.attrs.type)?qe(e,"modelValue")?e.modelValue:void 0:qe(e,"modelValue")?e.modelValue:n.attrs.value}let Jn=0;function Qn(e){var n;const t=Jn++;let i=!1;const r=J({}),a=J(!1),l=J(0),m=[],s=Te(C(d(e==null?void 0:e.initialValues)||{})),{errorBag:y,setErrorBag:b,setFieldErrorBag:g}=nt(e==null?void 0:e.initialErrors),A=U(()=>z(y.value).reduce((u,o)=>{const V=y.value[o];return V&&V.length&&(u[o]=V[0]),u},{}));function M(u){const o=r.value[u];return Array.isArray(o)?o[0]:o}function B(u){return!!r.value[u]}const w=U(()=>z(r.value).reduce((u,o)=>{const V=M(o);return V&&(u[o]=d(V.label||V.name)||""),u},{})),W=U(()=>z(r.value).reduce((u,o)=>{var V;const O=M(o);return O&&(u[o]=(V=O.bails)!==null&&V!==void 0?V:!0),u},{})),L=Object.assign({},(e==null?void 0:e.initialErrors)||{}),T=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:v,originalInitialValues:c,setInitialValues:F}=et(r,s,e==null?void 0:e.initialValues),p=xn(r,s,c,A),S=e==null?void 0:e.validationSchema,E=We(Le,5),N=We(Le,5),I=Ne(async u=>await u==="silent"?E():N(),(u,[o])=>{const V=j.fieldsByPath.value||{},O=z(j.errorBag.value);return[...new Set([...z(u.results),...z(V),...O])].reduce((R,$)=>{const ee=V[$],ce=(u.results[$]||{errors:[]}).errors,X={errors:ce,valid:!ce.length};if(R.results[$]=X,X.valid||(R.errors[$]=X.errors[0]),!ee)return G($,ce),R;if(K(ee,ve=>ve.meta.valid=X.valid),o==="silent")return R;const gn=Array.isArray(ee)?ee.some(ve=>ve.meta.validated):ee.meta.validated;return o==="validated-only"&&!gn||K(ee,ve=>ve.setState({errors:X.errors})),R},{valid:u.valid,results:{},errors:{}})}),j={formId:t,fieldsByPath:r,values:s,errorBag:y,errors:A,schema:S,submitCount:l,meta:p,isSubmitting:a,fieldArrays:m,keepValuesOnUnmount:T,validateSchema:d(S)?I:void 0,validate:x,register:we,unregister:se,setFieldErrorBag:g,validateField:ae,setFieldValue:q,setValues:te,setErrors:H,setFieldError:G,setFieldTouched:Y,setTouched:re,resetForm:f,handleSubmit:je,stageInitialValue:yn,unsetInitialValue:mn,setFieldInitialValue:$e,useFieldModel:Oe};function P(u){return Array.isArray(u)}function K(u,o){return Array.isArray(u)?u.forEach(o):o(u)}function ie(u){Object.values(r.value).forEach(o=>{o&&K(o,u)})}function G(u,o){g(u,o)}function H(u){b(u)}function q(u,o,{force:V}={force:!1}){var O;const h=r.value[u],R=C(o);if(!h){ue(s,u,R);return}if(P(h)&&((O=h[0])===null||O===void 0?void 0:O.type)==="checkbox"&&!Array.isArray(o)){const ee=C(Be(k(s,u)||[],o,void 0));ue(s,u,ee);return}let $=o;!P(h)&&h.type==="checkbox"&&!V&&!i&&($=C(Be(k(s,u),o,d(h.uncheckedValue)))),ue(s,u,$)}function te(u){z(s).forEach(o=>{delete s[o]}),z(u).forEach(o=>{q(o,u[o])}),m.forEach(o=>o&&o.reset())}function Ve(u){const{value:o}=fn(u);return Z(o,()=>{B(d(u))||x({mode:"validated-only"})},{deep:!0}),o}function Oe(u){return Array.isArray(u)?u.map(Ve):Ve(u)}function Y(u,o){const V=r.value[u];V&&K(V,O=>O.setTouched(o))}function re(u){z(u).forEach(o=>{Y(o,!!u[o])})}function f(u){i=!0,u!=null&&u.values?(F(u.values),te(u==null?void 0:u.values)):(F(c.value),te(c.value)),ie(o=>o.resetField()),u!=null&&u.touched&&re(u.touched),H((u==null?void 0:u.errors)||{}),l.value=(u==null?void 0:u.submitCount)||0,me(()=>{i=!1})}function _(u,o){const V=On(u),O=o;if(!r.value[O]){r.value[O]=V;return}const h=r.value[O];h&&!Array.isArray(h)&&(r.value[O]=[h]),r.value[O]=[...r.value[O],V]}function D(u,o){const V=o,O=r.value[V];if(O){if(!P(O)&&u.id===O.id){delete r.value[V];return}if(P(O)){const h=O.findIndex(R=>R.id===u.id);if(h===-1)return;O.splice(h,1),O.length||delete r.value[V]}}}function we(u){const o=d(u.name);_(u,o),be(u.name)&&Z(u.name,async(O,h)=>{await me(),D(u,h),_(u,O),(A.value[h]||A.value[O])&&(G(h,void 0),ae(O)),await me(),B(h)||Me(s,h)});const V=d(u.errorMessage);V&&(L==null?void 0:L[o])!==V&&ae(o),delete L[o]}function se(u){const o=d(u.name),V=r.value[o],O=!!V&&P(V);D(u,o),me(()=>{var h;const R=(h=d(u.keepValueOnUnmount))!==null&&h!==void 0?h:d(T),$=k(s,o);if(O&&(V===r.value[o]||!r.value[o])&&Array.isArray($)&&!R){const ce=$.findIndex(X=>Q(X,d(u.checkedValue)));if(ce>-1){const X=[...$];X.splice(ce,1),q(o,X,{force:!0})}}if(!B(o)){if(G(o,void 0),R||O&&!an(k(s,o)))return;Me(s,o)}})}async function x(u){if(ie(h=>h.meta.validated=!0),j.validateSchema)return j.validateSchema((u==null?void 0:u.mode)||"force");const o=await Promise.all(Object.values(r.value).map(h=>{const R=Array.isArray(h)?h[0]:h;return R?R.validate(u).then($=>({key:d(R.name),valid:$.valid,errors:$.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),V={},O={};for(const h of o)V[h.key]={valid:h.valid,errors:h.errors},h.errors.length&&(O[h.key]=h.errors[0]);return{valid:o.every(h=>h.valid),results:V,errors:O}}async function ae(u){const o=r.value[u];return o?Array.isArray(o)?o.map(V=>V.validate())[0]:o.validate():(tn(`field with name ${u} was not found`),Promise.resolve({errors:[],valid:!0}))}function je(u,o){return function(O){return O instanceof Event&&(O.preventDefault(),O.stopPropagation()),re(z(r.value).reduce((h,R)=>(h[R]=!0,h),{})),a.value=!0,l.value++,x().then(h=>{if(h.valid&&typeof u=="function")return u(C(s),{evt:O,setErrors:H,setFieldError:G,setTouched:re,setFieldTouched:Y,setValues:te,setFieldValue:q,resetForm:f});!h.valid&&typeof o=="function"&&o({values:C(s),evt:O,errors:h.errors,results:h.results})}).then(h=>(a.value=!1,h),h=>{throw a.value=!1,h})}}function $e(u,o){ue(v.value,u,C(o))}function mn(u){Me(v.value,u)}function yn(u,o,V=!1){ue(s,u,o),$e(u,o),V&&!(e!=null&&e.initialValues)&&ue(c.value,u,C(o))}async function Le(){const u=d(S);return u?he(u)?await zn(u,s):await Dn(u,s,{names:w.value,bailsMap:W.value}):{valid:!0,results:{},errors:{}}}const hn=je((u,{evt:o})=>{ln(o)&&o.target.submit()});return Qe(()=>{if(e!=null&&e.initialErrors&&H(e.initialErrors),e!=null&&e.initialTouched&&re(e.initialTouched),e!=null&&e.validateOnMount){x();return}j.validateSchema&&j.validateSchema("silent")}),be(S)&&Z(S,()=>{var u;(u=j.validateSchema)===null||u===void 0||u.call(j,"validated-only")}),xe(oe,j),{errors:A,meta:p,values:s,isSubmitting:a,submitCount:l,validate:x,validateField:ae,handleReset:()=>f(),resetForm:f,handleSubmit:je,submitForm:hn,setFieldError:G,setErrors:H,setFieldValue:q,setValues:te,setFieldTouched:Y,setTouched:re,useFieldModel:Oe}}function xn(e,n,t,i){const r={touched:"some",pending:"some",valid:"every"},a=U(()=>!Q(n,d(t)));function l(){const s=Object.values(e.value).flat(1).filter(Boolean);return z(r).reduce((y,b)=>{const g=r[b];return y[b]=s[g](A=>A.meta[b]),y},{})}const m=Te(l());return Vn(()=>{const s=l();m.touched=s.touched,m.valid=s.valid,m.pending=s.pending}),U(()=>Object.assign(Object.assign({initialValues:d(t)},m),{valid:m.valid&&!z(i.value).length,dirty:a.value}))}function et(e,n,t){const i=J(C(d(t))||{}),r=J(C(d(t))||{});function a(l,m=!1){i.value=C(l),r.value=C(l),m&&z(e.value).forEach(s=>{const y=e.value[s],b=Array.isArray(y)?y.some(A=>A.meta.touched):y==null?void 0:y.meta.touched;if(!y||b)return;const g=k(i.value,s);ue(n,s,C(g))})}return be(t)&&Z(t,l=>{a(l,!0)},{deep:!0}),{initialValues:i,originalInitialValues:r,setInitialValues:a}}function nt(e){const n=J({});function t(a){return Array.isArray(a)?a:a?[a]:[]}function i(a,l){if(!l){delete n.value[a];return}n.value[a]=t(l)}function r(a){n.value=z(a).reduce((l,m)=>{const s=a[m];return s&&(l[m]=t(s)),l},{})}return e&&r(e),{errorBag:n,setErrorBag:r,setFieldErrorBag:i}}const tt=Fe({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,n){const t=ne(e,"initialValues"),i=ne(e,"validationSchema"),r=ne(e,"keepValues"),{errors:a,values:l,meta:m,isSubmitting:s,submitCount:y,validate:b,validateField:g,handleReset:A,resetForm:M,handleSubmit:B,setErrors:w,setFieldError:W,setFieldValue:L,setValues:T,setFieldTouched:v,setTouched:c}=Qn({validationSchema:i.value?i:void 0,initialValues:t,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:r}),F=B((I,{evt:j})=>{ln(j)&&j.target.submit()},e.onInvalidSubmit),p=e.onSubmit?B(e.onSubmit,e.onInvalidSubmit):F;function S(I){Pe(I)&&I.preventDefault(),A(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function E(I,j){return B(typeof I=="function"&&!j?I:j,e.onInvalidSubmit)(I)}function N(){return{meta:m.value,errors:a.value,values:l,isSubmitting:s.value,submitCount:y.value,validate:b,validateField:g,handleSubmit:E,handleReset:A,submitForm:F,setErrors:w,setFieldError:W,setFieldValue:L,setValues:T,setFieldTouched:v,setTouched:c,resetForm:M}}return n.expose({setFieldError:W,setErrors:w,setFieldValue:L,setValues:T,setFieldTouched:v,setTouched:c,resetForm:M,validate:b,validateField:g}),function(){const j=e.as==="form"?e.as:Re(e.as),P=Ee(j,n,N);if(!e.as)return P;const K=e.as==="form"?{novalidate:!0}:{};return pe(j,Object.assign(Object.assign(Object.assign({},K),n.attrs),{onSubmit:p,onReset:S}),P)}}}),at=tt;function rt(e){const n=ge(oe,void 0),t=J([]),i=()=>{},r={fields:t,remove:i,push:i,swap:i,insert:i,update:i,replace:i,prepend:i,move:i};if(!n)return Ie("FieldArray requires being a child of `<Form/>` or `useForm` being called before it. Array fields may not work correctly"),r;if(!d(e))return Ie("FieldArray requires a field path to be provided, did you forget to pass the `name` prop?"),r;const a=n.fieldArrays.find(v=>d(v.path)===d(e));if(a)return a;let l=0;function m(){const v=k(n==null?void 0:n.values,d(e),[])||[];t.value=v.map(y),s()}m();function s(){const v=t.value.length;for(let c=0;c<v;c++){const F=t.value[c];F.isFirst=c===0,F.isLast=c===v-1}}function y(v){const c=l++;return{key:c,value:U({get(){const p=k(n==null?void 0:n.values,d(e),[])||[],S=t.value.findIndex(E=>E.key===c);return S===-1?v:p[S]},set(p){const S=t.value.findIndex(E=>E.key===c);if(S===-1){Ie("Attempting to update a non-existent array item");return}w(S,p)}}),isFirst:!1,isLast:!1}}function b(v){const c=d(e),F=k(n==null?void 0:n.values,c);if(!F||!Array.isArray(F))return;const p=[...F];p.splice(v,1),n==null||n.unsetInitialValue(c+`[${v}]`),n==null||n.setFieldValue(c,p),t.value.splice(v,1),s()}function g(v){const c=d(e),F=k(n==null?void 0:n.values,c),p=ye(F)?[]:F;if(!Array.isArray(p))return;const S=[...p];S.push(v),n==null||n.stageInitialValue(c+`[${S.length-1}]`,v),n==null||n.setFieldValue(c,S),t.value.push(y(v)),s()}function A(v,c){const F=d(e),p=k(n==null?void 0:n.values,F);if(!Array.isArray(p)||!(v in p)||!(c in p))return;const S=[...p],E=[...t.value],N=S[v];S[v]=S[c],S[c]=N;const I=E[v];E[v]=E[c],E[c]=I,n==null||n.setFieldValue(F,S),t.value=E,s()}function M(v,c){const F=d(e),p=k(n==null?void 0:n.values,F);if(!Array.isArray(p)||p.length<v)return;const S=[...p],E=[...t.value];S.splice(v,0,c),E.splice(v,0,y(c)),n==null||n.setFieldValue(F,S),t.value=E,s()}function B(v){const c=d(e);n==null||n.setFieldValue(c,v),m()}function w(v,c){const F=d(e),p=k(n==null?void 0:n.values,F);!Array.isArray(p)||p.length-1<v||n==null||n.setFieldValue(`${F}[${v}]`,c)}function W(v){const c=d(e),F=k(n==null?void 0:n.values,c),p=ye(F)?[]:F;if(!Array.isArray(p))return;const S=[v,...p];n==null||n.stageInitialValue(c+`[${S.length-1}]`,v),n==null||n.setFieldValue(c,S),t.value.unshift(y(v)),s()}function L(v,c){const F=d(e),p=k(n==null?void 0:n.values,F),S=ye(p)?[]:[...p];if(!Array.isArray(p)||!(v in p)||!(c in p))return;const E=[...t.value],N=E[v];E.splice(v,1),E.splice(c,0,N);const I=S[v];S.splice(v,1),S.splice(c,0,I),n==null||n.setFieldValue(F,S),t.value=E,s()}const T={fields:t,remove:b,push:g,swap:A,insert:M,update:w,replace:B,prepend:W,move:L};return n.fieldArrays.push(Object.assign({path:e,reset:m},T)),en(()=>{const v=n.fieldArrays.findIndex(c=>d(c.path)===d(e));v>=0&&n.fieldArrays.splice(v,1)}),T}Fe({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,n){const{push:t,remove:i,swap:r,insert:a,replace:l,update:m,prepend:s,move:y,fields:b}=rt(ne(e,"name"));function g(){return{fields:b.value,push:t,remove:i,swap:r,insert:a,update:m,replace:l,prepend:s,move:y}}return n.expose({push:t,remove:i,swap:r,insert:a,update:m,replace:l,prepend:s,move:y}),()=>Ee(void 0,n,g)}});Fe({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,n){const t=Je(oe,void 0),i=U(()=>t==null?void 0:t.errors.value[e.name]);function r(){return{message:i.value}}return()=>{if(!i.value)return;const a=e.as?Re(e.as):e.as,l=Ee(a,n,r),m=Object.assign({role:"alert"},n.attrs);return!a&&(Array.isArray(l)||!l)&&(l!=null&&l.length)?l:(Array.isArray(l)||!l)&&!(l!=null&&l.length)?pe(a||"span",m,i.value):pe(a,m,l)}}});export{at as F};
