import{_ as D}from"./login-bg-9971d11d.js";import{u as U,L as N}from"./auth-a512a8e3.js";import{F as S}from"./vee-validate.esm-8648b669.js";import{P as q,a3 as p,o as $,x as T,w as a,b as e,d as o,z as n,aU as u,a2 as d,V as b,C as x,_ as F,Z as H,c as C,$ as I,av as _,al as O,aS as B,am as j,aq as E,a as m,aw as P,ak as K,L,s as z,ae as y,ao as W,ap as A,aj as Z}from"./index-dcd728bc.js";import{V as G,a as R}from"./VWindowItem-1543f0aa.js";import"./customizer-6d690239.js";const J=o("Sign up"),M=q({setup(t){const l=U(),i=p(""),r=p(""),f=p([s=>!!s||"Password is required",s=>s&&s.length<=10||"Password must be less than 10 characters"]),w=p([s=>!!s||"E-mail is required",s=>/.+@.+\..+/.test(s)||"E-mail must be valid"]),V=p(""),g=p([s=>!!s||"Name is required",s=>s&&s.length<=10||"Name must be less than 10 characters"]);function v(s,{setErrors:c}){return l.signUp(V.value,r.value,i.value)}return(s,c)=>($(),T(x(S),{onSubmit:v,class:"mt-5"},{default:a(({errors:be,isSubmitting:k})=>[e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(s.$t("createAccount.userName")),1)]),_:1}),e(d,{modelValue:V.value,"onUpdate:modelValue":c[0]||(c[0]=h=>V.value=h),rules:g.value,required:""},null,8,["modelValue","rules"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(s.$t("createAccount.email")),1)]),_:1}),e(d,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=h=>r.value=h),rules:w.value,required:""},null,8,["modelValue","rules"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(s.$t("createAccount.password")),1)]),_:1}),e(d,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=h=>i.value=h),counter:10,rules:f.value,required:"",variant:"outlined",type:"password",color:"primary"},null,8,["modelValue","rules"]),e(b,{size:"large",class:"mt-2",color:"primary",block:"",rounded:"pill",loading:k,type:"submit"},{default:a(()=>[J]),_:2},1032,["loading"])]),_:1}))}}),Q="/assets/help-7149e418.png",X={name:"AdminRegisterForm",components:{Form:S},data:()=>({accountInfo:{username:"",email:"",password:""},accountInfoRules:{username:[t=>!!t||"Name is required",t=>t&&t.length<=10||"Name must be less than 10 characters"],email:[t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],password:[t=>!!t||"Password is required",t=>t&&t.length<=10||"Password must be less than 10 characters"]},tenantInfo:{id:"",apiUrl:"",apiKey:""},isHelpDialogOpen:!1}),methods:{async processAdminSignup(){await this.saveAccountInfo(),await this.saveTenantInfo(),window.location.href=`http://${this.tenantInfo.id}.processgpt.io`},async saveAccountInfo(){await this.authStore.signUp(this.accountInfo.username,this.accountInfo.email,this.accountInfo.password)},async saveTenantInfo(){await this.storage.putObject("tenant_def",{id:this.tenantInfo.id,url:this.tenantInfo.apiUrl,secret:this.tenantInfo.apiKey})}},created(){this.authStore=U(),this.storage=H.getStorage()}},Y=o("mdi-help-circle"),ee=o(n("URL")),te=o(n("Secret")),ae=o("Sign up"),se=o(n("Supabase Connection Info Help")),le=o("mdi-close"),oe=m("img",{src:Q,class:"w-100"},null,-1),ne=o(" OK ");function ue(t,l,i,r,f,w){const V=z("Form");return $(),C(L,null,[e(V,{onSubmit:w.processAdminSignup,class:"mt-5"},{default:a(({errors:g,isSubmitting:v})=>[e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAdminAccount.createAccountHeader")),1)]),_:1}),e(I,{class:"mb-4"}),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAccount.userName")),1)]),_:1}),e(d,{modelValue:t.accountInfo.username,"onUpdate:modelValue":l[0]||(l[0]=s=>t.accountInfo.username=s),rules:t.accountInfoRules.username,required:""},null,8,["modelValue","rules"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAccount.email")),1)]),_:1}),e(d,{modelValue:t.accountInfo.email,"onUpdate:modelValue":l[1]||(l[1]=s=>t.accountInfo.email=s),rules:t.accountInfoRules.email,required:""},null,8,["modelValue","rules"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAccount.password")),1)]),_:1}),e(d,{modelValue:t.accountInfo.password,"onUpdate:modelValue":l[2]||(l[2]=s=>t.accountInfo.password=s),counter:10,rules:t.accountInfoRules.password,required:"",variant:"outlined",type:"password",color:"primary"},null,8,["modelValue","rules"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAdminAccount.createTenantHeader")),1)]),_:1}),e(I,{class:"mb-4"}),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAdminAccount.tenantID")),1)]),_:1}),e(d,{modelValue:t.tenantInfo.id,"onUpdate:modelValue":l[3]||(l[3]=s=>t.tenantInfo.id=s),required:""},null,8,["modelValue"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[o(n(t.$t("createAdminAccount.supabaseConnectionInfo"))+" ",1),e(b,{icon:"",onClick:l[4]||(l[4]=s=>t.isHelpDialogOpen=!0)},{default:a(()=>[e(_,null,{default:a(()=>[Y]),_:1})]),_:1})]),_:1}),e(I,{class:"mb-4"}),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[ee]),_:1}),e(d,{modelValue:t.tenantInfo.apiUrl,"onUpdate:modelValue":l[5]||(l[5]=s=>t.tenantInfo.apiUrl=s),required:""},null,8,["modelValue"]),e(u,{class:"text-subtitle-1 font-weight-medium pb-2"},{default:a(()=>[te]),_:1}),e(d,{modelValue:t.tenantInfo.apiKey,"onUpdate:modelValue":l[6]||(l[6]=s=>t.tenantInfo.apiKey=s),required:""},null,8,["modelValue"]),e(b,{size:"large",class:"mt-2",color:"primary",block:"",rounded:"pill",loading:v,type:"submit"},{default:a(()=>[ae]),_:2},1032,["loading"])]),_:1},8,["onSubmit"]),e(K,{modelValue:t.isHelpDialogOpen,"onUpdate:modelValue":l[9]||(l[9]=g=>t.isHelpDialogOpen=g),"max-width":"500"},{default:a(()=>[e(O,null,{default:a(()=>[e(B,null,{default:a(()=>[e(j,null,{default:a(()=>[se]),_:1}),e(b,{icon:"",style:{position:"absolute",right:"5px",top:"5px"},onClick:l[7]||(l[7]=g=>t.isHelpDialogOpen=!1)},{default:a(()=>[e(_,null,{default:a(()=>[le]),_:1})]),_:1})]),_:1}),e(E,null,{default:a(()=>[oe,m("p",null,n("생성된 Supabase 프로젝트 > 좌측 Project Setting 버튼 > Configuration에서 각의 항목을 확인할 수 있습니다."),1)]),_:1}),e(P,{style:{"justify-content":"right"}},{default:a(()=>[e(b,{ref:"saveButton",onClick:l[8]||(l[8]=g=>t.isHelpDialogOpen=!1),class:"w-100"},{default:a(()=>[ne]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const ie=F(X,[["render",ue]]),re={class:"pa-3"},de={class:"auth-header pt-lg-6 pt-2 px-sm-6 px-3 pb-lg-6 pb-0"},me={class:"position-relative"},ce=m("div",{class:""},[m("img",{src:D,height:"450",class:"position-relative d-none d-lg-flex",alt:"login-background"})],-1),pe={class:"mt-xl-0 mt-5 mw-100"},fe={class:"text-h3 font-weight-semibold mb-4"},ge={class:"text-subtitle-1 text-grey100 d-flex align-center mt-6"},_e=q({setup(t){const l=p("normalRegister");return(i,r)=>($(),C("div",re,[e(Z,{class:"h-100vh mh-100 auth"},{default:a(()=>[e(y,{cols:"12",lg:"7",xl:"8",class:"d-lg-flex align-center justify-center authentication position-relative"},{default:a(()=>[m("div",de,[m("div",me,[e(N)])]),ce]),_:1}),e(y,{cols:"12",lg:"5",xl:"4",class:"d-flex align-center justify-center bg-surface"},{default:a(()=>[m("div",pe,[m("h2",fe,n(i.$t("createAccount.title")),1),e(W,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=f=>l.value=f),style:{position:"fixed","z-index":"999"},class:"text-black","fixed-tabs":""},{default:a(()=>[e(A,{value:"normalRegister"},{default:a(()=>[o(n(i.$t("createAccount.normalRegister")),1)]),_:1}),e(A,{value:"adminRegister"},{default:a(()=>[o(n(i.$t("createAccount.adminRegister")),1)]),_:1})]),_:1},8,["modelValue"]),e(G,{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=f=>l.value=f)},{default:a(()=>[e(R,{value:"normalRegister",class:"mt-15"},{default:a(()=>[e(M,{key:"normalRegister"})]),_:1}),e(R,{value:"adminRegister",class:"mt-15",style:{"overflow-y":"auto","overflow-x":"hidden",height:"65vh"}},{default:a(()=>[e(ie,{key:"adminRegister"})]),_:1})]),_:1},8,["modelValue"]),m("h6",ge,[o(n(i.$t("createAccount.already"))+" ",1),e(b,{variant:"plain",to:"/auth/login",class:"text-primary text-body-1 opacity-1 pl-2"},{default:a(()=>[o(n(i.$t("createAccount.login")),1)]),_:1})])])]),_:1})]),_:1})]))}});export{_e as default};
