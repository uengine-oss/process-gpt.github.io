import{aM as Y,aN as rn,aO as qr,I as Ce,_ as Me,Z as $r,o as tt,c as mt,b as j,w as V,al as Rt,am as Wr,d as dt,z as ut,V as ct,av as Bt,aq as Ae,ae as nn,aP as Gr,x as ht,a2 as Ke,F as It,aw as _e,aF as Yr,ak as Le,K as on,s as wt,aj as He,a8 as sn,a as lt,aA as an,aB as un,aQ as Vt,aD as cn,S as Et,J as Dt,A as ln}from"./index-dcd728bc.js";import{d as pn}from"./index-9159cc7e.js";import{P as zr}from"./ProcessDefinition-e2ef86e1.js";import{V as fn}from"./VSlider-7fa47759.js";import{c as hn,_ as dn}from"./index-82a3ef9a.js";import"./ChatDetail.vue_vue_type_style_index_0_lang-18b9bb84.js";import{_ as mn,a as yn}from"./ChatProfile-d853de6b.js";import{_ as gn}from"./AppBaseCard.vue_vue_type_style_index_0_lang-86309e8f.js";import{C as wn}from"./Chat-1fd8903b.js";import"./hooks.module-fbc9fa96.js";import"./ProcessExecuteDialog-0c343f72.js";import"./VDataTable-2936e7e3.js";import"./VSheet-42154d36.js";import"./VAlert-d5b63406.js";/* empty css                                                    */import"./index-18289fd3.js";import"./chat-icon-7da84487.js";var xt={},jt={},Je;function Oe(){return Je||(Je=1,(function(){jt.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Y)),jt}var qt={},bt={},Nt={},Qe;function vt(){return Qe||(Qe=1,(function(){var t,o,y,l,g,e,r,i=[].slice,p={}.hasOwnProperty;t=function(){var M,T,b,N,I,D;if(D=arguments[0],I=2<=arguments.length?i.call(arguments,1):[],g(Object.assign))Object.assign.apply(null,arguments);else for(M=0,b=I.length;M<b;M++)if(N=I[M],N!=null)for(T in N)p.call(N,T)&&(D[T]=N[T]);return D},g=function(M){return!!M&&Object.prototype.toString.call(M)==="[object Function]"},e=function(M){var T;return!!M&&((T=typeof M)=="function"||T==="object")},y=function(M){return g(Array.isArray)?Array.isArray(M):Object.prototype.toString.call(M)==="[object Array]"},l=function(M){var T;if(y(M))return!M.length;for(T in M)if(p.call(M,T))return!1;return!0},r=function(M){var T,b;return e(M)&&(b=Object.getPrototypeOf(M))&&(T=b.constructor)&&typeof T=="function"&&T instanceof T&&Function.prototype.toString.call(T)===Function.prototype.toString.call(Object)},o=function(M){return g(M.valueOf)?M.valueOf():M},Nt.assign=t,Nt.isFunction=g,Nt.isObject=e,Nt.isArray=y,Nt.isEmpty=l,Nt.isPlainObject=r,Nt.getValue=o}).call(Y)),Nt}var $t={exports:{}},Ze;function Kr(){return Ze||(Ze=1,(function(){$t.exports=function(){function t(){}return t.prototype.hasFeature=function(o,y){return!0},t.prototype.createDocumentType=function(o,y,l){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(o,y,l){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(o){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(o,y){throw new Error("This DOM method is not implemented.")},t}()}).call(Y)),$t.exports}var Wt={exports:{}},Gt={exports:{}},Yt={exports:{}},tr;function En(){return tr||(tr=1,(function(){Yt.exports=function(){function t(){}return t.prototype.handleError=function(o){throw new Error(o)},t}()}).call(Y)),Yt.exports}var zt={exports:{}},er;function Dn(){return er||(er=1,(function(){zt.exports=function(){function t(o){this.arr=o||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(o){return this.arr[o]||null},t.prototype.contains=function(o){return this.arr.indexOf(o)!==-1},t}()}).call(Y)),zt.exports}var rr;function bn(){return rr||(rr=1,(function(){var t,o;t=En(),o=Dn(),Gt.exports=function(){function y(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(y.prototype,"parameterNames",{get:function(){return new o(Object.keys(this.defaultParams))}}),y.prototype.getParameter=function(l){return this.params.hasOwnProperty(l)?this.params[l]:null},y.prototype.canSetParameter=function(l,g){return!0},y.prototype.setParameter=function(l,g){return g!=null?this.params[l]=g:delete this.params[l]},y}()}).call(Y)),Gt.exports}var Kt={exports:{}},Ht={exports:{}},Jt={exports:{}},nr;function st(){return nr||(nr=1,(function(){Jt.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Y)),Jt.exports}var Qt={exports:{}},ir;function Hr(){return ir||(ir=1,(function(){var t;t=st(),yt(),Qt.exports=function(){function o(y,l,g){if(this.parent=y,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),l==null)throw new Error("Missing attribute name. "+this.debugInfo(l));this.name=this.stringify.name(l),this.value=this.stringify.attValue(g),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(o.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(o.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(y){return this.value=y||""}}),Object.defineProperty(o.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(o.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(o.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(o.prototype,"specified",{get:function(){return!0}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(y){return this.options.writer.attribute(this,this.options.writer.filterOptions(y))},o.prototype.debugInfo=function(y){return y=y||this.name,y==null?"parent: <"+this.parent.name+">":"attribute: {"+y+"}, parent: <"+this.parent.name+">"},o.prototype.isEqualNode=function(y){return!(y.namespaceURI!==this.namespaceURI||y.prefix!==this.prefix||y.localName!==this.localName||y.value!==this.value)},o}()}).call(Y)),Qt.exports}var Zt={exports:{}},or;function Pe(){return or||(or=1,(function(){Zt.exports=function(){function t(o){this.nodes=o}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(o){return this.nodes[o]},t.prototype.setNamedItem=function(o){var y;return y=this.nodes[o.nodeName],this.nodes[o.nodeName]=o,y||null},t.prototype.removeNamedItem=function(o){var y;return y=this.nodes[o],delete this.nodes[o],y||null},t.prototype.item=function(o){return this.nodes[Object.keys(this.nodes)[o]]||null},t.prototype.getNamedItemNS=function(o,y){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(o){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(o,y){throw new Error("This DOM method is not implemented.")},t}()}).call(Y)),Zt.exports}var sr;function Se(){return sr||(sr=1,(function(){var t,o,y,l,g,e,r,i,p=function(T,b){for(var N in b)M.call(b,N)&&(T[N]=b[N]);function I(){this.constructor=T}return I.prototype=b.prototype,T.prototype=new I,T.__super__=b.prototype,T},M={}.hasOwnProperty;i=vt(),r=i.isObject,e=i.isFunction,g=i.getValue,l=yt(),t=st(),o=Hr(),y=Pe(),Ht.exports=function(T){p(b,T);function b(N,I,D){var _,S,x,v;if(b.__super__.constructor.call(this,N),I==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(I),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,D!=null&&this.attribute(D),N.type===t.Document&&(this.isRoot=!0,this.documentObject=N,N.rootObject=this,N.children)){for(v=N.children,S=0,x=v.length;S<x;S++)if(_=v[S],_.type===t.DocType){_.name=this.name;break}}}return Object.defineProperty(b.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(b.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(b.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new y(this.attribs)),this.attributeMap}}),b.prototype.clone=function(){var N,I,D,_;D=Object.create(this),D.isRoot&&(D.documentObject=null),D.attribs={},_=this.attribs;for(I in _)M.call(_,I)&&(N=_[I],D.attribs[I]=N.clone());return D.children=[],this.children.forEach(function(S){var x;return x=S.clone(),x.parent=D,D.children.push(x)}),D},b.prototype.attribute=function(N,I){var D,_;if(N!=null&&(N=g(N)),r(N))for(D in N)M.call(N,D)&&(_=N[D],this.attribute(D,_));else e(I)&&(I=I.apply()),this.options.keepNullAttributes&&I==null?this.attribs[N]=new o(this,N,""):I!=null&&(this.attribs[N]=new o(this,N,I));return this},b.prototype.removeAttribute=function(N){var I,D,_;if(N==null)throw new Error("Missing attribute name. "+this.debugInfo());if(N=g(N),Array.isArray(N))for(D=0,_=N.length;D<_;D++)I=N[D],delete this.attribs[I];else delete this.attribs[N];return this},b.prototype.toString=function(N){return this.options.writer.element(this,this.options.writer.filterOptions(N))},b.prototype.att=function(N,I){return this.attribute(N,I)},b.prototype.a=function(N,I){return this.attribute(N,I)},b.prototype.getAttribute=function(N){return this.attribs.hasOwnProperty(N)?this.attribs[N].value:null},b.prototype.setAttribute=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNode=function(N){return this.attribs.hasOwnProperty(N)?this.attribs[N]:null},b.prototype.setAttributeNode=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNode=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNS=function(N,I,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNodeNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNodeNS=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.hasAttribute=function(N){return this.attribs.hasOwnProperty(N)},b.prototype.hasAttributeNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttribute=function(N,I){return this.attribs.hasOwnProperty(N)?this.attribs[N].isId:I},b.prototype.setIdAttributeNS=function(N,I,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttributeNode=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByClassName=function(N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isEqualNode=function(N){var I,D,_;if(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(N)||N.namespaceURI!==this.namespaceURI||N.prefix!==this.prefix||N.localName!==this.localName||N.attribs.length!==this.attribs.length)return!1;for(I=D=0,_=this.attribs.length-1;0<=_?D<=_:D>=_;I=0<=_?++D:--D)if(!this.attribs[I].isEqualNode(N.attribs[I]))return!1;return!0},b}(l)}).call(Y)),Ht.exports}var te={exports:{}},ee={exports:{}},ar;function Xt(){return ar||(ar=1,(function(){var t,o=function(l,g){for(var e in g)y.call(g,e)&&(l[e]=g[e]);function r(){this.constructor=l}return r.prototype=g.prototype,l.prototype=new r,l.__super__=g.prototype,l},y={}.hasOwnProperty;t=yt(),ee.exports=function(l){o(g,l);function g(e){g.__super__.constructor.call(this,e),this.value=""}return Object.defineProperty(g.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(g.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(g.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),g.prototype.clone=function(){return Object.create(this)},g.prototype.substringData=function(e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.insertData=function(e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.deleteData=function(e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.replaceData=function(e,r,i){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(e){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)||e.data!==this.data)},g}(t)}).call(Y)),ee.exports}var ur;function Fe(){return ur||(ur=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;t=st(),o=Xt(),te.exports=function(g){y(e,g);function e(r,i){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(i)}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.cdata(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),te.exports}var re={exports:{}},cr;function Be(){return cr||(cr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;t=st(),o=Xt(),re.exports=function(g){y(e,g);function e(r,i){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(i)}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.comment(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),re.exports}var ne={exports:{}},lr;function Re(){return lr||(lr=1,(function(){var t,o,y,l=function(e,r){for(var i in r)g.call(r,i)&&(e[i]=r[i]);function p(){this.constructor=e}return p.prototype=r.prototype,e.prototype=new p,e.__super__=r.prototype,e},g={}.hasOwnProperty;y=vt().isObject,o=yt(),t=st(),ne.exports=function(e){l(r,e);function r(i,p,M,T){var b;r.__super__.constructor.call(this,i),y(p)&&(b=p,p=b.version,M=b.encoding,T=b.standalone),p||(p="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(p),M!=null&&(this.encoding=this.stringify.xmlEncoding(M)),T!=null&&(this.standalone=this.stringify.xmlStandalone(T))}return r.prototype.toString=function(i){return this.options.writer.declaration(this,this.options.writer.filterOptions(i))},r}(o)}).call(Y)),ne.exports}var ie={exports:{}},oe={exports:{}},pr;function Xe(){return pr||(pr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;o=yt(),t=st(),oe.exports=function(g){y(e,g);function e(r,i,p,M,T,b){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(p==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!M)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!T)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(T.indexOf("#")!==0&&(T="#"+T),!T.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(b&&!T.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(p),this.attributeType=this.stringify.dtdAttType(M),b&&(this.defaultValue=this.stringify.dtdAttDefault(b)),this.defaultValueType=T}return e.prototype.toString=function(r){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),oe.exports}var se={exports:{}},fr;function ke(){return fr||(fr=1,(function(){var t,o,y,l=function(e,r){for(var i in r)g.call(r,i)&&(e[i]=r[i]);function p(){this.constructor=e}return p.prototype=r.prototype,e.prototype=new p,e.__super__=r.prototype,e},g={}.hasOwnProperty;y=vt().isObject,o=yt(),t=st(),se.exports=function(e){l(r,e);function r(i,p,M,T){if(r.__super__.constructor.call(this,i),M==null)throw new Error("Missing DTD entity name. "+this.debugInfo(M));if(T==null)throw new Error("Missing DTD entity value. "+this.debugInfo(M));if(this.pe=!!p,this.name=this.stringify.name(M),this.type=t.EntityDeclaration,!y(T))this.value=this.stringify.dtdEntityValue(T),this.internal=!0;else{if(!T.pubID&&!T.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(M));if(T.pubID&&!T.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(M));if(this.internal=!1,T.pubID!=null&&(this.pubID=this.stringify.dtdPubID(T.pubID)),T.sysID!=null&&(this.sysID=this.stringify.dtdSysID(T.sysID)),T.nData!=null&&(this.nData=this.stringify.dtdNData(T.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(M))}}return Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(i){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(i))},r}(o)}).call(Y)),se.exports}var ae={exports:{}},hr;function Ue(){return hr||(hr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;o=yt(),t=st(),ae.exports=function(g){y(e,g);function e(r,i,p){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing DTD element name. "+this.debugInfo());p||(p="(#PCDATA)"),Array.isArray(p)&&(p="("+p.join(",")+")"),this.name=this.stringify.name(i),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(p)}return e.prototype.toString=function(r){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),ae.exports}var ue={exports:{}},dr;function Ve(){return dr||(dr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;o=yt(),t=st(),ue.exports=function(g){y(e,g);function e(r,i,p){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!p.pubID&&!p.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=t.NotationDeclaration,p.pubID!=null&&(this.pubID=this.stringify.dtdPubID(p.pubID)),p.sysID!=null&&(this.sysID=this.stringify.dtdSysID(p.sysID))}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e.prototype.toString=function(r){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),ue.exports}var mr;function je(){return mr||(mr=1,(function(){var t,o,y,l,g,e,r,i,p=function(T,b){for(var N in b)M.call(b,N)&&(T[N]=b[N]);function I(){this.constructor=T}return I.prototype=b.prototype,T.prototype=new I,T.__super__=b.prototype,T},M={}.hasOwnProperty;i=vt().isObject,r=yt(),t=st(),o=Xe(),l=ke(),y=Ue(),g=Ve(),e=Pe(),ie.exports=function(T){p(b,T);function b(N,I,D){var _,S,x,v,u,f;if(b.__super__.constructor.call(this,N),this.type=t.DocType,N.children){for(v=N.children,S=0,x=v.length;S<x;S++)if(_=v[S],_.type===t.Element){this.name=_.name;break}}this.documentObject=N,i(I)&&(u=I,I=u.pubID,D=u.sysID),D==null&&(f=[I,D],D=f[0],I=f[1]),I!=null&&(this.pubID=this.stringify.dtdPubID(I)),D!=null&&(this.sysID=this.stringify.dtdSysID(D))}return Object.defineProperty(b.prototype,"entities",{get:function(){var N,I,D,_,S;for(_={},S=this.children,I=0,D=S.length;I<D;I++)N=S[I],N.type===t.EntityDeclaration&&!N.pe&&(_[N.name]=N);return new e(_)}}),Object.defineProperty(b.prototype,"notations",{get:function(){var N,I,D,_,S;for(_={},S=this.children,I=0,D=S.length;I<D;I++)N=S[I],N.type===t.NotationDeclaration&&(_[N.name]=N);return new e(_)}}),Object.defineProperty(b.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(b.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(b.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),b.prototype.element=function(N,I){var D;return D=new y(this,N,I),this.children.push(D),this},b.prototype.attList=function(N,I,D,_,S){var x;return x=new o(this,N,I,D,_,S),this.children.push(x),this},b.prototype.entity=function(N,I){var D;return D=new l(this,!1,N,I),this.children.push(D),this},b.prototype.pEntity=function(N,I){var D;return D=new l(this,!0,N,I),this.children.push(D),this},b.prototype.notation=function(N,I){var D;return D=new g(this,N,I),this.children.push(D),this},b.prototype.toString=function(N){return this.options.writer.docType(this,this.options.writer.filterOptions(N))},b.prototype.ele=function(N,I){return this.element(N,I)},b.prototype.att=function(N,I,D,_,S){return this.attList(N,I,D,_,S)},b.prototype.ent=function(N,I){return this.entity(N,I)},b.prototype.pent=function(N,I){return this.pEntity(N,I)},b.prototype.not=function(N,I){return this.notation(N,I)},b.prototype.up=function(){return this.root()||this.documentObject},b.prototype.isEqualNode=function(N){return!(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(N)||N.name!==this.name||N.publicId!==this.publicId||N.systemId!==this.systemId)},b}(r)}).call(Y)),ie.exports}var ce={exports:{}},yr;function qe(){return yr||(yr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;t=st(),o=yt(),ce.exports=function(g){y(e,g);function e(r,i){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(i)}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.raw(this,this.options.writer.filterOptions(r))},e}(o)}).call(Y)),ce.exports}var le={exports:{}},gr;function $e(){return gr||(gr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;t=st(),o=Xt(),le.exports=function(g){y(e,g);function e(r,i){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(i)}return Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var r,i,p;for(p="",i=this.previousSibling;i;)p=i.data+p,i=i.previousSibling;for(p+=this.data,r=this.nextSibling;r;)p=p+r.data,r=r.nextSibling;return p}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.text(this,this.options.writer.filterOptions(r))},e.prototype.splitText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceWholeText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e}(o)}).call(Y)),le.exports}var pe={exports:{}},wr;function We(){return wr||(wr=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;t=st(),o=Xt(),pe.exports=function(g){y(e,g);function e(r,i,p){if(e.__super__.constructor.call(this,r),i==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,p&&(this.value=this.stringify.insValue(p))}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(r))},e.prototype.isEqualNode=function(r){return!(!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(r)||r.target!==this.target)},e}(o)}).call(Y)),pe.exports}var fe={exports:{}},Er;function Jr(){return Er||(Er=1,(function(){var t,o,y=function(g,e){for(var r in e)l.call(e,r)&&(g[r]=e[r]);function i(){this.constructor=g}return i.prototype=e.prototype,g.prototype=new i,g.__super__=e.prototype,g},l={}.hasOwnProperty;o=yt(),t=st(),fe.exports=function(g){y(e,g);function e(r){e.__super__.constructor.call(this,r),this.type=t.Dummy}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return""},e}(o)}).call(Y)),fe.exports}var he={exports:{}},Dr;function Nn(){return Dr||(Dr=1,(function(){he.exports=function(){function t(o){this.nodes=o}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(o){return this.nodes[o]||null},t}()}).call(Y)),he.exports}var de={exports:{}},br;function vn(){return br||(br=1,(function(){de.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Y)),de.exports}var Nr;function yt(){return Nr||(Nr=1,(function(){var t,o,y,l,g,e,r,i,p,M,T,b,N,I,D,_,S,x={}.hasOwnProperty;S=vt(),_=S.isObject,D=S.isFunction,I=S.isEmpty,N=S.getValue,i=null,y=null,l=null,g=null,e=null,T=null,b=null,M=null,r=null,o=null,p=null,t=null,Kt.exports=function(){function v(u){this.parent=u,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,i||(i=Se(),y=Fe(),l=Be(),g=Re(),e=je(),T=qe(),b=$e(),M=We(),r=Jr(),o=st(),p=Nn(),Pe(),t=vn())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new p(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var u,f,m,A,F;if(this.nodeType===o.Element||this.nodeType===o.DocumentFragment){for(F="",A=this.children,f=0,m=A.length;f<m;f++)u=A[f],u.textContent&&(F+=u.textContent);return F}else return null},set:function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(u){var f,m,A,F,w;for(this.parent=u,u&&(this.options=u.options,this.stringify=u.stringify),F=this.children,w=[],m=0,A=F.length;m<A;m++)f=F[m],w.push(f.setParent(this));return w},v.prototype.element=function(u,f,m){var A,F,w,a,C,P,B,U,q,z,G;if(P=null,f===null&&m==null&&(q=[{},null],f=q[0],m=q[1]),f==null&&(f={}),f=N(f),_(f)||(z=[f,m],m=z[0],f=z[1]),u!=null&&(u=N(u)),Array.isArray(u))for(w=0,B=u.length;w<B;w++)F=u[w],P=this.element(F);else if(D(u))P=this.element(u.apply());else if(_(u)){for(C in u)if(x.call(u,C))if(G=u[C],D(G)&&(G=G.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&C.indexOf(this.stringify.convertAttKey)===0)P=this.attribute(C.substr(this.stringify.convertAttKey.length),G);else if(!this.options.separateArrayItems&&Array.isArray(G)&&I(G))P=this.dummy();else if(_(G)&&I(G))P=this.element(C);else if(!this.options.keepNullNodes&&G==null)P=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(G))for(a=0,U=G.length;a<U;a++)F=G[a],A={},A[C]=F,P=this.element(A);else _(G)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&C.indexOf(this.stringify.convertTextKey)===0?P=this.element(G):(P=this.element(C),P.element(G)):P=this.element(C,G)}else!this.options.keepNullNodes&&m===null?P=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&u.indexOf(this.stringify.convertTextKey)===0?P=this.text(m):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&u.indexOf(this.stringify.convertCDataKey)===0?P=this.cdata(m):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&u.indexOf(this.stringify.convertCommentKey)===0?P=this.comment(m):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&u.indexOf(this.stringify.convertRawKey)===0?P=this.raw(m):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&u.indexOf(this.stringify.convertPIKey)===0?P=this.instruction(u.substr(this.stringify.convertPIKey.length),m):P=this.node(u,f,m);if(P==null)throw new Error("Could not create any elements with: "+u+". "+this.debugInfo());return P},v.prototype.insertBefore=function(u,f,m){var A,F,w,a,C;if(u!=null&&u.type)return w=u,a=f,w.setParent(this),a?(F=children.indexOf(a),C=children.splice(F),children.push(w),Array.prototype.push.apply(children,C)):children.push(w),w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return F=this.parent.children.indexOf(this),C=this.parent.children.splice(F),A=this.parent.element(u,f,m),Array.prototype.push.apply(this.parent.children,C),A},v.prototype.insertAfter=function(u,f,m){var A,F,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return F=this.parent.children.indexOf(this),w=this.parent.children.splice(F+1),A=this.parent.element(u,f,m),Array.prototype.push.apply(this.parent.children,w),A},v.prototype.remove=function(){var u;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return u=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[u,u-u+1].concat([])),this.parent},v.prototype.node=function(u,f,m){var A,F;return u!=null&&(u=N(u)),f||(f={}),f=N(f),_(f)||(F=[f,m],m=F[0],f=F[1]),A=new i(this,u,f),m!=null&&A.text(m),this.children.push(A),A},v.prototype.text=function(u){var f;return _(u)&&this.element(u),f=new b(this,u),this.children.push(f),this},v.prototype.cdata=function(u){var f;return f=new y(this,u),this.children.push(f),this},v.prototype.comment=function(u){var f;return f=new l(this,u),this.children.push(f),this},v.prototype.commentBefore=function(u){var f,m;return f=this.parent.children.indexOf(this),m=this.parent.children.splice(f),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,m),this},v.prototype.commentAfter=function(u){var f,m;return f=this.parent.children.indexOf(this),m=this.parent.children.splice(f+1),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,m),this},v.prototype.raw=function(u){var f;return f=new T(this,u),this.children.push(f),this},v.prototype.dummy=function(){var u;return u=new r(this),u},v.prototype.instruction=function(u,f){var m,A,F,w,a;if(u!=null&&(u=N(u)),f!=null&&(f=N(f)),Array.isArray(u))for(w=0,a=u.length;w<a;w++)m=u[w],this.instruction(m);else if(_(u))for(m in u)x.call(u,m)&&(A=u[m],this.instruction(m,A));else D(f)&&(f=f.apply()),F=new M(this,u,f),this.children.push(F);return this},v.prototype.instructionBefore=function(u,f){var m,A;return m=this.parent.children.indexOf(this),A=this.parent.children.splice(m),this.parent.instruction(u,f),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.instructionAfter=function(u,f){var m,A;return m=this.parent.children.indexOf(this),A=this.parent.children.splice(m+1),this.parent.instruction(u,f),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.declaration=function(u,f,m){var A,F;return A=this.document(),F=new g(A,u,f,m),A.children.length===0?A.children.unshift(F):A.children[0].type===o.Declaration?A.children[0]=F:A.children.unshift(F),A.root()||A},v.prototype.dtd=function(u,f){var m,A,F,w,a,C,P,B,U,q;for(A=this.document(),F=new e(A,u,f),U=A.children,w=a=0,P=U.length;a<P;w=++a)if(m=U[w],m.type===o.DocType)return A.children[w]=F,F;for(q=A.children,w=C=0,B=q.length;C<B;w=++C)if(m=q[w],m.isRoot)return A.children.splice(w,0,F),F;return A.children.push(F),F},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var u;for(u=this;u;){if(u.type===o.Document)return u.rootObject;if(u.isRoot)return u;u=u.parent}},v.prototype.document=function(){var u;for(u=this;u;){if(u.type===o.Document)return u;u=u.parent}},v.prototype.end=function(u){return this.document().end(u)},v.prototype.prev=function(){var u;if(u=this.parent.children.indexOf(this),u<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[u-1]},v.prototype.next=function(){var u;if(u=this.parent.children.indexOf(this),u===-1||u===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[u+1]},v.prototype.importDocument=function(u){var f;return f=u.root().clone(),f.parent=this,f.isRoot=!1,this.children.push(f),this},v.prototype.debugInfo=function(u){var f,m;return u=u||this.name,u==null&&!((f=this.parent)!=null&&f.name)?"":u==null?"parent: <"+this.parent.name+">":(m=this.parent)!=null&&m.name?"node: <"+u+">, parent: <"+this.parent.name+">":"node: <"+u+">"},v.prototype.ele=function(u,f,m){return this.element(u,f,m)},v.prototype.nod=function(u,f,m){return this.node(u,f,m)},v.prototype.txt=function(u){return this.text(u)},v.prototype.dat=function(u){return this.cdata(u)},v.prototype.com=function(u){return this.comment(u)},v.prototype.ins=function(u,f){return this.instruction(u,f)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(u,f,m){return this.declaration(u,f,m)},v.prototype.e=function(u,f,m){return this.element(u,f,m)},v.prototype.n=function(u,f,m){return this.node(u,f,m)},v.prototype.t=function(u){return this.text(u)},v.prototype.d=function(u){return this.cdata(u)},v.prototype.c=function(u){return this.comment(u)},v.prototype.r=function(u){return this.raw(u)},v.prototype.i=function(u,f){return this.instruction(u,f)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(u){return this.importDocument(u)},v.prototype.replaceChild=function(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(u,f){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(u){var f,m;return f=this,f===u?0:this.document()!==u.document()?(m=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?m|=t.Preceding:m|=t.Following,m):f.isAncestor(u)?t.Contains|t.Preceding:f.isDescendant(u)?t.Contains|t.Following:f.isPreceding(u)?t.Preceding:t.Following},v.prototype.isSameNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(u){var f,m,A;if(u.nodeType!==this.nodeType||u.children.length!==this.children.length)return!1;for(f=m=0,A=this.children.length-1;0<=A?m<=A:m>=A;f=0<=A?++m:--m)if(!this.children[f].isEqualNode(u.children[f]))return!1;return!0},v.prototype.getFeature=function(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(u,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(u){return u?u===this||this.isDescendant(u):!1},v.prototype.isDescendant=function(u){var f,m,A,F,w;for(w=this.children,A=0,F=w.length;A<F;A++)if(f=w[A],u===f||(m=f.isDescendant(u),m))return!0;return!1},v.prototype.isAncestor=function(u){return u.isDescendant(this)},v.prototype.isPreceding=function(u){var f,m;return f=this.treePosition(u),m=this.treePosition(this),f===-1||m===-1?!1:f<m},v.prototype.isFollowing=function(u){var f,m;return f=this.treePosition(u),m=this.treePosition(this),f===-1||m===-1?!1:f>m},v.prototype.treePosition=function(u){var f,m;return m=0,f=!1,this.foreachTreeNode(this.document(),function(A){if(m++,!f&&A===u)return f=!0}),f?m:-1},v.prototype.foreachTreeNode=function(u,f){var m,A,F,w,a;for(u||(u=this.document()),w=u.children,A=0,F=w.length;A<F;A++){if(m=w[A],a=f(m))return a;if(a=this.foreachTreeNode(m,f),a)return a}},v}()}).call(Y)),Kt.exports}var me={exports:{}},vr;function Qr(){return vr||(vr=1,(function(){var t=function(y,l){return function(){return y.apply(l,arguments)}},o={}.hasOwnProperty;me.exports=function(){function y(l){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var g,e,r;l||(l={}),this.options=l,this.options.version||(this.options.version="1.0"),e=l.stringify||{};for(g in e)o.call(e,g)&&(r=e[g],this[g]=r)}return y.prototype.name=function(l){return this.options.noValidation?l:this.assertLegalName(""+l||"")},y.prototype.text=function(l){return this.options.noValidation?l:this.assertLegalChar(this.textEscape(""+l||""))},y.prototype.cdata=function(l){return this.options.noValidation?l:(l=""+l||"",l=l.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(l))},y.prototype.comment=function(l){if(this.options.noValidation)return l;if(l=""+l||"",l.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+l);return this.assertLegalChar(l)},y.prototype.raw=function(l){return this.options.noValidation?l:""+l||""},y.prototype.attValue=function(l){return this.options.noValidation?l:this.assertLegalChar(this.attEscape(l=""+l||""))},y.prototype.insTarget=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.insValue=function(l){if(this.options.noValidation)return l;if(l=""+l||"",l.match(/\?>/))throw new Error("Invalid processing instruction value: "+l);return this.assertLegalChar(l)},y.prototype.xmlVersion=function(l){if(this.options.noValidation)return l;if(l=""+l||"",!l.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+l);return l},y.prototype.xmlEncoding=function(l){if(this.options.noValidation)return l;if(l=""+l||"",!l.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+l);return this.assertLegalChar(l)},y.prototype.xmlStandalone=function(l){return this.options.noValidation?l:l?"yes":"no"},y.prototype.dtdPubID=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdSysID=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdElementValue=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdAttType=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdAttDefault=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdEntityValue=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.dtdNData=function(l){return this.options.noValidation?l:this.assertLegalChar(""+l||"")},y.prototype.convertAttKey="@",y.prototype.convertPIKey="?",y.prototype.convertTextKey="#text",y.prototype.convertCDataKey="#cdata",y.prototype.convertCommentKey="#comment",y.prototype.convertRawKey="#raw",y.prototype.assertLegalChar=function(l){var g,e;if(this.options.noValidation)return l;if(g="",this.options.version==="1.0"){if(g=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,e=l.match(g))throw new Error("Invalid character in string: "+l+" at index "+e.index)}else if(this.options.version==="1.1"&&(g=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,e=l.match(g)))throw new Error("Invalid character in string: "+l+" at index "+e.index);return l},y.prototype.assertLegalName=function(l){var g;if(this.options.noValidation)return l;if(this.assertLegalChar(l),g=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!l.match(g))throw new Error("Invalid character in name");return l},y.prototype.textEscape=function(l){var g;return this.options.noValidation?l:(g=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,l.replace(g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},y.prototype.attEscape=function(l){var g;return this.options.noValidation?l:(g=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,l.replace(g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},y}()}).call(Y)),me.exports}var ye={exports:{}},ge={exports:{}},we={exports:{}},Tr;function kt(){return Tr||(Tr=1,(function(){we.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Y)),we.exports}var xr;function Zr(){return xr||(xr=1,(function(){var t,o,y,l={}.hasOwnProperty;y=vt().assign,t=st(),Re(),je(),Fe(),Be(),Se(),qe(),$e(),We(),Jr(),Xe(),Ue(),ke(),Ve(),o=kt(),ge.exports=function(){function g(e){var r,i,p;e||(e={}),this.options=e,i=e.writer||{};for(r in i)l.call(i,r)&&(p=i[r],this["_"+r]=this[r],this[r]=p)}return g.prototype.filterOptions=function(e){var r,i,p,M,T,b,N,I;return e||(e={}),e=y({},this.options,e),r={writer:this},r.pretty=e.pretty||!1,r.allowEmpty=e.allowEmpty||!1,r.indent=(i=e.indent)!=null?i:"  ",r.newline=(p=e.newline)!=null?p:`
`,r.offset=(M=e.offset)!=null?M:0,r.dontPrettyTextNodes=(T=(b=e.dontPrettyTextNodes)!=null?b:e.dontprettytextnodes)!=null?T:0,r.spaceBeforeSlash=(N=(I=e.spaceBeforeSlash)!=null?I:e.spacebeforeslash)!=null?N:"",r.spaceBeforeSlash===!0&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=o.None,r},g.prototype.indent=function(e,r,i){var p;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(p=(i||0)+r.offset+1,p>0)?new Array(p).join(r.indent):""},g.prototype.endline=function(e,r,i){return!r.pretty||r.suppressPrettyCount?"":r.newline},g.prototype.attribute=function(e,r,i){var p;return this.openAttribute(e,r,i),p=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,r,i),p},g.prototype.cdata=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<![CDATA[",r.state=o.InsideTag,p+=e.value,r.state=o.CloseTag,p+="]]>"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.comment=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<!-- ",r.state=o.InsideTag,p+=e.value,r.state=o.CloseTag,p+=" -->"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.declaration=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<?xml",r.state=o.InsideTag,p+=' version="'+e.version+'"',e.encoding!=null&&(p+=' encoding="'+e.encoding+'"'),e.standalone!=null&&(p+=' standalone="'+e.standalone+'"'),r.state=o.CloseTag,p+=r.spaceBeforeSlash+"?>",p+=this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.docType=function(e,r,i){var p,M,T,b,N;if(i||(i=0),this.openNode(e,r,i),r.state=o.OpenTag,b=this.indent(e,r,i),b+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?b+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(b+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(b+=" [",b+=this.endline(e,r,i),r.state=o.InsideTag,N=e.children,M=0,T=N.length;M<T;M++)p=N[M],b+=this.writeChildNode(p,r,i+1);r.state=o.CloseTag,b+="]"}return r.state=o.CloseTag,b+=r.spaceBeforeSlash+">",b+=this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),b},g.prototype.element=function(e,r,i){var p,M,T,b,N,I,D,_,S,x,v,u,f,m;i||(i=0),x=!1,v="",this.openNode(e,r,i),r.state=o.OpenTag,v+=this.indent(e,r,i)+"<"+e.name,u=e.attribs;for(S in u)l.call(u,S)&&(p=u[S],v+=this.attribute(p,r,i));if(T=e.children.length,b=T===0?null:e.children[0],T===0||e.children.every(function(A){return(A.type===t.Text||A.type===t.Raw)&&A.value===""}))r.allowEmpty?(v+=">",r.state=o.CloseTag,v+="</"+e.name+">"+this.endline(e,r,i)):(r.state=o.CloseTag,v+=r.spaceBeforeSlash+"/>"+this.endline(e,r,i));else if(r.pretty&&T===1&&(b.type===t.Text||b.type===t.Raw)&&b.value!=null)v+=">",r.state=o.InsideTag,r.suppressPrettyCount++,x=!0,v+=this.writeChildNode(b,r,i+1),r.suppressPrettyCount--,x=!1,r.state=o.CloseTag,v+="</"+e.name+">"+this.endline(e,r,i);else{if(r.dontPrettyTextNodes){for(f=e.children,N=0,D=f.length;N<D;N++)if(M=f[N],(M.type===t.Text||M.type===t.Raw)&&M.value!=null){r.suppressPrettyCount++,x=!0;break}}for(v+=">"+this.endline(e,r,i),r.state=o.InsideTag,m=e.children,I=0,_=m.length;I<_;I++)M=m[I],v+=this.writeChildNode(M,r,i+1);r.state=o.CloseTag,v+=this.indent(e,r,i)+"</"+e.name+">",x&&r.suppressPrettyCount--,v+=this.endline(e,r,i),r.state=o.None}return this.closeNode(e,r,i),v},g.prototype.writeChildNode=function(e,r,i){switch(e.type){case t.CData:return this.cdata(e,r,i);case t.Comment:return this.comment(e,r,i);case t.Element:return this.element(e,r,i);case t.Raw:return this.raw(e,r,i);case t.Text:return this.text(e,r,i);case t.ProcessingInstruction:return this.processingInstruction(e,r,i);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,i);case t.DocType:return this.docType(e,r,i);case t.AttributeDeclaration:return this.dtdAttList(e,r,i);case t.ElementDeclaration:return this.dtdElement(e,r,i);case t.EntityDeclaration:return this.dtdEntity(e,r,i);case t.NotationDeclaration:return this.dtdNotation(e,r,i);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},g.prototype.processingInstruction=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<?",r.state=o.InsideTag,p+=e.target,e.value&&(p+=" "+e.value),r.state=o.CloseTag,p+=r.spaceBeforeSlash+"?>",p+=this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.raw=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i),r.state=o.InsideTag,p+=e.value,r.state=o.CloseTag,p+=this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.text=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i),r.state=o.InsideTag,p+=e.value,r.state=o.CloseTag,p+=this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.dtdAttList=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<!ATTLIST",r.state=o.InsideTag,p+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,e.defaultValueType!=="#DEFAULT"&&(p+=" "+e.defaultValueType),e.defaultValue&&(p+=' "'+e.defaultValue+'"'),r.state=o.CloseTag,p+=r.spaceBeforeSlash+">"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.dtdElement=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<!ELEMENT",r.state=o.InsideTag,p+=" "+e.name+" "+e.value,r.state=o.CloseTag,p+=r.spaceBeforeSlash+">"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.dtdEntity=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<!ENTITY",r.state=o.InsideTag,e.pe&&(p+=" %"),p+=" "+e.name,e.value?p+=' "'+e.value+'"':(e.pubID&&e.sysID?p+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(p+=' SYSTEM "'+e.sysID+'"'),e.nData&&(p+=" NDATA "+e.nData)),r.state=o.CloseTag,p+=r.spaceBeforeSlash+">"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.dtdNotation=function(e,r,i){var p;return this.openNode(e,r,i),r.state=o.OpenTag,p=this.indent(e,r,i)+"<!NOTATION",r.state=o.InsideTag,p+=" "+e.name,e.pubID&&e.sysID?p+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?p+=' PUBLIC "'+e.pubID+'"':e.sysID&&(p+=' SYSTEM "'+e.sysID+'"'),r.state=o.CloseTag,p+=r.spaceBeforeSlash+">"+this.endline(e,r,i),r.state=o.None,this.closeNode(e,r,i),p},g.prototype.openNode=function(e,r,i){},g.prototype.closeNode=function(e,r,i){},g.prototype.openAttribute=function(e,r,i){},g.prototype.closeAttribute=function(e,r,i){},g}()}).call(Y)),ge.exports}var Ir;function Ge(){return Ir||(Ir=1,(function(){var t,o=function(l,g){for(var e in g)y.call(g,e)&&(l[e]=g[e]);function r(){this.constructor=l}return r.prototype=g.prototype,l.prototype=new r,l.__super__=g.prototype,l},y={}.hasOwnProperty;t=Zr(),ye.exports=function(l){o(g,l);function g(e){g.__super__.constructor.call(this,e)}return g.prototype.document=function(e,r){var i,p,M,T,b;for(r=this.filterOptions(r),T="",b=e.children,p=0,M=b.length;p<M;p++)i=b[p],T+=this.writeChildNode(i,r,0);return r.pretty&&T.slice(-r.newline.length)===r.newline&&(T=T.slice(0,-r.newline.length)),T},g}(t)}).call(Y)),ye.exports}var Cr;function tn(){return Cr||(Cr=1,(function(){var t,o,y,l,g,e,r,i=function(M,T){for(var b in T)p.call(T,b)&&(M[b]=T[b]);function N(){this.constructor=M}return N.prototype=T.prototype,M.prototype=new N,M.__super__=T.prototype,M},p={}.hasOwnProperty;r=vt().isPlainObject,y=Kr(),o=bn(),l=yt(),t=st(),e=Qr(),g=Ge(),Wt.exports=function(M){i(T,M);function T(b){T.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new o,b||(b={}),b.writer||(b.writer=new g),this.options=b,this.stringify=new e(b)}return Object.defineProperty(T.prototype,"implementation",{value:new y}),Object.defineProperty(T.prototype,"doctype",{get:function(){var b,N,I,D;for(D=this.children,N=0,I=D.length;N<I;N++)if(b=D[N],b.type===t.DocType)return b;return null}}),Object.defineProperty(T.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(T.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(T.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(T.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(T.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(T.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(T.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(T.prototype,"origin",{get:function(){return null}}),Object.defineProperty(T.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(T.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(T.prototype,"contentType",{get:function(){return null}}),T.prototype.end=function(b){var N;return N={},b?r(b)&&(N=b,b=this.options.writer):b=this.options.writer,b.document(this,b.filterOptions(N))},T.prototype.toString=function(b){return this.options.writer.document(this,this.options.writer.filterOptions(b))},T.prototype.createElement=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createTextNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createComment=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createCDATASection=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createProcessingInstruction=function(b,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createAttribute=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createEntityReference=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.importNode=function(b,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createElementNS=function(b,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createAttributeNS=function(b,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagNameNS=function(b,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementById=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.adoptNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.renameNode=function(b,N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByClassName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createEvent=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createNodeIterator=function(b,N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createTreeWalker=function(b,N,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},T}(l)}).call(Y)),Wt.exports}var Ee={exports:{}},Mr;function Tn(){return Mr||(Mr=1,(function(){var t,o,y,l,g,e,r,i,p,M,T,b,N,I,D,_,S,x,v,u,f,m,A,F={}.hasOwnProperty;A=vt(),f=A.isObject,u=A.isFunction,m=A.isPlainObject,v=A.getValue,t=st(),b=tn(),N=Se(),l=Fe(),g=Be(),D=qe(),x=$e(),I=We(),M=Re(),T=je(),e=Xe(),i=ke(),r=Ue(),p=Ve(),y=Hr(),S=Qr(),_=Ge(),o=kt(),Ee.exports=function(){function w(a,C,P){var B;this.name="?xml",this.type=t.Document,a||(a={}),B={},a.writer?m(a.writer)&&(B=a.writer,a.writer=new _):a.writer=new _,this.options=a,this.writer=a.writer,this.writerOptions=this.writer.filterOptions(B),this.stringify=new S(a),this.onDataCallback=C||function(){},this.onEndCallback=P||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return w.prototype.createChildNode=function(a){var C,P,B,U,q,z,G,W;switch(a.type){case t.CData:this.cdata(a.value);break;case t.Comment:this.comment(a.value);break;case t.Element:B={},G=a.attribs;for(P in G)F.call(G,P)&&(C=G[P],B[P]=C.value);this.node(a.name,B);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(a.value);break;case t.Text:this.text(a.value);break;case t.ProcessingInstruction:this.instruction(a.target,a.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+a.constructor.name)}for(W=a.children,q=0,z=W.length;q<z;q++)U=W[q],this.createChildNode(U),U.type===t.Element&&this.up();return this},w.prototype.dummy=function(){return this},w.prototype.node=function(a,C,P){var B;if(a==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(a));return this.openCurrent(),a=v(a),C==null&&(C={}),C=v(C),f(C)||(B=[C,P],P=B[0],C=B[1]),this.currentNode=new N(this,a,C),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,P!=null&&this.text(P),this},w.prototype.element=function(a,C,P){var B,U,q,z,G,W;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(a)||f(a)||u(a))for(z=this.options.noValidation,this.options.noValidation=!0,W=new b(this.options).element("TEMP_ROOT"),W.element(a),this.options.noValidation=z,G=W.children,U=0,q=G.length;U<q;U++)B=G[U],this.createChildNode(B),B.type===t.Element&&this.up();else this.node(a,C,P);return this},w.prototype.attribute=function(a,C){var P,B;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(a));if(a!=null&&(a=v(a)),f(a))for(P in a)F.call(a,P)&&(B=a[P],this.attribute(P,B));else u(C)&&(C=C.apply()),this.options.keepNullAttributes&&C==null?this.currentNode.attribs[a]=new y(this,a,""):C!=null&&(this.currentNode.attribs[a]=new y(this,a,C));return this},w.prototype.text=function(a){var C;return this.openCurrent(),C=new x(this,a),this.onData(this.writer.text(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.cdata=function(a){var C;return this.openCurrent(),C=new l(this,a),this.onData(this.writer.cdata(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.comment=function(a){var C;return this.openCurrent(),C=new g(this,a),this.onData(this.writer.comment(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.raw=function(a){var C;return this.openCurrent(),C=new D(this,a),this.onData(this.writer.raw(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.instruction=function(a,C){var P,B,U,q,z;if(this.openCurrent(),a!=null&&(a=v(a)),C!=null&&(C=v(C)),Array.isArray(a))for(P=0,q=a.length;P<q;P++)B=a[P],this.instruction(B);else if(f(a))for(B in a)F.call(a,B)&&(U=a[B],this.instruction(B,U));else u(C)&&(C=C.apply()),z=new I(this,a,C),this.onData(this.writer.processingInstruction(z,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},w.prototype.declaration=function(a,C,P){var B;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return B=new M(this,a,C,P),this.onData(this.writer.declaration(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.doctype=function(a,C,P){if(this.openCurrent(),a==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new T(this,C,P),this.currentNode.rootNodeName=a,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},w.prototype.dtdElement=function(a,C){var P;return this.openCurrent(),P=new r(this,a,C),this.onData(this.writer.dtdElement(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.attList=function(a,C,P,B,U){var q;return this.openCurrent(),q=new e(this,a,C,P,B,U),this.onData(this.writer.dtdAttList(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.entity=function(a,C){var P;return this.openCurrent(),P=new i(this,!1,a,C),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.pEntity=function(a,C){var P;return this.openCurrent(),P=new i(this,!0,a,C),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.notation=function(a,C){var P;return this.openCurrent(),P=new p(this,a,C),this.onData(this.writer.dtdNotation(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},w.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},w.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},w.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},w.prototype.openNode=function(a){var C,P,B,U;if(!a.isOpen){if(!this.root&&this.currentLevel===0&&a.type===t.Element&&(this.root=a),P="",a.type===t.Element){this.writerOptions.state=o.OpenTag,P=this.writer.indent(a,this.writerOptions,this.currentLevel)+"<"+a.name,U=a.attribs;for(B in U)F.call(U,B)&&(C=U[B],P+=this.writer.attribute(C,this.writerOptions,this.currentLevel));P+=(a.children?">":"/>")+this.writer.endline(a,this.writerOptions,this.currentLevel),this.writerOptions.state=o.InsideTag}else this.writerOptions.state=o.OpenTag,P=this.writer.indent(a,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+a.rootNodeName,a.pubID&&a.sysID?P+=' PUBLIC "'+a.pubID+'" "'+a.sysID+'"':a.sysID&&(P+=' SYSTEM "'+a.sysID+'"'),a.children?(P+=" [",this.writerOptions.state=o.InsideTag):(this.writerOptions.state=o.CloseTag,P+=">"),P+=this.writer.endline(a,this.writerOptions,this.currentLevel);return this.onData(P,this.currentLevel),a.isOpen=!0}},w.prototype.closeNode=function(a){var C;if(!a.isClosed)return C="",this.writerOptions.state=o.CloseTag,a.type===t.Element?C=this.writer.indent(a,this.writerOptions,this.currentLevel)+"</"+a.name+">"+this.writer.endline(a,this.writerOptions,this.currentLevel):C=this.writer.indent(a,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(a,this.writerOptions,this.currentLevel),this.writerOptions.state=o.None,this.onData(C,this.currentLevel),a.isClosed=!0},w.prototype.onData=function(a,C){return this.documentStarted=!0,this.onDataCallback(a,C+1)},w.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},w.prototype.debugInfo=function(a){return a==null?"":"node: <"+a+">"},w.prototype.ele=function(){return this.element.apply(this,arguments)},w.prototype.nod=function(a,C,P){return this.node(a,C,P)},w.prototype.txt=function(a){return this.text(a)},w.prototype.dat=function(a){return this.cdata(a)},w.prototype.com=function(a){return this.comment(a)},w.prototype.ins=function(a,C){return this.instruction(a,C)},w.prototype.dec=function(a,C,P){return this.declaration(a,C,P)},w.prototype.dtd=function(a,C,P){return this.doctype(a,C,P)},w.prototype.e=function(a,C,P){return this.element(a,C,P)},w.prototype.n=function(a,C,P){return this.node(a,C,P)},w.prototype.t=function(a){return this.text(a)},w.prototype.d=function(a){return this.cdata(a)},w.prototype.c=function(a){return this.comment(a)},w.prototype.r=function(a){return this.raw(a)},w.prototype.i=function(a,C){return this.instruction(a,C)},w.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},w.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},w.prototype.ent=function(a,C){return this.entity(a,C)},w.prototype.pent=function(a,C){return this.pEntity(a,C)},w.prototype.not=function(a,C){return this.notation(a,C)},w}()}).call(Y)),Ee.exports}var De={exports:{}},Ar;function xn(){return Ar||(Ar=1,(function(){var t,o,y,l=function(e,r){for(var i in r)g.call(r,i)&&(e[i]=r[i]);function p(){this.constructor=e}return p.prototype=r.prototype,e.prototype=new p,e.__super__=r.prototype,e},g={}.hasOwnProperty;t=st(),y=Zr(),o=kt(),De.exports=function(e){l(r,e);function r(i,p){this.stream=i,r.__super__.constructor.call(this,p)}return r.prototype.endline=function(i,p,M){return i.isLastRootNode&&p.state===o.CloseTag?"":r.__super__.endline.call(this,i,p,M)},r.prototype.document=function(i,p){var M,T,b,N,I,D,_,S,x;for(_=i.children,T=b=0,I=_.length;b<I;T=++b)M=_[T],M.isLastRootNode=T===i.children.length-1;for(p=this.filterOptions(p),S=i.children,x=[],N=0,D=S.length;N<D;N++)M=S[N],x.push(this.writeChildNode(M,p,0));return x},r.prototype.attribute=function(i,p,M){return this.stream.write(r.__super__.attribute.call(this,i,p,M))},r.prototype.cdata=function(i,p,M){return this.stream.write(r.__super__.cdata.call(this,i,p,M))},r.prototype.comment=function(i,p,M){return this.stream.write(r.__super__.comment.call(this,i,p,M))},r.prototype.declaration=function(i,p,M){return this.stream.write(r.__super__.declaration.call(this,i,p,M))},r.prototype.docType=function(i,p,M){var T,b,N,I;if(M||(M=0),this.openNode(i,p,M),p.state=o.OpenTag,this.stream.write(this.indent(i,p,M)),this.stream.write("<!DOCTYPE "+i.root().name),i.pubID&&i.sysID?this.stream.write(' PUBLIC "'+i.pubID+'" "'+i.sysID+'"'):i.sysID&&this.stream.write(' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(i,p,M)),p.state=o.InsideTag,I=i.children,b=0,N=I.length;b<N;b++)T=I[b],this.writeChildNode(T,p,M+1);p.state=o.CloseTag,this.stream.write("]")}return p.state=o.CloseTag,this.stream.write(p.spaceBeforeSlash+">"),this.stream.write(this.endline(i,p,M)),p.state=o.None,this.closeNode(i,p,M)},r.prototype.element=function(i,p,M){var T,b,N,I,D,_,S,x,v;M||(M=0),this.openNode(i,p,M),p.state=o.OpenTag,this.stream.write(this.indent(i,p,M)+"<"+i.name),x=i.attribs;for(S in x)g.call(x,S)&&(T=x[S],this.attribute(T,p,M));if(N=i.children.length,I=N===0?null:i.children[0],N===0||i.children.every(function(u){return(u.type===t.Text||u.type===t.Raw)&&u.value===""}))p.allowEmpty?(this.stream.write(">"),p.state=o.CloseTag,this.stream.write("</"+i.name+">")):(p.state=o.CloseTag,this.stream.write(p.spaceBeforeSlash+"/>"));else if(p.pretty&&N===1&&(I.type===t.Text||I.type===t.Raw)&&I.value!=null)this.stream.write(">"),p.state=o.InsideTag,p.suppressPrettyCount++,this.writeChildNode(I,p,M+1),p.suppressPrettyCount--,p.state=o.CloseTag,this.stream.write("</"+i.name+">");else{for(this.stream.write(">"+this.endline(i,p,M)),p.state=o.InsideTag,v=i.children,D=0,_=v.length;D<_;D++)b=v[D],this.writeChildNode(b,p,M+1);p.state=o.CloseTag,this.stream.write(this.indent(i,p,M)+"</"+i.name+">")}return this.stream.write(this.endline(i,p,M)),p.state=o.None,this.closeNode(i,p,M)},r.prototype.processingInstruction=function(i,p,M){return this.stream.write(r.__super__.processingInstruction.call(this,i,p,M))},r.prototype.raw=function(i,p,M){return this.stream.write(r.__super__.raw.call(this,i,p,M))},r.prototype.text=function(i,p,M){return this.stream.write(r.__super__.text.call(this,i,p,M))},r.prototype.dtdAttList=function(i,p,M){return this.stream.write(r.__super__.dtdAttList.call(this,i,p,M))},r.prototype.dtdElement=function(i,p,M){return this.stream.write(r.__super__.dtdElement.call(this,i,p,M))},r.prototype.dtdEntity=function(i,p,M){return this.stream.write(r.__super__.dtdEntity.call(this,i,p,M))},r.prototype.dtdNotation=function(i,p,M){return this.stream.write(r.__super__.dtdNotation.call(this,i,p,M))},r}(y)}).call(Y)),De.exports}var _r;function In(){return _r||(_r=1,(function(){var t,o,y,l,g,e,r,i,p,M;M=vt(),i=M.assign,p=M.isFunction,y=Kr(),l=tn(),g=Tn(),r=Ge(),e=xn(),t=st(),o=kt(),bt.create=function(T,b,N,I){var D,_;if(T==null)throw new Error("Root element needs a name.");return I=i({},b,N,I),D=new l(I),_=D.element(T),I.headless||(D.declaration(I),(I.pubID!=null||I.sysID!=null)&&D.dtd(I)),_},bt.begin=function(T,b,N){var I;return p(T)&&(I=[T,b],b=I[0],N=I[1],T={}),b?new g(T,b,N):new l(T)},bt.stringWriter=function(T){return new r(T)},bt.streamWriter=function(T,b){return new e(T,b)},bt.implementation=new y,bt.nodeType=t,bt.writerState=o}).call(Y)),bt}var Lr;function Cn(){return Lr||(Lr=1,(function(){var t,o,y,l,g,e={}.hasOwnProperty;t=In(),o=Oe().defaults,l=function(r){return typeof r=="string"&&(r.indexOf("&")>=0||r.indexOf(">")>=0||r.indexOf("<")>=0)},g=function(r){return"<![CDATA["+y(r)+"]]>"},y=function(r){return r.replace("]]>","]]]]><![CDATA[>")},qt.Builder=function(){function r(i){var p,M,T;this.options={},M=o["0.2"];for(p in M)e.call(M,p)&&(T=M[p],this.options[p]=T);for(p in i)e.call(i,p)&&(T=i[p],this.options[p]=T)}return r.prototype.buildObject=function(i){var p,M,T,b,N;return p=this.options.attrkey,M=this.options.charkey,Object.keys(i).length===1&&this.options.rootName===o["0.2"].rootName?(N=Object.keys(i)[0],i=i[N]):N=this.options.rootName,T=function(I){return function(D,_){var S,x,v,u,f,m;if(typeof _!="object")I.options.cdata&&l(_)?D.raw(g(_)):D.txt(_);else if(Array.isArray(_)){for(u in _)if(e.call(_,u)){x=_[u];for(f in x)v=x[f],D=T(D.ele(f),v).up()}}else for(f in _)if(e.call(_,f))if(x=_[f],f===p){if(typeof x=="object")for(S in x)m=x[S],D=D.att(S,m)}else if(f===M)I.options.cdata&&l(x)?D=D.raw(g(x)):D=D.txt(x);else if(Array.isArray(x))for(u in x)e.call(x,u)&&(v=x[u],typeof v=="string"?I.options.cdata&&l(v)?D=D.ele(f).raw(g(v)).up():D=D.ele(f,v).up():D=T(D.ele(f),v).up());else typeof x=="object"?D=T(D.ele(f),x).up():typeof x=="string"&&I.options.cdata&&l(x)?D=D.ele(f).raw(g(x)).up():(x==null&&(x=""),D=D.ele(f,x.toString()).up());return D}}(this),b=t.create(N,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),T(b,i).end(this.options.renderOpts)},r}()}).call(Y)),qt}var be={},Ne={},ve={},Pt={exports:{}},Te={},St={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Or;function Mn(){return Or||(Or=1,St.read=function(t,o,y,l,g){var e,r,i=g*8-l-1,p=(1<<i)-1,M=p>>1,T=-7,b=y?g-1:0,N=y?-1:1,I=t[o+b];for(b+=N,e=I&(1<<-T)-1,I>>=-T,T+=i;T>0;e=e*256+t[o+b],b+=N,T-=8);for(r=e&(1<<-T)-1,e>>=-T,T+=l;T>0;r=r*256+t[o+b],b+=N,T-=8);if(e===0)e=1-M;else{if(e===p)return r?NaN:(I?-1:1)*(1/0);r=r+Math.pow(2,l),e=e-M}return(I?-1:1)*r*Math.pow(2,e-l)},St.write=function(t,o,y,l,g,e){var r,i,p,M=e*8-g-1,T=(1<<M)-1,b=T>>1,N=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=l?0:e-1,D=l?1:-1,_=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(i=isNaN(o)?1:0,r=T):(r=Math.floor(Math.log(o)/Math.LN2),o*(p=Math.pow(2,-r))<1&&(r--,p*=2),r+b>=1?o+=N/p:o+=N*Math.pow(2,1-b),o*p>=2&&(r++,p/=2),r+b>=T?(i=0,r=T):r+b>=1?(i=(o*p-1)*Math.pow(2,g),r=r+b):(i=o*Math.pow(2,b-1)*Math.pow(2,g),r=0));g>=8;t[y+I]=i&255,I+=D,i/=256,g-=8);for(r=r<<g|i,M+=g;M>0;t[y+I]=r&255,I+=D,r/=256,M-=8);t[y+I-D]|=_*128}),St}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Pr;function An(){return Pr||(Pr=1,function(t){var o=rn,y=Mn(),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=i,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;var g=2147483647;t.kMaxLength=g,i.TYPED_ARRAY_SUPPORT=e(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var h=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(h,n),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function r(h){if(h>g)throw new RangeError('The value "'+h+'" is invalid for option "size"');var n=new Uint8Array(h);return Object.setPrototypeOf(n,i.prototype),n}function i(h,n,s){if(typeof h=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(h)}return p(h,n,s)}i.poolSize=8192;function p(h,n,s){if(typeof h=="string")return N(h,n);if(ArrayBuffer.isView(h))return D(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(J(h,ArrayBuffer)||h&&J(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(h,SharedArrayBuffer)||h&&J(h.buffer,SharedArrayBuffer)))return _(h,n,s);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var E=h.valueOf&&h.valueOf();if(E!=null&&E!==h)return i.from(E,n,s);var O=S(h);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),n,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,n,s){return p(h,n,s)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function M(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function T(h,n,s){return M(h),h<=0?r(h):n!==void 0?typeof s=="string"?r(h).fill(n,s):r(h).fill(n):r(h)}i.alloc=function(h,n,s){return T(h,n,s)};function b(h){return M(h),r(h<0?0:x(h)|0)}i.allocUnsafe=function(h){return b(h)},i.allocUnsafeSlow=function(h){return b(h)};function N(h,n){if((typeof n!="string"||n==="")&&(n="utf8"),!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var s=u(h,n)|0,E=r(s),O=E.write(h,n);return O!==s&&(E=E.slice(0,O)),E}function I(h){for(var n=h.length<0?0:x(h.length)|0,s=r(n),E=0;E<n;E+=1)s[E]=h[E]&255;return s}function D(h){if(J(h,Uint8Array)){var n=new Uint8Array(h);return _(n.buffer,n.byteOffset,n.byteLength)}return I(h)}function _(h,n,s){if(n<0||h.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<n+(s||0))throw new RangeError('"length" is outside of buffer bounds');var E;return n===void 0&&s===void 0?E=new Uint8Array(h):s===void 0?E=new Uint8Array(h,n):E=new Uint8Array(h,n,s),Object.setPrototypeOf(E,i.prototype),E}function S(h){if(i.isBuffer(h)){var n=x(h.length)|0,s=r(n);return s.length===0||h.copy(s,0,0,n),s}if(h.length!==void 0)return typeof h.length!="number"||at(h.length)?r(0):I(h);if(h.type==="Buffer"&&Array.isArray(h.data))return I(h.data)}function x(h){if(h>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return h|0}function v(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==i.prototype},i.compare=function(n,s){if(J(n,Uint8Array)&&(n=i.from(n,n.offset,n.byteLength)),J(s,Uint8Array)&&(s=i.from(s,s.offset,s.byteLength)),!i.isBuffer(n)||!i.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===s)return 0;for(var E=n.length,O=s.length,X=0,k=Math.min(E,O);X<k;++X)if(n[X]!==s[X]){E=n[X],O=s[X];break}return E<O?-1:O<E?1:0},i.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(n,s){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return i.alloc(0);var E;if(s===void 0)for(s=0,E=0;E<n.length;++E)s+=n[E].length;var O=i.allocUnsafe(s),X=0;for(E=0;E<n.length;++E){var k=n[E];if(J(k,Uint8Array))X+k.length>O.length?i.from(k).copy(O,X):Uint8Array.prototype.set.call(O,k,X);else if(i.isBuffer(k))k.copy(O,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=k.length}return O};function u(h,n){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||J(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var s=h.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&s===0)return 0;for(var O=!1;;)switch(n){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return c(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return H(h).length;default:if(O)return E?-1:c(h).length;n=(""+n).toLowerCase(),O=!0}}i.byteLength=u;function f(h,n,s){var E=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,n>>>=0,s<=n))return"";for(h||(h="utf8");;)switch(h){case"hex":return Tt(this,n,s);case"utf8":case"utf-8":return q(this,n,s);case"ascii":return W(this,n,s);case"latin1":case"binary":return gt(this,n,s);case"base64":return U(this,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,n,s);default:if(E)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),E=!0}}i.prototype._isBuffer=!0;function m(h,n,s){var E=h[n];h[n]=h[s],h[s]=E}i.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<n;s+=2)m(this,s,s+1);return this},i.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<n;s+=4)m(this,s,s+3),m(this,s+1,s+2);return this},i.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<n;s+=8)m(this,s,s+7),m(this,s+1,s+6),m(this,s+2,s+5),m(this,s+3,s+4);return this},i.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?q(this,0,n):f.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(n){if(!i.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:i.compare(this,n)===0},i.prototype.inspect=function(){var n="",s=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(n+=" ... "),"<Buffer "+n+">"},l&&(i.prototype[l]=i.prototype.inspect),i.prototype.compare=function(n,s,E,O,X){if(J(n,Uint8Array)&&(n=i.from(n,n.offset,n.byteLength)),!i.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(s===void 0&&(s=0),E===void 0&&(E=n?n.length:0),O===void 0&&(O=0),X===void 0&&(X=this.length),s<0||E>n.length||O<0||X>this.length)throw new RangeError("out of range index");if(O>=X&&s>=E)return 0;if(O>=X)return-1;if(s>=E)return 1;if(s>>>=0,E>>>=0,O>>>=0,X>>>=0,this===n)return 0;for(var k=X-O,K=E-s,Z=Math.min(k,K),rt=this.slice(O,X),pt=n.slice(s,E),it=0;it<Z;++it)if(rt[it]!==pt[it]){k=rt[it],K=pt[it];break}return k<K?-1:K<k?1:0};function A(h,n,s,E,O){if(h.length===0)return-1;if(typeof s=="string"?(E=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,at(s)&&(s=O?0:h.length-1),s<0&&(s=h.length+s),s>=h.length){if(O)return-1;s=h.length-1}else if(s<0)if(O)s=0;else return-1;if(typeof n=="string"&&(n=i.from(n,E)),i.isBuffer(n))return n.length===0?-1:F(h,n,s,E,O);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(h,n,s):Uint8Array.prototype.lastIndexOf.call(h,n,s):F(h,[n],s,E,O);throw new TypeError("val must be string, number or Buffer")}function F(h,n,s,E,O){var X=1,k=h.length,K=n.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(h.length<2||n.length<2)return-1;X=2,k/=2,K/=2,s/=2}function Z(Ye,ze){return X===1?Ye[ze]:Ye.readUInt16BE(ze*X)}var rt;if(O){var pt=-1;for(rt=s;rt<k;rt++)if(Z(h,rt)===Z(n,pt===-1?0:rt-pt)){if(pt===-1&&(pt=rt),rt-pt+1===K)return pt*X}else pt!==-1&&(rt-=rt-pt),pt=-1}else for(s+K>k&&(s=k-K),rt=s;rt>=0;rt--){for(var it=!0,Ot=0;Ot<K;Ot++)if(Z(h,rt+Ot)!==Z(n,Ot)){it=!1;break}if(it)return rt}return-1}i.prototype.includes=function(n,s,E){return this.indexOf(n,s,E)!==-1},i.prototype.indexOf=function(n,s,E){return A(this,n,s,E,!0)},i.prototype.lastIndexOf=function(n,s,E){return A(this,n,s,E,!1)};function w(h,n,s,E){s=Number(s)||0;var O=h.length-s;E?(E=Number(E),E>O&&(E=O)):E=O;var X=n.length;E>X/2&&(E=X/2);for(var k=0;k<E;++k){var K=parseInt(n.substr(k*2,2),16);if(at(K))return k;h[s+k]=K}return k}function a(h,n,s,E){return et(c(n,h.length-s),h,s,E)}function C(h,n,s,E){return et(R(n),h,s,E)}function P(h,n,s,E){return et(H(n),h,s,E)}function B(h,n,s,E){return et(L(n,h.length-s),h,s,E)}i.prototype.write=function(n,s,E,O){if(s===void 0)O="utf8",E=this.length,s=0;else if(E===void 0&&typeof s=="string")O=s,E=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(E)?(E=E>>>0,O===void 0&&(O="utf8")):(O=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var X=this.length-s;if((E===void 0||E>X)&&(E=X),n.length>0&&(E<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");for(var k=!1;;)switch(O){case"hex":return w(this,n,s,E);case"utf8":case"utf-8":return a(this,n,s,E);case"ascii":case"latin1":case"binary":return C(this,n,s,E);case"base64":return P(this,n,s,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,n,s,E);default:if(k)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),k=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(h,n,s){return n===0&&s===h.length?o.fromByteArray(h):o.fromByteArray(h.slice(n,s))}function q(h,n,s){s=Math.min(h.length,s);for(var E=[],O=n;O<s;){var X=h[O],k=null,K=X>239?4:X>223?3:X>191?2:1;if(O+K<=s){var Z,rt,pt,it;switch(K){case 1:X<128&&(k=X);break;case 2:Z=h[O+1],(Z&192)===128&&(it=(X&31)<<6|Z&63,it>127&&(k=it));break;case 3:Z=h[O+1],rt=h[O+2],(Z&192)===128&&(rt&192)===128&&(it=(X&15)<<12|(Z&63)<<6|rt&63,it>2047&&(it<55296||it>57343)&&(k=it));break;case 4:Z=h[O+1],rt=h[O+2],pt=h[O+3],(Z&192)===128&&(rt&192)===128&&(pt&192)===128&&(it=(X&15)<<18|(Z&63)<<12|(rt&63)<<6|pt&63,it>65535&&it<1114112&&(k=it))}}k===null?(k=65533,K=1):k>65535&&(k-=65536,E.push(k>>>10&1023|55296),k=56320|k&1023),E.push(k),O+=K}return G(E)}var z=4096;function G(h){var n=h.length;if(n<=z)return String.fromCharCode.apply(String,h);for(var s="",E=0;E<n;)s+=String.fromCharCode.apply(String,h.slice(E,E+=z));return s}function W(h,n,s){var E="";s=Math.min(h.length,s);for(var O=n;O<s;++O)E+=String.fromCharCode(h[O]&127);return E}function gt(h,n,s){var E="";s=Math.min(h.length,s);for(var O=n;O<s;++O)E+=String.fromCharCode(h[O]);return E}function Tt(h,n,s){var E=h.length;(!n||n<0)&&(n=0),(!s||s<0||s>E)&&(s=E);for(var O="",X=n;X<s;++X)O+=ft[h[X]];return O}function ot(h,n,s){for(var E=h.slice(n,s),O="",X=0;X<E.length-1;X+=2)O+=String.fromCharCode(E[X]+E[X+1]*256);return O}i.prototype.slice=function(n,s){var E=this.length;n=~~n,s=s===void 0?E:~~s,n<0?(n+=E,n<0&&(n=0)):n>E&&(n=E),s<0?(s+=E,s<0&&(s=0)):s>E&&(s=E),s<n&&(s=n);var O=this.subarray(n,s);return Object.setPrototypeOf(O,i.prototype),O};function Q(h,n,s){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+n>s)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(n,s,E){n=n>>>0,s=s>>>0,E||Q(n,s,this.length);for(var O=this[n],X=1,k=0;++k<s&&(X*=256);)O+=this[n+k]*X;return O},i.prototype.readUintBE=i.prototype.readUIntBE=function(n,s,E){n=n>>>0,s=s>>>0,E||Q(n,s,this.length);for(var O=this[n+--s],X=1;s>0&&(X*=256);)O+=this[n+--s]*X;return O},i.prototype.readUint8=i.prototype.readUInt8=function(n,s){return n=n>>>0,s||Q(n,1,this.length),this[n]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(n,s){return n=n>>>0,s||Q(n,2,this.length),this[n]|this[n+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(n,s){return n=n>>>0,s||Q(n,2,this.length),this[n]<<8|this[n+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},i.prototype.readIntLE=function(n,s,E){n=n>>>0,s=s>>>0,E||Q(n,s,this.length);for(var O=this[n],X=1,k=0;++k<s&&(X*=256);)O+=this[n+k]*X;return X*=128,O>=X&&(O-=Math.pow(2,8*s)),O},i.prototype.readIntBE=function(n,s,E){n=n>>>0,s=s>>>0,E||Q(n,s,this.length);for(var O=s,X=1,k=this[n+--O];O>0&&(X*=256);)k+=this[n+--O]*X;return X*=128,k>=X&&(k-=Math.pow(2,8*s)),k},i.prototype.readInt8=function(n,s){return n=n>>>0,s||Q(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},i.prototype.readInt16LE=function(n,s){n=n>>>0,s||Q(n,2,this.length);var E=this[n]|this[n+1]<<8;return E&32768?E|4294901760:E},i.prototype.readInt16BE=function(n,s){n=n>>>0,s||Q(n,2,this.length);var E=this[n+1]|this[n]<<8;return E&32768?E|4294901760:E},i.prototype.readInt32LE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},i.prototype.readInt32BE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},i.prototype.readFloatLE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),y.read(this,n,!0,23,4)},i.prototype.readFloatBE=function(n,s){return n=n>>>0,s||Q(n,4,this.length),y.read(this,n,!1,23,4)},i.prototype.readDoubleLE=function(n,s){return n=n>>>0,s||Q(n,8,this.length),y.read(this,n,!0,52,8)},i.prototype.readDoubleBE=function(n,s){return n=n>>>0,s||Q(n,8,this.length),y.read(this,n,!1,52,8)};function nt(h,n,s,E,O,X){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>O||n<X)throw new RangeError('"value" argument is out of bounds');if(s+E>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(n,s,E,O){if(n=+n,s=s>>>0,E=E>>>0,!O){var X=Math.pow(2,8*E)-1;nt(this,n,s,E,X,0)}var k=1,K=0;for(this[s]=n&255;++K<E&&(k*=256);)this[s+K]=n/k&255;return s+E},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(n,s,E,O){if(n=+n,s=s>>>0,E=E>>>0,!O){var X=Math.pow(2,8*E)-1;nt(this,n,s,E,X,0)}var k=E-1,K=1;for(this[s+k]=n&255;--k>=0&&(K*=256);)this[s+k]=n/K&255;return s+E},i.prototype.writeUint8=i.prototype.writeUInt8=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,1,255,0),this[s]=n&255,s+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,2,65535,0),this[s]=n&255,this[s+1]=n>>>8,s+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,2,65535,0),this[s]=n>>>8,this[s+1]=n&255,s+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,4,4294967295,0),this[s+3]=n>>>24,this[s+2]=n>>>16,this[s+1]=n>>>8,this[s]=n&255,s+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,4,4294967295,0),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4},i.prototype.writeIntLE=function(n,s,E,O){if(n=+n,s=s>>>0,!O){var X=Math.pow(2,8*E-1);nt(this,n,s,E,X-1,-X)}var k=0,K=1,Z=0;for(this[s]=n&255;++k<E&&(K*=256);)n<0&&Z===0&&this[s+k-1]!==0&&(Z=1),this[s+k]=(n/K>>0)-Z&255;return s+E},i.prototype.writeIntBE=function(n,s,E,O){if(n=+n,s=s>>>0,!O){var X=Math.pow(2,8*E-1);nt(this,n,s,E,X-1,-X)}var k=E-1,K=1,Z=0;for(this[s+k]=n&255;--k>=0&&(K*=256);)n<0&&Z===0&&this[s+k+1]!==0&&(Z=1),this[s+k]=(n/K>>0)-Z&255;return s+E},i.prototype.writeInt8=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,1,127,-128),n<0&&(n=255+n+1),this[s]=n&255,s+1},i.prototype.writeInt16LE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,2,32767,-32768),this[s]=n&255,this[s+1]=n>>>8,s+2},i.prototype.writeInt16BE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,2,32767,-32768),this[s]=n>>>8,this[s+1]=n&255,s+2},i.prototype.writeInt32LE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,4,2147483647,-2147483648),this[s]=n&255,this[s+1]=n>>>8,this[s+2]=n>>>16,this[s+3]=n>>>24,s+4},i.prototype.writeInt32BE=function(n,s,E){return n=+n,s=s>>>0,E||nt(this,n,s,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4};function At(h,n,s,E,O,X){if(s+E>h.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function _t(h,n,s,E,O){return n=+n,s=s>>>0,O||At(h,n,s,4),y.write(h,n,s,E,23,4),s+4}i.prototype.writeFloatLE=function(n,s,E){return _t(this,n,s,!0,E)},i.prototype.writeFloatBE=function(n,s,E){return _t(this,n,s,!1,E)};function Lt(h,n,s,E,O){return n=+n,s=s>>>0,O||At(h,n,s,8),y.write(h,n,s,E,52,8),s+8}i.prototype.writeDoubleLE=function(n,s,E){return Lt(this,n,s,!0,E)},i.prototype.writeDoubleBE=function(n,s,E){return Lt(this,n,s,!1,E)},i.prototype.copy=function(n,s,E,O){if(!i.isBuffer(n))throw new TypeError("argument should be a Buffer");if(E||(E=0),!O&&O!==0&&(O=this.length),s>=n.length&&(s=n.length),s||(s=0),O>0&&O<E&&(O=E),O===E||n.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),n.length-s<O-E&&(O=n.length-s+E);var X=O-E;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,E,O):Uint8Array.prototype.set.call(n,this.subarray(E,O),s),X},i.prototype.fill=function(n,s,E,O){if(typeof n=="string"){if(typeof s=="string"?(O=s,s=0,E=this.length):typeof E=="string"&&(O=E,E=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!i.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(n.length===1){var X=n.charCodeAt(0);(O==="utf8"&&X<128||O==="latin1")&&(n=X)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(s<0||this.length<s||this.length<E)throw new RangeError("Out of range index");if(E<=s)return this;s=s>>>0,E=E===void 0?this.length:E>>>0,n||(n=0);var k;if(typeof n=="number")for(k=s;k<E;++k)this[k]=n;else{var K=i.isBuffer(n)?n:i.from(n,O),Z=K.length;if(Z===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(k=0;k<E-s;++k)this[k+s]=K[k%Z]}return this};var Ut=/[^+/0-9A-Za-z-_]/g;function d(h){if(h=h.split("=")[0],h=h.trim().replace(Ut,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function c(h,n){n=n||1/0;for(var s,E=h.length,O=null,X=[],k=0;k<E;++k){if(s=h.charCodeAt(k),s>55295&&s<57344){if(!O){if(s>56319){(n-=3)>-1&&X.push(239,191,189);continue}else if(k+1===E){(n-=3)>-1&&X.push(239,191,189);continue}O=s;continue}if(s<56320){(n-=3)>-1&&X.push(239,191,189),O=s;continue}s=(O-55296<<10|s-56320)+65536}else O&&(n-=3)>-1&&X.push(239,191,189);if(O=null,s<128){if((n-=1)<0)break;X.push(s)}else if(s<2048){if((n-=2)<0)break;X.push(s>>6|192,s&63|128)}else if(s<65536){if((n-=3)<0)break;X.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((n-=4)<0)break;X.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return X}function R(h){for(var n=[],s=0;s<h.length;++s)n.push(h.charCodeAt(s)&255);return n}function L(h,n){for(var s,E,O,X=[],k=0;k<h.length&&!((n-=2)<0);++k)s=h.charCodeAt(k),E=s>>8,O=s%256,X.push(O),X.push(E);return X}function H(h){return o.toByteArray(d(h))}function et(h,n,s,E){for(var O=0;O<E&&!(O+s>=n.length||O>=h.length);++O)n[O+s]=h[O];return O}function J(h,n){return h instanceof n||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===n.name}function at(h){return h!==h}var ft=function(){for(var h="0123456789abcdef",n=new Array(256),s=0;s<16;++s)for(var E=s*16,O=0;O<16;++O)n[E+O]=h[s]+h[O];return n}()}(Te)),Te}var Sr;function _n(){return Sr||(Sr=1,function(t,o){var y=An(),l=y.Buffer;function g(r,i){for(var p in r)i[p]=r[p]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?t.exports=y:(g(y,o),o.Buffer=e);function e(r,i,p){return l(r,i,p)}g(l,e),e.from=function(r,i,p){if(typeof r=="number")throw new TypeError("Argument must not be a number");return l(r,i,p)},e.alloc=function(r,i,p){if(typeof r!="number")throw new TypeError("Argument must be a number");var M=l(r);return i!==void 0?typeof p=="string"?M.fill(i,p):M.fill(i):M.fill(0),M},e.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return l(r)},e.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return y.SlowBuffer(r)}}(Pt,Pt.exports)),Pt.exports}var Fr;function Ln(){if(Fr)return ve;Fr=1;var t=_n().Buffer,o=t.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(x){if(!x)return"utf8";for(var v;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(v)return;x=(""+x).toLowerCase(),v=!0}}function l(x){var v=y(x);if(typeof v!="string"&&(t.isEncoding===o||!o(x)))throw new Error("Unknown encoding: "+x);return v||x}ve.StringDecoder=g;function g(x){this.encoding=l(x);var v;switch(this.encoding){case"utf16le":this.text=b,this.end=N,v=4;break;case"utf8":this.fillLast=p,v=4;break;case"base64":this.text=I,this.end=D,v=3;break;default:this.write=_,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(v)}g.prototype.write=function(x){if(x.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(x),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<x.length?v?v+this.text(x,u):this.text(x,u):v||""},g.prototype.end=T,g.prototype.text=M,g.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function e(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function r(x,v,u){var f=v.length-1;if(f<u)return 0;var m=e(v[f]);return m>=0?(m>0&&(x.lastNeed=m-1),m):--f<u||m===-2?0:(m=e(v[f]),m>=0?(m>0&&(x.lastNeed=m-2),m):--f<u||m===-2?0:(m=e(v[f]),m>=0?(m>0&&(m===2?m=0:x.lastNeed=m-3),m):0))}function i(x,v,u){if((v[0]&192)!==128)return x.lastNeed=0,"�";if(x.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return x.lastNeed=1,"�";if(x.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return x.lastNeed=2,"�"}}function p(x){var v=this.lastTotal-this.lastNeed,u=i(this,x);if(u!==void 0)return u;if(this.lastNeed<=x.length)return x.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,v,0,x.length),this.lastNeed-=x.length}function M(x,v){var u=r(this,x,v);if(!this.lastNeed)return x.toString("utf8",v);this.lastTotal=u;var f=x.length-(u-this.lastNeed);return x.copy(this.lastChar,0,f),x.toString("utf8",v,f)}function T(x){var v=x&&x.length?this.write(x):"";return this.lastNeed?v+"�":v}function b(x,v){if((x.length-v)%2===0){var u=x.toString("utf16le",v);if(u){var f=u.charCodeAt(u.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",v,x.length-1)}function N(x){var v=x&&x.length?this.write(x):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function I(x,v){var u=(x.length-v)%3;return u===0?x.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",v,x.length-u))}function D(x){var v=x&&x.length?this.write(x):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(x){return x.toString(this.encoding)}function S(x){return x&&x.length?this.write(x):""}return ve}var Br;function On(){return Br||(Br=1,function(t){(function(o){o.parser=function(d,c){return new l(d,c)},o.SAXParser=l,o.SAXStream=T,o.createStream=M,o.MAX_BUFFER_LENGTH=64*1024;var y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];o.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function l(d,c){if(!(this instanceof l))return new l(d,c);var R=this;e(R),R.q=R.c="",R.bufferCheckPosition=o.MAX_BUFFER_LENGTH,R.opt=c||{},R.opt.lowercase=R.opt.lowercase||R.opt.lowercasetags,R.looseCase=R.opt.lowercase?"toLowerCase":"toUpperCase",R.tags=[],R.closed=R.closedRoot=R.sawRoot=!1,R.tag=R.error=null,R.strict=!!d,R.noscript=!!(d||R.opt.noscript),R.state=a.BEGIN,R.strictEntities=R.opt.strictEntities,R.ENTITIES=R.strictEntities?Object.create(o.XML_ENTITIES):Object.create(o.ENTITIES),R.attribList=[],R.opt.xmlns&&(R.ns=Object.create(_)),R.trackPosition=R.opt.position!==!1,R.trackPosition&&(R.position=R.line=R.column=0),P(R,"onready")}Object.create||(Object.create=function(d){function c(){}c.prototype=d;var R=new c;return R}),Object.keys||(Object.keys=function(d){var c=[];for(var R in d)d.hasOwnProperty(R)&&c.push(R);return c});function g(d){for(var c=Math.max(o.MAX_BUFFER_LENGTH,10),R=0,L=0,H=y.length;L<H;L++){var et=d[y[L]].length;if(et>c)switch(y[L]){case"textNode":U(d);break;case"cdata":B(d,"oncdata",d.cdata),d.cdata="";break;case"script":B(d,"onscript",d.script),d.script="";break;default:z(d,"Max buffer length exceeded: "+y[L])}R=Math.max(R,et)}var J=o.MAX_BUFFER_LENGTH-R;d.bufferCheckPosition=J+d.position}function e(d){for(var c=0,R=y.length;c<R;c++)d[y[c]]=""}function r(d){U(d),d.cdata!==""&&(B(d,"oncdata",d.cdata),d.cdata=""),d.script!==""&&(B(d,"onscript",d.script),d.script="")}l.prototype={end:function(){G(this)},write:Ut,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};var i;try{i=qr.Stream}catch{i=function(){}}i||(i=function(){});var p=o.EVENTS.filter(function(d){return d!=="error"&&d!=="end"});function M(d,c){return new T(d,c)}function T(d,c){if(!(this instanceof T))return new T(d,c);i.apply(this),this._parser=new l(d,c),this.writable=!0,this.readable=!0;var R=this;this._parser.onend=function(){R.emit("end")},this._parser.onerror=function(L){R.emit("error",L),R._parser.error=null},this._decoder=null,p.forEach(function(L){Object.defineProperty(R,"on"+L,{get:function(){return R._parser["on"+L]},set:function(H){if(!H)return R.removeAllListeners(L),R._parser["on"+L]=H,H;R.on(L,H)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(i.prototype,{constructor:{value:T}}),T.prototype.write=function(d){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(d)){if(!this._decoder){var c=Ln().StringDecoder;this._decoder=new c("utf8")}d=this._decoder.write(d)}return this._parser.write(d.toString()),this.emit("data",d),!0},T.prototype.end=function(d){return d&&d.length&&this.write(d),this._parser.end(),!0},T.prototype.on=function(d,c){var R=this;return!R._parser["on"+d]&&p.indexOf(d)!==-1&&(R._parser["on"+d]=function(){var L=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);L.splice(0,0,d),R.emit.apply(R,L)}),i.prototype.on.call(R,d,c)};var b="[CDATA[",N="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",D="http://www.w3.org/2000/xmlns/",_={xml:I,xmlns:D},S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(d){return d===" "||d===`
`||d==="\r"||d==="	"}function m(d){return d==='"'||d==="'"}function A(d){return d===">"||f(d)}function F(d,c){return d.test(c)}function w(d,c){return!F(d,c)}var a=0;o.STATE={BEGIN:a++,BEGIN_WHITESPACE:a++,TEXT:a++,TEXT_ENTITY:a++,OPEN_WAKA:a++,SGML_DECL:a++,SGML_DECL_QUOTED:a++,DOCTYPE:a++,DOCTYPE_QUOTED:a++,DOCTYPE_DTD:a++,DOCTYPE_DTD_QUOTED:a++,COMMENT_STARTING:a++,COMMENT:a++,COMMENT_ENDING:a++,COMMENT_ENDED:a++,CDATA:a++,CDATA_ENDING:a++,CDATA_ENDING_2:a++,PROC_INST:a++,PROC_INST_BODY:a++,PROC_INST_ENDING:a++,OPEN_TAG:a++,OPEN_TAG_SLASH:a++,ATTRIB:a++,ATTRIB_NAME:a++,ATTRIB_NAME_SAW_WHITE:a++,ATTRIB_VALUE:a++,ATTRIB_VALUE_QUOTED:a++,ATTRIB_VALUE_CLOSED:a++,ATTRIB_VALUE_UNQUOTED:a++,ATTRIB_VALUE_ENTITY_Q:a++,ATTRIB_VALUE_ENTITY_U:a++,CLOSE_TAG:a++,CLOSE_TAG_SAW_WHITE:a++,SCRIPT:a++,SCRIPT_ENDING:a++},o.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},o.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(o.ENTITIES).forEach(function(d){var c=o.ENTITIES[d],R=typeof c=="number"?String.fromCharCode(c):c;o.ENTITIES[d]=R});for(var C in o.STATE)o.STATE[o.STATE[C]]=C;a=o.STATE;function P(d,c,R){d[c]&&d[c](R)}function B(d,c,R){d.textNode&&U(d),P(d,c,R)}function U(d){d.textNode=q(d.opt,d.textNode),d.textNode&&P(d,"ontext",d.textNode),d.textNode=""}function q(d,c){return d.trim&&(c=c.trim()),d.normalize&&(c=c.replace(/\s+/g," ")),c}function z(d,c){return U(d),d.trackPosition&&(c+=`
Line: `+d.line+`
Column: `+d.column+`
Char: `+d.c),c=new Error(c),d.error=c,P(d,"onerror",c),d}function G(d){return d.sawRoot&&!d.closedRoot&&W(d,"Unclosed root tag"),d.state!==a.BEGIN&&d.state!==a.BEGIN_WHITESPACE&&d.state!==a.TEXT&&z(d,"Unexpected end"),U(d),d.c="",d.closed=!0,P(d,"onend"),l.call(d,d.strict,d.opt),d}function W(d,c){if(typeof d!="object"||!(d instanceof l))throw new Error("bad call to strictFail");d.strict&&z(d,c)}function gt(d){d.strict||(d.tagName=d.tagName[d.looseCase]());var c=d.tags[d.tags.length-1]||d,R=d.tag={name:d.tagName,attributes:{}};d.opt.xmlns&&(R.ns=c.ns),d.attribList.length=0,B(d,"onopentagstart",R)}function Tt(d,c){var R=d.indexOf(":"),L=R<0?["",d]:d.split(":"),H=L[0],et=L[1];return c&&d==="xmlns"&&(H="xmlns",et=""),{prefix:H,local:et}}function ot(d){if(d.strict||(d.attribName=d.attribName[d.looseCase]()),d.attribList.indexOf(d.attribName)!==-1||d.tag.attributes.hasOwnProperty(d.attribName)){d.attribName=d.attribValue="";return}if(d.opt.xmlns){var c=Tt(d.attribName,!0),R=c.prefix,L=c.local;if(R==="xmlns")if(L==="xml"&&d.attribValue!==I)W(d,"xml: prefix must be bound to "+I+`
Actual: `+d.attribValue);else if(L==="xmlns"&&d.attribValue!==D)W(d,"xmlns: prefix must be bound to "+D+`
Actual: `+d.attribValue);else{var H=d.tag,et=d.tags[d.tags.length-1]||d;H.ns===et.ns&&(H.ns=Object.create(et.ns)),H.ns[L]=d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,B(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function Q(d,c){if(d.opt.xmlns){var R=d.tag,L=Tt(d.tagName);R.prefix=L.prefix,R.local=L.local,R.uri=R.ns[L.prefix]||"",R.prefix&&!R.uri&&(W(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),R.uri=L.prefix);var H=d.tags[d.tags.length-1]||d;R.ns&&H.ns!==R.ns&&Object.keys(R.ns).forEach(function(k){B(d,"onopennamespace",{prefix:k,uri:R.ns[k]})});for(var et=0,J=d.attribList.length;et<J;et++){var at=d.attribList[et],ft=at[0],h=at[1],n=Tt(ft,!0),s=n.prefix,E=n.local,O=s===""?"":R.ns[s]||"",X={name:ft,value:h,prefix:s,local:E,uri:O};s&&s!=="xmlns"&&!O&&(W(d,"Unbound namespace prefix: "+JSON.stringify(s)),X.uri=s),d.tag.attributes[ft]=X,B(d,"onattribute",X)}d.attribList.length=0}d.tag.isSelfClosing=!!c,d.sawRoot=!0,d.tags.push(d.tag),B(d,"onopentag",d.tag),c||(!d.noscript&&d.tagName.toLowerCase()==="script"?d.state=a.SCRIPT:d.state=a.TEXT,d.tag=null,d.tagName=""),d.attribName=d.attribValue="",d.attribList.length=0}function nt(d){if(!d.tagName){W(d,"Weird empty close tag."),d.textNode+="</>",d.state=a.TEXT;return}if(d.script){if(d.tagName!=="script"){d.script+="</"+d.tagName+">",d.tagName="",d.state=a.SCRIPT;return}B(d,"onscript",d.script),d.script=""}var c=d.tags.length,R=d.tagName;d.strict||(R=R[d.looseCase]());for(var L=R;c--;){var H=d.tags[c];if(H.name!==L)W(d,"Unexpected close tag");else break}if(c<0){W(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">",d.state=a.TEXT;return}d.tagName=R;for(var et=d.tags.length;et-- >c;){var J=d.tag=d.tags.pop();d.tagName=d.tag.name,B(d,"onclosetag",d.tagName);var at={};for(var ft in J.ns)at[ft]=J.ns[ft];var h=d.tags[d.tags.length-1]||d;d.opt.xmlns&&J.ns!==h.ns&&Object.keys(J.ns).forEach(function(n){var s=J.ns[n];B(d,"onclosenamespace",{prefix:n,uri:s})})}c===0&&(d.closedRoot=!0),d.tagName=d.attribValue=d.attribName="",d.attribList.length=0,d.state=a.TEXT}function At(d){var c=d.entity,R=c.toLowerCase(),L,H="";return d.ENTITIES[c]?d.ENTITIES[c]:d.ENTITIES[R]?d.ENTITIES[R]:(c=R,c.charAt(0)==="#"&&(c.charAt(1)==="x"?(c=c.slice(2),L=parseInt(c,16),H=L.toString(16)):(c=c.slice(1),L=parseInt(c,10),H=L.toString(10))),c=c.replace(/^0+/,""),isNaN(L)||H.toLowerCase()!==c?(W(d,"Invalid character entity"),"&"+d.entity+";"):String.fromCodePoint(L))}function _t(d,c){c==="<"?(d.state=a.OPEN_WAKA,d.startTagPosition=d.position):f(c)||(W(d,"Non-whitespace before first tag."),d.textNode=c,d.state=a.TEXT)}function Lt(d,c){var R="";return c<d.length&&(R=d.charAt(c)),R}function Ut(d){var c=this;if(this.error)throw this.error;if(c.closed)return z(c,"Cannot write after close. Assign an onready handler.");if(d===null)return G(c);typeof d=="object"&&(d=d.toString());for(var R=0,L="";L=Lt(d,R++),c.c=L,!!L;)switch(c.trackPosition&&(c.position++,L===`
`?(c.line++,c.column=0):c.column++),c.state){case a.BEGIN:if(c.state=a.BEGIN_WHITESPACE,L==="\uFEFF")continue;_t(c,L);continue;case a.BEGIN_WHITESPACE:_t(c,L);continue;case a.TEXT:if(c.sawRoot&&!c.closedRoot){for(var H=R-1;L&&L!=="<"&&L!=="&";)L=Lt(d,R++),L&&c.trackPosition&&(c.position++,L===`
`?(c.line++,c.column=0):c.column++);c.textNode+=d.substring(H,R-1)}L==="<"&&!(c.sawRoot&&c.closedRoot&&!c.strict)?(c.state=a.OPEN_WAKA,c.startTagPosition=c.position):(!f(L)&&(!c.sawRoot||c.closedRoot)&&W(c,"Text data outside of root node."),L==="&"?c.state=a.TEXT_ENTITY:c.textNode+=L);continue;case a.SCRIPT:L==="<"?c.state=a.SCRIPT_ENDING:c.script+=L;continue;case a.SCRIPT_ENDING:L==="/"?c.state=a.CLOSE_TAG:(c.script+="<"+L,c.state=a.SCRIPT);continue;case a.OPEN_WAKA:if(L==="!")c.state=a.SGML_DECL,c.sgmlDecl="";else if(!f(L))if(F(S,L))c.state=a.OPEN_TAG,c.tagName=L;else if(L==="/")c.state=a.CLOSE_TAG,c.tagName="";else if(L==="?")c.state=a.PROC_INST,c.procInstName=c.procInstBody="";else{if(W(c,"Unencoded <"),c.startTagPosition+1<c.position){var et=c.position-c.startTagPosition;L=new Array(et).join(" ")+L}c.textNode+="<"+L,c.state=a.TEXT}continue;case a.SGML_DECL:(c.sgmlDecl+L).toUpperCase()===b?(B(c,"onopencdata"),c.state=a.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+L==="--"?(c.state=a.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+L).toUpperCase()===N?(c.state=a.DOCTYPE,(c.doctype||c.sawRoot)&&W(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):L===">"?(B(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=a.TEXT):(m(L)&&(c.state=a.SGML_DECL_QUOTED),c.sgmlDecl+=L);continue;case a.SGML_DECL_QUOTED:L===c.q&&(c.state=a.SGML_DECL,c.q=""),c.sgmlDecl+=L;continue;case a.DOCTYPE:L===">"?(c.state=a.TEXT,B(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=L,L==="["?c.state=a.DOCTYPE_DTD:m(L)&&(c.state=a.DOCTYPE_QUOTED,c.q=L));continue;case a.DOCTYPE_QUOTED:c.doctype+=L,L===c.q&&(c.q="",c.state=a.DOCTYPE);continue;case a.DOCTYPE_DTD:c.doctype+=L,L==="]"?c.state=a.DOCTYPE:m(L)&&(c.state=a.DOCTYPE_DTD_QUOTED,c.q=L);continue;case a.DOCTYPE_DTD_QUOTED:c.doctype+=L,L===c.q&&(c.state=a.DOCTYPE_DTD,c.q="");continue;case a.COMMENT:L==="-"?c.state=a.COMMENT_ENDING:c.comment+=L;continue;case a.COMMENT_ENDING:L==="-"?(c.state=a.COMMENT_ENDED,c.comment=q(c.opt,c.comment),c.comment&&B(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+L,c.state=a.COMMENT);continue;case a.COMMENT_ENDED:L!==">"?(W(c,"Malformed comment"),c.comment+="--"+L,c.state=a.COMMENT):c.state=a.TEXT;continue;case a.CDATA:L==="]"?c.state=a.CDATA_ENDING:c.cdata+=L;continue;case a.CDATA_ENDING:L==="]"?c.state=a.CDATA_ENDING_2:(c.cdata+="]"+L,c.state=a.CDATA);continue;case a.CDATA_ENDING_2:L===">"?(c.cdata&&B(c,"oncdata",c.cdata),B(c,"onclosecdata"),c.cdata="",c.state=a.TEXT):L==="]"?c.cdata+="]":(c.cdata+="]]"+L,c.state=a.CDATA);continue;case a.PROC_INST:L==="?"?c.state=a.PROC_INST_ENDING:f(L)?c.state=a.PROC_INST_BODY:c.procInstName+=L;continue;case a.PROC_INST_BODY:if(!c.procInstBody&&f(L))continue;L==="?"?c.state=a.PROC_INST_ENDING:c.procInstBody+=L;continue;case a.PROC_INST_ENDING:L===">"?(B(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=a.TEXT):(c.procInstBody+="?"+L,c.state=a.PROC_INST_BODY);continue;case a.OPEN_TAG:F(x,L)?c.tagName+=L:(gt(c),L===">"?Q(c):L==="/"?c.state=a.OPEN_TAG_SLASH:(f(L)||W(c,"Invalid character in tag name"),c.state=a.ATTRIB));continue;case a.OPEN_TAG_SLASH:L===">"?(Q(c,!0),nt(c)):(W(c,"Forward-slash in opening tag not followed by >"),c.state=a.ATTRIB);continue;case a.ATTRIB:if(f(L))continue;L===">"?Q(c):L==="/"?c.state=a.OPEN_TAG_SLASH:F(S,L)?(c.attribName=L,c.attribValue="",c.state=a.ATTRIB_NAME):W(c,"Invalid attribute name");continue;case a.ATTRIB_NAME:L==="="?c.state=a.ATTRIB_VALUE:L===">"?(W(c,"Attribute without value"),c.attribValue=c.attribName,ot(c),Q(c)):f(L)?c.state=a.ATTRIB_NAME_SAW_WHITE:F(x,L)?c.attribName+=L:W(c,"Invalid attribute name");continue;case a.ATTRIB_NAME_SAW_WHITE:if(L==="=")c.state=a.ATTRIB_VALUE;else{if(f(L))continue;W(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",B(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",L===">"?Q(c):F(S,L)?(c.attribName=L,c.state=a.ATTRIB_NAME):(W(c,"Invalid attribute name"),c.state=a.ATTRIB)}continue;case a.ATTRIB_VALUE:if(f(L))continue;m(L)?(c.q=L,c.state=a.ATTRIB_VALUE_QUOTED):(W(c,"Unquoted attribute value"),c.state=a.ATTRIB_VALUE_UNQUOTED,c.attribValue=L);continue;case a.ATTRIB_VALUE_QUOTED:if(L!==c.q){L==="&"?c.state=a.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=L;continue}ot(c),c.q="",c.state=a.ATTRIB_VALUE_CLOSED;continue;case a.ATTRIB_VALUE_CLOSED:f(L)?c.state=a.ATTRIB:L===">"?Q(c):L==="/"?c.state=a.OPEN_TAG_SLASH:F(S,L)?(W(c,"No whitespace between attributes"),c.attribName=L,c.attribValue="",c.state=a.ATTRIB_NAME):W(c,"Invalid attribute name");continue;case a.ATTRIB_VALUE_UNQUOTED:if(!A(L)){L==="&"?c.state=a.ATTRIB_VALUE_ENTITY_U:c.attribValue+=L;continue}ot(c),L===">"?Q(c):c.state=a.ATTRIB;continue;case a.CLOSE_TAG:if(c.tagName)L===">"?nt(c):F(x,L)?c.tagName+=L:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=a.SCRIPT):(f(L)||W(c,"Invalid tagname in closing tag"),c.state=a.CLOSE_TAG_SAW_WHITE);else{if(f(L))continue;w(S,L)?c.script?(c.script+="</"+L,c.state=a.SCRIPT):W(c,"Invalid tagname in closing tag."):c.tagName=L}continue;case a.CLOSE_TAG_SAW_WHITE:if(f(L))continue;L===">"?nt(c):W(c,"Invalid characters in closing tag");continue;case a.TEXT_ENTITY:case a.ATTRIB_VALUE_ENTITY_Q:case a.ATTRIB_VALUE_ENTITY_U:var J,at;switch(c.state){case a.TEXT_ENTITY:J=a.TEXT,at="textNode";break;case a.ATTRIB_VALUE_ENTITY_Q:J=a.ATTRIB_VALUE_QUOTED,at="attribValue";break;case a.ATTRIB_VALUE_ENTITY_U:J=a.ATTRIB_VALUE_UNQUOTED,at="attribValue";break}if(L===";")if(c.opt.unparsedEntities){var ft=At(c);c.entity="",c.state=J,c.write(ft)}else c[at]+=At(c),c.entity="",c.state=J;else F(c.entity.length?u:v,L)?c.entity+=L:(W(c,"Invalid character in entity name"),c[at]+="&"+c.entity+L,c.entity="",c.state=J);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&g(c),c}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var d=String.fromCharCode,c=Math.floor,R=function(){var L=16384,H=[],et,J,at=-1,ft=arguments.length;if(!ft)return"";for(var h="";++at<ft;){var n=Number(arguments[at]);if(!isFinite(n)||n<0||n>1114111||c(n)!==n)throw RangeError("Invalid code point: "+n);n<=65535?H.push(n):(n-=65536,et=(n>>10)+55296,J=n%1024+56320,H.push(et,J)),(at+1===ft||H.length>L)&&(h+=d.apply(null,H),H.length=0)}return h};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:R,configurable:!0,writable:!0}):String.fromCodePoint=R}()})(t)}(Ne)),Ne}var Ft={exports:{}},Rr;function Pn(){if(Rr)return Ft.exports;Rr=1;var t=typeof Reflect=="object"?Reflect:null,o=t&&typeof t.apply=="function"?t.apply:function(m,A,F){return Function.prototype.apply.call(m,A,F)},y;t&&typeof t.ownKeys=="function"?y=t.ownKeys:Object.getOwnPropertySymbols?y=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:y=function(m){return Object.getOwnPropertyNames(m)};function l(f){console&&console.warn&&console.warn(f)}var g=Number.isNaN||function(m){return m!==m};function e(){e.init.call(this)}Ft.exports=e,Ft.exports.once=x,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function i(f){if(typeof f!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(f){if(typeof f!="number"||f<0||g(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");r=f}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||g(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function p(f){return f._maxListeners===void 0?e.defaultMaxListeners:f._maxListeners}e.prototype.getMaxListeners=function(){return p(this)},e.prototype.emit=function(m){for(var A=[],F=1;F<arguments.length;F++)A.push(arguments[F]);var w=m==="error",a=this._events;if(a!==void 0)w=w&&a.error===void 0;else if(!w)return!1;if(w){var C;if(A.length>0&&(C=A[0]),C instanceof Error)throw C;var P=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw P.context=C,P}var B=a[m];if(B===void 0)return!1;if(typeof B=="function")o(B,this,A);else for(var U=B.length,q=D(B,U),F=0;F<U;++F)o(q[F],this,A);return!0};function M(f,m,A,F){var w,a,C;if(i(A),a=f._events,a===void 0?(a=f._events=Object.create(null),f._eventsCount=0):(a.newListener!==void 0&&(f.emit("newListener",m,A.listener?A.listener:A),a=f._events),C=a[m]),C===void 0)C=a[m]=A,++f._eventsCount;else if(typeof C=="function"?C=a[m]=F?[A,C]:[C,A]:F?C.unshift(A):C.push(A),w=p(f),w>0&&C.length>w&&!C.warned){C.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=f,P.type=m,P.count=C.length,l(P)}return f}e.prototype.addListener=function(m,A){return M(this,m,A,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(m,A){return M(this,m,A,!0)};function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(f,m,A){var F={fired:!1,wrapFn:void 0,target:f,type:m,listener:A},w=T.bind(F);return w.listener=A,F.wrapFn=w,w}e.prototype.once=function(m,A){return i(A),this.on(m,b(this,m,A)),this},e.prototype.prependOnceListener=function(m,A){return i(A),this.prependListener(m,b(this,m,A)),this},e.prototype.removeListener=function(m,A){var F,w,a,C,P;if(i(A),w=this._events,w===void 0)return this;if(F=w[m],F===void 0)return this;if(F===A||F.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete w[m],w.removeListener&&this.emit("removeListener",m,F.listener||A));else if(typeof F!="function"){for(a=-1,C=F.length-1;C>=0;C--)if(F[C]===A||F[C].listener===A){P=F[C].listener,a=C;break}if(a<0)return this;a===0?F.shift():_(F,a),F.length===1&&(w[m]=F[0]),w.removeListener!==void 0&&this.emit("removeListener",m,P||A)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(m){var A,F,w;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[m]),this;if(arguments.length===0){var a=Object.keys(F),C;for(w=0;w<a.length;++w)C=a[w],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=F[m],typeof A=="function")this.removeListener(m,A);else if(A!==void 0)for(w=A.length-1;w>=0;w--)this.removeListener(m,A[w]);return this};function N(f,m,A){var F=f._events;if(F===void 0)return[];var w=F[m];return w===void 0?[]:typeof w=="function"?A?[w.listener||w]:[w]:A?S(w):D(w,w.length)}e.prototype.listeners=function(m){return N(this,m,!0)},e.prototype.rawListeners=function(m){return N(this,m,!1)},e.listenerCount=function(f,m){return typeof f.listenerCount=="function"?f.listenerCount(m):I.call(f,m)},e.prototype.listenerCount=I;function I(f){var m=this._events;if(m!==void 0){var A=m[f];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]};function D(f,m){for(var A=new Array(m),F=0;F<m;++F)A[F]=f[F];return A}function _(f,m){for(;m+1<f.length;m++)f[m]=f[m+1];f.pop()}function S(f){for(var m=new Array(f.length),A=0;A<m.length;++A)m[A]=f[A].listener||f[A];return m}function x(f,m){return new Promise(function(A,F){function w(C){f.removeListener(m,a),F(C)}function a(){typeof f.removeListener=="function"&&f.removeListener("error",w),A([].slice.call(arguments))}u(f,m,a,{once:!0}),m!=="error"&&v(f,w,{once:!0})})}function v(f,m,A){typeof f.on=="function"&&u(f,"error",m,A)}function u(f,m,A,F){if(typeof f.on=="function")F.once?f.once(m,A):f.on(m,A);else if(typeof f.addEventListener=="function")f.addEventListener(m,function w(a){F.once&&f.removeEventListener(m,w),A(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f)}return Ft.exports}var xe={},Xr;function Sn(){return Xr||(Xr=1,(function(){xe.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(Y)),xe}var Ct={},kr;function en(){return kr||(kr=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),Ct.normalize=function(o){return o.toLowerCase()},Ct.firstCharLowerCase=function(o){return o.charAt(0).toLowerCase()+o.slice(1)},Ct.stripPrefix=function(o){return o.replace(t,"")},Ct.parseNumbers=function(o){return isNaN(o)||(o=o%1===0?parseInt(o,10):parseFloat(o)),o},Ct.parseBooleans=function(o){return/^(?:true|false)$/i.test(o)&&(o=o.toLowerCase()==="true"),o}}).call(Y)),Ct}var Ur;function Fn(){return Ur||(Ur=1,function(t){(function(){var o,y,l,g,e,r,i,p,M,T=function(I,D){return function(){return I.apply(D,arguments)}},b=function(I,D){for(var _ in D)N.call(D,_)&&(I[_]=D[_]);function S(){this.constructor=I}return S.prototype=D.prototype,I.prototype=new S,I.__super__=D.prototype,I},N={}.hasOwnProperty;p=On(),g=Pn(),o=Sn(),i=en(),M=qr.setImmediate,y=Oe().defaults,e=function(I){return typeof I=="object"&&I!=null&&Object.keys(I).length===0},r=function(I,D,_){var S,x,v;for(S=0,x=I.length;S<x;S++)v=I[S],D=v(D,_);return D},l=function(I,D,_){var S;return S=Object.create(null),S.value=_,S.writable=!0,S.enumerable=!0,S.configurable=!0,Object.defineProperty(I,D,S)},t.Parser=function(I){b(D,I);function D(_){this.parseStringPromise=T(this.parseStringPromise,this),this.parseString=T(this.parseString,this),this.reset=T(this.reset,this),this.assignOrPush=T(this.assignOrPush,this),this.processAsync=T(this.processAsync,this);var S,x,v;if(!(this instanceof t.Parser))return new t.Parser(_);this.options={},x=y["0.2"];for(S in x)N.call(x,S)&&(v=x[S],this.options[S]=v);for(S in _)N.call(_,S)&&(v=_[S],this.options[S]=v);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(i.normalize)),this.reset()}return D.prototype.processAsync=function(){var _,S;try{return this.remaining.length<=this.options.chunkSize?(_=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(_),this.saxParser.close()):(_=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(_),M(this.processAsync))}catch(x){if(S=x,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(S)}},D.prototype.assignOrPush=function(_,S,x){return S in _?(_[S]instanceof Array||l(_,S,[_[S]]),_[S].push(x)):this.options.explicitArray?l(_,S,[x]):l(_,S,x)},D.prototype.reset=function(){var _,S,x,v;return this.removeAllListeners(),this.saxParser=p.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(u){return function(f){if(u.saxParser.resume(),!u.saxParser.errThrown)return u.saxParser.errThrown=!0,u.emit("error",f)}}(this),this.saxParser.onend=function(u){return function(){if(!u.saxParser.ended)return u.saxParser.ended=!0,u.emit("end",u.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,v=[],_=this.options.attrkey,S=this.options.charkey,this.saxParser.onopentag=function(u){return function(f){var m,A,F,w,a;if(F={},F[S]="",!u.options.ignoreAttrs){a=f.attributes;for(m in a)N.call(a,m)&&(!(_ in F)&&!u.options.mergeAttrs&&(F[_]={}),A=u.options.attrValueProcessors?r(u.options.attrValueProcessors,f.attributes[m],m):f.attributes[m],w=u.options.attrNameProcessors?r(u.options.attrNameProcessors,m):m,u.options.mergeAttrs?u.assignOrPush(F,w,A):l(F[_],w,A))}return F["#name"]=u.options.tagNameProcessors?r(u.options.tagNameProcessors,f.name):f.name,u.options.xmlns&&(F[u.options.xmlnskey]={uri:f.uri,local:f.local}),v.push(F)}}(this),this.saxParser.onclosetag=function(u){return function(){var f,m,A,F,w,a,C,P,B,U;if(a=v.pop(),w=a["#name"],(!u.options.explicitChildren||!u.options.preserveChildrenOrder)&&delete a["#name"],a.cdata===!0&&(f=a.cdata,delete a.cdata),B=v[v.length-1],a[S].match(/^\s*$/)&&!f?(m=a[S],delete a[S]):(u.options.trim&&(a[S]=a[S].trim()),u.options.normalize&&(a[S]=a[S].replace(/\s{2,}/g," ").trim()),a[S]=u.options.valueProcessors?r(u.options.valueProcessors,a[S],w):a[S],Object.keys(a).length===1&&S in a&&!u.EXPLICIT_CHARKEY&&(a=a[S])),e(a)&&(typeof u.options.emptyTag=="function"?a=u.options.emptyTag():a=u.options.emptyTag!==""?u.options.emptyTag:m),u.options.validator!=null&&(U="/"+function(){var q,z,G;for(G=[],q=0,z=v.length;q<z;q++)F=v[q],G.push(F["#name"]);return G}().concat(w).join("/"),function(){var q;try{return a=u.options.validator(U,B&&B[w],a)}catch(z){return q=z,u.emit("error",q)}}()),u.options.explicitChildren&&!u.options.mergeAttrs&&typeof a=="object"){if(!u.options.preserveChildrenOrder)F={},u.options.attrkey in a&&(F[u.options.attrkey]=a[u.options.attrkey],delete a[u.options.attrkey]),!u.options.charsAsChildren&&u.options.charkey in a&&(F[u.options.charkey]=a[u.options.charkey],delete a[u.options.charkey]),Object.getOwnPropertyNames(a).length>0&&(F[u.options.childkey]=a),a=F;else if(B){B[u.options.childkey]=B[u.options.childkey]||[],C={};for(A in a)N.call(a,A)&&l(C,A,a[A]);B[u.options.childkey].push(C),delete a["#name"],Object.keys(a).length===1&&S in a&&!u.EXPLICIT_CHARKEY&&(a=a[S])}}return v.length>0?u.assignOrPush(B,w,a):(u.options.explicitRoot&&(P=a,a={},l(a,w,P)),u.resultObject=a,u.saxParser.ended=!0,u.emit("end",u.resultObject))}}(this),x=function(u){return function(f){var m,A;if(A=v[v.length-1],A)return A[S]+=f,u.options.explicitChildren&&u.options.preserveChildrenOrder&&u.options.charsAsChildren&&(u.options.includeWhiteChars||f.replace(/\\n/g,"").trim()!=="")&&(A[u.options.childkey]=A[u.options.childkey]||[],m={"#name":"__text__"},m[S]=f,u.options.normalize&&(m[S]=m[S].replace(/\s{2,}/g," ").trim()),A[u.options.childkey].push(m)),A}}(this),this.saxParser.ontext=x,this.saxParser.oncdata=function(u){return function(f){var m;if(m=x(f),m)return m.cdata=!0}}()},D.prototype.parseString=function(_,S){var x;S!=null&&typeof S=="function"&&(this.on("end",function(v){return this.reset(),S(null,v)}),this.on("error",function(v){return this.reset(),S(v)}));try{return _=_.toString(),_.trim()===""?(this.emit("end",null),!0):(_=o.stripBOM(_),this.options.async?(this.remaining=_,M(this.processAsync),this.saxParser):this.saxParser.write(_).close())}catch(v){if(x=v,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw x}else return this.emit("error",x),this.saxParser.errThrown=!0}},D.prototype.parseStringPromise=function(_){return new Promise(function(S){return function(x,v){return S.parseString(_,function(u,f){return u?v(u):x(f)})}}(this))},D}(g),t.parseString=function(I,D,_){var S,x,v;return _!=null?(typeof _=="function"&&(S=_),typeof D=="object"&&(x=D)):(typeof D=="function"&&(S=D),x={}),v=new t.Parser(x),v.parseString(I,S)},t.parseStringPromise=function(I,D){var _,S;return typeof D=="object"&&(_=D),S=new t.Parser(_),S.parseStringPromise(I)}}).call(Y)}(be)),be}(function(){var t,o,y,l,g=function(r,i){for(var p in i)e.call(i,p)&&(r[p]=i[p]);function M(){this.constructor=r}return M.prototype=i.prototype,r.prototype=new M,r.__super__=i.prototype,r},e={}.hasOwnProperty;o=Oe(),t=Cn(),y=Fn(),l=en(),xt.defaults=o.defaults,xt.processors=l,xt.ValidationError=function(r){g(i,r);function i(p){this.message=p}return i}(Error),xt.Builder=t.Builder,xt.Parser=y.Parser,xt.parseString=y.parseString,xt.parseStringPromise=y.parseStringPromise}).call(Y);const Ie=Ce.createBackend(),Bn={name:"ProcessDefinitionVersionDialog",components:{},props:{open:Boolean,process:Object,definition:Object,loading:Boolean},data:()=>({storage:null,isMajor:!1,isNew:!1,information:{arcv_id:null,version:0,name:null,proc_def_id:null,snapshot:null,diff:null,timeStamp:null},isOpen:!1}),computed:{newVersion(){let t=Math.floor(this.information.version),o=this.information.version.toString().includes(".")?Number(this.information.version.toString().split(".")[1]):0;return this.isMajor?(t+=1,Number(t).toFixed(1)):(o+=1,`${t}.${o}`)},useLock(){return window.$mode=="ProcessGPT"}},watch:{open:function(t){t?this.load():this.isOpen=!1}},created(){var t=this;t.storage=$r.getStorage()},methods:{load(){var t=this;this.$try({context:t,action:async()=>{if(t.process){t.isNew=!1;let o=await Ie.getRawDefinition(t.process.processDefinitionId,{type:"bpmn"});if(o)if(t.useLock){let y=await Ie.getRawDefinition(t.process.processDefinitionId),l=await Ie.getDefinitionVersions(t.process.processDefinitionId,{sort:"desc",orderBy:"timeStamp",size:1});l.length>0?(t.information=l[0],t.information.name=y.name):t.information={arcv_id:y.id,version:0,name:y.name,proc_def_id:y.id,snapshot:o,diff:null,timeStamp:null}}else t.information.proc_def_id=t.$route.params.pathMatch[t.$route.params.pathMatch.length-1],t.information.name=t.$route.params.pathMatch[t.$route.params.pathMatch.length-1];else t.isNew=!0,t.information.proc_def_id=t.process.processDefinitionId,t.information.name=t.process.processDefinitionName}else t.isNew=!0,t.$route.query&&t.$route.query.id&&t.$route.query.name&&(t.information.id=t.$route.query.id,t.information.name=t.$route.query.name);t.isOpen=!0}})},save(){var t=this;this.$try({context:t,action:async()=>{t.information.proc_def_id&&(t.isNew&&!t.information.name||t.$emit("save",{arcv_id:t.process?`${t.process.processDefinitionId}_${t.newVersion}`:`${t.information.proc_def_id}_${t.newVersion}`,version:t.newVersion,name:t.information.name,proc_def_id:t.process?t.process.processDefinitionId:t.information.proc_def_id,prevSnapshot:t.information.snapshot,prevDiff:t.information.diff,type:"bpmn"}))},successMsg:"저장되었습니다."})},close(){this.$emit("close",!1)}}},Rn=dt("mdi-close"),Xn=dt(" SAVE ");function kn(t,o,y,l,g,e){return tt(),mt("div",null,[j(Le,{modelValue:t.isOpen,"onUpdate:modelValue":o[5]||(o[5]=r=>t.isOpen=r),"max-width":"400","onClick:outside":o[6]||(o[6]=r=>e.close())},{default:V(()=>[j(Rt,null,{default:V(()=>[j(Wr,{class:"ma-0 pa-0",style:{padding:"15px 0px 0px 25px !important"}},{default:V(()=>[dt(ut(t.isNew?"Save Definition":"Version Up"),1)]),_:1}),j(ct,{icon:"",style:{position:"absolute",right:"5px",top:"5px"},onClick:o[0]||(o[0]=r=>e.close())},{default:V(()=>[j(Bt,null,{default:V(()=>[Rn]),_:1})]),_:1}),j(Ae,null,{default:V(()=>[j(nn,null,{default:V(()=>[j(Gr,{modelValue:t.isMajor,"onUpdate:modelValue":o[1]||(o[1]=r=>t.isMajor=r),label:this.isMajor?`Major Update: ${e.newVersion}`:`Minor Update: ${e.newVersion}`,color:"primary",disabled:t.isNew,"hide-details":""},null,8,["modelValue","label","disabled"]),t.isNew?(tt(),ht(Ke,{key:0,modelValue:t.information.proc_def_id,"onUpdate:modelValue":o[2]||(o[2]=r=>t.information.proc_def_id=r),label:"ID",rules:[r=>!!r||"ID is required"],required:""},null,8,["modelValue","rules"])):It("",!0),t.isNew?(tt(),ht(Ke,{key:1,modelValue:t.information.name,"onUpdate:modelValue":o[3]||(o[3]=r=>t.information.name=r),label:"Name",rules:[r=>!!r||"Name is required"],required:""},null,8,["modelValue","rules"])):It("",!0)]),_:1})]),_:1}),j(_e,{style:{"justify-content":"right"}},{default:V(()=>[y.loading?It("",!0):(tt(),ht(ct,{key:0,onClick:o[4]||(o[4]=r=>e.save())},{default:V(()=>[Xn]),_:1})),y.loading?(tt(),ht(Yr,{key:1,color:"primary",size:25,indeterminate:"",style:{margin:"5px"}})):It("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Un=Me(Bn,[["render",kn]]);const Vr=Ce.createBackend(),Vn={name:"ProcessDefinitionVersionManager",components:{Icon:on,ProcessDefinition:zr},props:{open:Boolean,process:Object},data:()=>({storage:null,basePath:"proc_def_arcv",isOpen:!1,showXML:!1,key:0,currentIndex:0,lists:[],loading:!1}),computed:{beforeXML(){return this.lists.length>0&&this.lists[this.currentIndex-1]?this.lists[this.currentIndex-1].xml:null},currentXML(){return this.lists.length>0&&this.lists[this.currentIndex]?this.lists[this.currentIndex].xml:null},currentVersionName(){return this.lists.length>0&&this.lists[this.currentIndex]?this.lists[this.currentIndex].name:null},currentVersion(){return this.lists.length>0&&this.lists[this.currentIndex]?this.lists[this.currentIndex].version:null}},watch:{open:function(t){t?(this.currentIndex=0,this.load()):this.isOpen=!1}},created(){var t=this;t.storage=$r.getStorage()},methods:{async load(){var t=this;t.loading=!0;let o=await Vr.getDefinitionVersions(t.process.processDefinitionId,{key:"version",sort:"asc",orderBy:"timeStamp"});t.lists=o.map(y=>({...y,xml:null})),t.lists[0].xml=await t.loadXMLOfVer(t.lists[0].version),t.isOpen=!0,t.loading=!1},async handleBeforeChange(t){var o=this;o.loading=!0,o.lists[t]&&(o.lists[t].xml||(o.lists[t].xml=await o.loadXMLOfVer(o.lists[t].version)),o.loading=!1,o.key++)},changeXML(){this.$emit("changeXML",{id:this.process.processDefinitionId,name:this.currentVersionName,xml:this.currentXML})},downloadXML(){var t=this;if(t.currentXML){const o=new Blob([t.currentXML],{type:"application/xml"}),y=document.createElement("a");y.href=URL.createObjectURL(o),y.download=`${t.currentVersionName}-${t.currentVersion}.xml`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}else alert("선택된 버전의 XML 데이터가 없습니다.")},async loadXMLOfVer(t){var o=this;let y=await Vr.getDefinitionVersions(o.process.processDefinitionId,{key:"snapshot",sort:"asc",size:1,match:{version:t}});return y[0]?y[0].snapshot:null},copyToClipboard(t){if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{alert("클립보드에 복사되었습니다.")},o=>{console.error("클립보드 복사 실패:",o)});else{const o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("클립보드에 복사되었습니다.")}},close(){this.$emit("close",!1)}}},jn=dt("mdi-close"),qn={class:"mr-3"},$n=dt(" 다운로드 "),Wn=dt(" 해당 버전으로 변경 "),Gn={key:0,style:{height:"100%","overflow-y":"scroll"}},Yn={class:"diff-titles"},zn={key:0,class:"diff-title"},Kn=dt("Previous XML "),Hn=dt("mdi-content-copy"),Jn={class:"diff-title current-xml-title"},Qn=dt("Current XML "),Zn=dt("mdi-content-copy"),ti={key:0},ei={key:1,style:{"margin-top":"15px"}},ri={class:"xml"},ni={key:1,style:{height:"100%"}};function ii(t,o,y,l,g,e){const r=wt("vuediff"),i=wt("process-definition");return tt(),mt("div",null,[j(Le,{modelValue:t.isOpen,"onUpdate:modelValue":o[7]||(o[7]=p=>t.isOpen=p),"max-width":"100%",style:{height:"-webkit-fill-available"},persistent:""},{default:V(()=>[j(Rt,{style:{height:"100%"}},{default:V(()=>[j(He,{class:"ma-0 pa-0"},{default:V(()=>[j(Wr,null,{default:V(()=>[dt("Version Management ["+ut(e.currentVersionName)+"("+ut(e.currentVersion)+")] ",1),t.loading?(tt(),ht(Yr,{key:0,color:"primary",size:25,indeterminate:"",style:{"margin-left":"5px"}})):It("",!0)]),_:1}),j(sn),j(ct,{icon:"",style:{position:"absolute",right:"5px",top:"5px"},onClick:o[0]||(o[0]=p=>e.close())},{default:V(()=>[j(Bt,null,{default:V(()=>[jn]),_:1})]),_:1})]),_:1}),j(He,{class:"ma-0 pa-0 ml-4",align:"center"},{default:V(()=>[lt("div",qn,[j(Gr,{modelValue:t.showXML,"onUpdate:modelValue":o[1]||(o[1]=p=>t.showXML=p),label:t.showXML?"XML":"BPMN","hide-details":"",color:"primary"},null,8,["modelValue","label"])]),j(ct,{onClick:o[2]||(o[2]=p=>e.downloadXML()),variant:"text"},{default:V(()=>[$n]),_:1}),j(ct,{onClick:o[3]||(o[3]=p=>e.changeXML()),variant:"text",color:"primary",disabled:t.loading},{default:V(()=>[Wn]),_:1},8,["disabled"])]),_:1}),j(Ae,{style:{height:"550px"}},{default:V(()=>[t.showXML?(tt(),mt("div",Gn,[lt("div",Yn,[e.currentXML&&e.beforeXML?(tt(),mt("div",zn,[Kn,j(ct,{size:"x-small",onClick:o[4]||(o[4]=p=>e.copyToClipboard(e.beforeXML))},{default:V(()=>[j(Bt,{"x-small":""},{default:V(()=>[Hn]),_:1})]),_:1})])):It("",!0),lt("div",Jn,[Qn,j(ct,{size:"x-small",onClick:o[5]||(o[5]=p=>e.copyToClipboard(e.currentXML))},{default:V(()=>[j(Bt,{"x-small":""},{default:V(()=>[Zn]),_:1})]),_:1})])]),e.currentXML&&e.beforeXML?(tt(),mt("div",ti,[j(r,{prev:e.beforeXML,current:e.currentXML,mode:"split",theme:"light",language:"xml"},null,8,["prev","current"])])):(tt(),mt("div",ei,[lt("pre",null,[lt("code",ri,ut(e.currentXML),1)])]))])):(tt(),mt("div",ni,[(tt(),ht(i,{class:"process-definition-resize",bpmn:e.currentXML,isViewMode:!0,key:t.key},null,8,["bpmn"]))]))]),_:1}),j(_e,null,{default:V(()=>[j(fn,{modelValue:t.currentIndex,"onUpdate:modelValue":o[6]||(o[6]=p=>t.currentIndex=p),step:"1",min:"0",max:t.lists.length-1,"show-ticks":"always","tick-size":"4",onEnd:e.handleBeforeChange,"hide-details":!0,style:{padding:"0","margin-right":"20px","margin-left":"30px"}},null,8,["modelValue","max","onEnd"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const oi=Me(Vn,[["render",ii],["__scopeId","data-v-37d233e3"]]);class jr extends an{constructor(o,y){super(o,y);const l=JSON.stringify(o.processDefinitionMap),g=JSON.stringify(o.processDefinition);this.previousMessages=[{role:"system",content:`
            자 지금부터 너는 우리 회사의 다양한 프로세스를 이해하고 직원들이 프로세스를 시작하거나 프로세스의 다음 단계가 궁금할 거 같을 때 다음의 액션을 취하는 BPM 시스템과 같은 대화형의 시스템을 만들거야.

            - 프로세스 정의: 내가 업무 진행 중 프로세스 변경을 이렇게 하자고 말하면 해당 프로세스 정의가 그 때부터 바뀌는 거야.

            - 프로세스 레벨: 우리 회사 프로세스는 Mega Process, Major Process, Sub Process 로 총 3 Level 로 이루어져 있어. 사용자가 정의하는 프로세스는 Sub Process 이고, 프로세스를 정의 할 때 Mega, Major Process 의 정보가 없다면 우리 회사의 기존 프로세스를 참고해서 Mega, Major Process 의 정보도 함께 리턴해줘.

            기존 프로세스 정보:
            ${g}, 
            ${l} 
            
            결과는 프로세스에 대한 설명과 함께 valid 한 json 으로 표현해줘. markdown 으로, three backticks 로 감싸. 예를 들면 :
            checkPoints가 없으면 비어있는 Array로 생성해줘.
            activity에 있는 role이 roles에 없으면 추가적으로 생성해줘.
            프로세스에 대한 설명입니다.

            "sequences" and "events" are items that must be created no matter what.
            In "events", "Start Event" and "End Event" must be created.
            "sequences" must include a "Start Event" and an "End Event".
            The "source" of the first object in the "sequences" must be the id of the start event, and the "target" of the last object must be the id of the end event.
            Additionally, when creating each "activity", "gateway", and "event", each "id" must be created with an id that exists in "sequences", and objects with that id must not only exist in "sequences". must be created.
            
            For these four cases, you must to create a "gateway" to handle them.
            1. When there are conditions
            2. When the "source" and "target" of the "sequence" need to be created identically.
            3. When returning to the previous task or branching processing is required according to certain conditions.
            4. When a specific task must be repeated based on conditions.

            Even if the creation result is null, "", or [], an empty value must be generated by mapping it to the corresponding key according to the provided json format.
            When creating a "sequences", it is recommended to create "conditions" if possible.

            \`\`\`

            {
              "megaProcessId": "",
              "majorProcessId": "",
              "processDefinitionName": "프로세스 명",
              "processDefinitionId": "String-based unique id of the processDefinition in English not including space",
              "description": "한글로 된 프로세스 설명",
              "data": [{
                 "name": "process data name",
                 "description": "description of process data",
                 "type": "Text" | "Number" | "Date" | "Boolean" | "Location" | "Document" | "Picture",
              }],
              "roles": [{
                 "name": "role name",
                 "resolutionRule": "how to find the actual user mapping for the role"
              }],
              "events": [
                {
                  "id": "event_id",
                  "name": "event name",
                  "type": "StartEvent | EndEvent | IntermediateCatchEvent | MessageEvent | TimerEvent | ErrorEvent | ConditionalEvent | SignalEvent | TerminationEvent | LinkEvent | CompensationEvent | MultipleEvent | ParallelEvent | EscalationEvent | CancelEvent",
                  "description": "프로세스의 시작, 종료 또는 중간 이벤트 설명",
                  "trigger": "이벤트 트리거 조건 (if applicable)"
                }
              ],
              "activities": [{
                  "id": "String-based unique id of the activity not including space",
                  "name": "activity name",
                  "type": "UserActivity" | "EMailActivity" | "ScriptActivity",
                  "description": "description of activity",
                  "instruction": "instruction to user",
                  "role": "role name", // You must use the name among the created "roles".
                  "inputData": ["name of data for input"],
                   "outputData": [
                     "name of data for output"
                   ],
                   "checkpoints":["checkpoint 1", "checkpoint 2"]
              }],
              "gateways": [
                {
                  "id": "gateway_id",
                  "name": "gateway name",
                  "type": "ExclusiveGateway | ParallelGateway | InclusiveGateway | EventBasedGateway",
                  "description": "선택적 또는 병렬 프로세스 흐름을 제어하는 게이트웨이 설명",
                  "condition": "기존 프로세스 정보중 "data" 내에 존재하는 값만을 사용하여 condition 을 생성해야한다. "data" 목록을 보고 condition 생성에 필요한 "data" 의 "name" 만으로 분기 조건, 조건문을 생성해야함."
                  "role": "role name" // You must use the name among the created "roles".
                }
              ]
              "sequences": [ 
                {
                    "source": "activity id of source activity or gateway id of source gateway", e.g. start_event_id, activity_id, gateway_id ...
                    "target": "activity id of target activity or gateway id of target gateway", e.g. end, activity_id, gateway_id ...
                    "condition": "기존 프로세스 정보중 "data" 내에 존재하는 값만을 사용하여 condition 을 생성해야한다. "data" 목록을 보고 condition 생성에 필요한 "data" 의 "name" 만으로 생성해야함." // 기존 프로세스 정보가 존재하는 경우에만 생성해야하며, 생성시 기존 프로세스 정보를 참고하여 컨디션을 생성해야한다.
                }
              ],
            }
             
            \`\`\`

            - 프로세스 변경: 프로세스 정의의 일 부분이 변경될 때는 다음과 같이 변경된 부분만 리턴해줘:

              이때 지킬 사항:
               1.  {modifications: [..]} 내에 여러개의 항목으로 넣어줘.
               2.  액티비티, 게이트웨이, 이벤트 추가인 경우는 시퀀스도 꼭 연결해줘.
               3.  액티비티, 게이트웨이, 이벤트가 삭제되는 경우는 나와 연결된 앞뒤 액티비티 간의 시퀀스도 삭제하되, 삭제된 액티비티의 이전 단계와 다음단계의 액티비티를 시퀀스로 다시 연결해줘.
               4.  생성될 모든 값들은 기존 프로세스의 정보를 참고하여 생성해야한다.
               5.  추가될 액티비티, 게이트웨이의 "role" 은 기존에 존재하는 "roles" 에 존재하는 role 중 하나를 사용해야한다. "roles" 에 존재하지 않는 role 을 사용할 수는 없다.
            
            \`\`\`
              { 
                "modifications": [
                  
                  {
                    "action": "replace" | "add" | "delete",
                    "targetJsonPath": "$.activities[?(@.id=='request_vacation')]", // action 이 add 인 경우 "$.activities" 만 리턴. e.g. "$.sequences", action 이 add 가 아닌 경우 "$.activities[?(@.id=='request_vacation')]" 와 같이 수정, 삭제될 Path 의 상위 목록("activities", "sequences" 등...)을 참고하여 "$.activities" 뒤에 수정, 삭제될 값을 찾을 수 있는 필터("[?(@.id=='request_vacation')]") 를 반드시 포함하여 리턴.  // e.g. "$.sequences[?(@.source=='leave_request_activity' && @.target=='leave_approval_activity')].condition"
                    "value": {...} //delete 인 경우는 불필요, replace의 경우 기존 value에서 변경된 부분을 수정하여 생략 하지 않고 value로 리턴
                  }   
                  
                ]
              }
            \`\`\`



            - 프로세스 설명: 전체적인 프로세스를 설명해주면돼. 예를들어 휴가신청 프로세스의 각 단계와 담당자가 누군지 등을 설명해주면 돼
            설명의 결과도 위의 프로세스 정의의 json format 을 따라 리턴해줘
            
            
            사용자들의 역할은 다음과 같아:
            
            - 직원: 업무를 지시 받고 처리하는 사람
            - 프로세스 관리자: 프로세스 정의의 변경 권한을 갖고 있는 사람.
            - BPM시스템: 이 시스템은 Business Process Management 기능을 수행하는 바로 너가 해야 할 일이야.
            
            
            알았으면 OK 라고만 답해.
            

`}]}createPrompt(){return this.client.newMessage}}const Mt=Ce.createBackend();hn({objectHash:function(t,o){return"$$index:"+o}});const si={mixins:[un],name:"ProcessDefinitionChat",components:{Chat:wn,AppBaseCard:gn,ChatListing:mn,ChatDetail:dn,ChatProfile:yn,ProcessDefinition:zr,ChatGenerator:jr,ProcessDefinitionVersionDialog:Un,ProcessDefinitionVersionManager:oi},data:()=>({prompt:"",processDefinition:null,bpmn:null,changedXML:"",projectName:"",path:"proc_def",definitionChangeCount:0,isChanged:!1,chatInfo:{title:"processDefinition.cardTitle",text:"processDefinition.processDefinitionExplanation"},processDefinitionMap:null,modeler:null,lock:!1,disableChat:!1,isViewMode:!1,versionDialog:!1,verMangerDialog:!1,loading:!1,deleteDialog:!1,isDeleted:!1}),async created(){$try(async()=>{if(await this.init(),this.generator=new jr(this,{isStream:!0,preferredLanguage:"Korean"}),this.$store.state.messages){const t=JSON.stringify(this.$store.state.messages);this.prompt=`아래 대화 내용에서 프로세스를 유추하여 프로세스 정의를 생성해주세요. 이때 가능한 프로세스를 일반화하여 작성:
                ${t}.`,this.$store.commit("clearMessages")}})},watch:{$route:{deep:!0,handler(t,o){if(t.path!==o.path){if(!(t.path.startsWith("/definitions")||t.path.startsWith("/forms")))return;t.params.pathMatch&&this.init()}}}},computed:{fullPath(){let t=this.$route.params.pathMatch.join("/");return t.startsWith("/")&&(t=fullPath.substring(1)),t}},async beforeRouteLeave(t,o,y){const e=await Vt().getModeler.saveXML({format:!0,preamble:!0});o.path==="/definitions/chat"&&e&&e.xml&&!this.isViewMode?window.confirm("You have unsaved changes. Are you sure you want to leave?")?y():y(!1):y()},methods:{beforeDelete(){this.bpmn&&(this.deleteDialog=!0)},async deleteProcess(){var t=this;t.$try({context:t,action:async()=>{await Mt.deleteDefinition(t.fullPath),t.deleteDialog=!1,t.isDeleted=!0,t.EventBus.emit("definitions-updated")}})},triggerFileInput(){this.$refs.fileInput.click()},handleFileChange(t){let o=this;const y=t.target.files[0];if(!y)return;const l=new FileReader;l.onload=g=>{const e=g.target.result;o.loadBPMN(e)},l.readAsText(y)},checkedLock(t){var o=this;o.$try({context:o,action:async()=>{const y=await o.getData(`lock/${t}`,{key:"id"});y&&y.id&&y.user_id&&y.user_id==this.userInfo.email?(o.lock=!1,o.disableChat=!1,o.isViewMode=!1):(o.lock=!0,o.disableChat=!0,o.isViewMode=!0)}})},toggleLock(){var t=this;t.$try({context:t,action:async()=>{t.lock?(t.processDefinition&&t.useLock&&await t.storage.putObject("lock",{id:t.processDefinition.processDefinitionId,user_id:t.userInfo.email}),t.disableChat=!1,t.isViewMode=!1,t.lock=!1,t.definitionChangeCount++):t.toggleVersionDialog(!0)}})},toggleVerMangerDialog(t){this.verMangerDialog=t},toggleVersionDialog(t){this.versionDialog=t},saveDefinition(t){var o=this;o.$try({context:o,action:async()=>{o.loading=!0;const g=await Vt().getModeler.saveXML({format:!0,preamble:!0});g&&g.xml&&window.$mode!="uEngine"&&(o.processDefinition=await o.convertXMLToJSON(g.xml),t.name&&t.name!=""&&(o.processDefinition.processDefinitionName=t.name),t.definition=o.processDefinition),await o.saveModel(t,g.xml),o.bpmn=g.xml,o.disableChat=!0,o.isViewMode=!0,o.lock=!0,o.definitionChangeCount++,o.loading=!1,o.toggleVersionDialog(!1)},onFail:y=>{console.log(y)}})},changeXML(t){var o=this;o.$try({context:o,action:async()=>{t&&t.id&&(await o.storage.putObject(`${o.path}`,{id:t.id,name:t.name,bpmn:t.xml}),o.bpmn=t.xml,o.definitionChangeCount++,o.toggleVerMangerDialog(!1))}})},loadBPMN(t){this.bpmn=t,this.definitionChangeCount++},removePositionKey(t){if(Array.isArray(t))return t.map(o=>removePositionKey(o));if(typeof t=="object"&&t!==null){const o={};return Object.keys(t).forEach(y=>{y!=="position"&&(o[y]=removePositionKey(t[y]))}),o}return t},async updateDefinition(){let y=await Vt().getModeler.saveXML({format:!0,preamble:!0});console.log(y.xml),this.bpmn=y.xml,this.definitionChangeCount++,this.isChanged=!0},async loadData(t){const o=this;o.$try({context:o,action:async()=>{o.isDeleted=!1;let y=o.$route.params.pathMatch.join("/");y.startsWith("/")&&(y=y.substring(1));let l=this.$route.params.pathMatch[this.$route.params.pathMatch.length-1];if(y&&l!="chat"){let g=await Mt.getRawDefinition(y,{type:"bpmn"});if(g&&(o.bpmn=g,o.definitionChangeCount++),o.useLock){const e=await Mt.getRawDefinition(y);e&&(o.processDefinition=e.definition,o.projectName=o.processDefinition.processDefinitionName),o.checkedLock(l)}else o.processDefinition={processDefinitionId:l,processDefinitionName:l}}else l=="chat"&&(o.processDefinition=null,o.projectName=null,o.bpmn=null,o.$route.query&&o.$route.query.id&&(o.processDefinition={processDefinitionId:o.$route.query.id},o.$route.query.name&&(o.projectName=o.$route.query.name,o.processDefinition.processDefinitionName=o.projectName)),o.lock=!1,o.disableChat=!1,o.isViewMode=!1,o.definitionChangeCount++);o.processDefinitionMap=await Mt.getProcessDefinitionMap()}})},beforeSendMessage(t){this.sendMessage(t)},extractPropertyNameAndIndex(t){let o;return o=t.match(/^\$\.(\w+)\[(\d+)\]$/),o?{propertyName:o[1],index:parseInt(o[2],10)}:(o=t.match(/^\$\.(\w+)\[\?(.*)\]$/),o?{propertyName:o[1],index:o.index}:null)},modificationAdd(t){let o=this.extractPropertyNameAndIndex(t.targetJsonPath);o?this.processDefinition[o.propertyName].splice(o.index,0,t.value):this.processDefinition[t.targetJsonPath.replace("$.","")]&&this.processDefinition[t.targetJsonPath.replace("$.","")].push(t.value)},modificationReplace(t){let o=this.extractPropertyNameAndIndex(t.targetJsonPath);this.processDefinition[o.propertyName][o.index]=t.value},modificationRemove(t){let o=this.extractPropertyNameAndIndex(t.targetJsonPath);this.processDefinition[o.propertyName].splice(o.index,1)},async afterModelCreated(t){let o;try{if(o=this.extractJSON(t),o){let y=cn(o);y.processDefinitionId&&(this.processDefinition=y,this.bpmn=this.createBpmnXml(this.processDefinition),this.definitionChangeCount++)}}catch(y){console.log(o),console.log(y)}},afterGenerationFinished(t){let o=this.extractJSON(t);if(o){let y=JSON.parse(o);y.modifications&&(y.modifications.forEach(l=>{l.action=="replace"?(this.jsonPathReplace(this.processDefinition,l.targetJsonPath,l.value),console.log(this.processDefinition),this.bpmn=this.createBpmnXml(this.processDefinition)):l.action=="add"?(this.modificationAdd(l),this.bpmn=this.createBpmnXml(this.processDefinition)):l.action=="delete"&&(this.modificationRemove(l),this.bpmn=this.createBpmnXml(this.processDefinition))}),this.definitionChangeCount++)}this.isChanged=!0},afterModelStopped(t){},async convertXMLToJSON(t){try{let r=function(D){return Array.isArray(D)?D:D?[D]:[]};t=t.replace(/\$type/g,"_type");const y=await new xt.Parser({explicitArray:!1,mergeAttrs:!0}).parseStringPromise(t),l=y["bpmn:definitions"]&&y["bpmn:definitions"]["bpmn:process"]?y["bpmn:definitions"]["bpmn:process"]:{},g=l["bpmn:startEvent"]||{},e=l["bpmn:endEvent"]||{},i=r(l["bpmn:laneSet"]?l["bpmn:laneSet"]["bpmn:lane"]:[]),p=r(l["bpmn:userTask"]||[]),M=r(l["bpmn:scriptTask"]||[]),T=r(l["bpmn:sequenceFlow"]||[]),b=r(l["bpmn:exclusiveGateway"]||[]),N=l["bpmn:extensionElements"]&&l["bpmn:extensionElements"]["uengine:properties"]?(Array.isArray(l["bpmn:extensionElements"]["uengine:properties"]["uengine:variable"])?l["bpmn:extensionElements"]["uengine:properties"]["uengine:variable"]:[l["bpmn:extensionElements"]["uengine:properties"]["uengine:variable"]]).map(D=>({name:D.name,description:D.name+" description",type:D.type})):[];return{processDefinitionName:l.id||"Unknown",processDefinitionId:l.id||"Unknown",description:"process.description",data:N,roles:i.map(D=>({name:D.name,resolutionRule:D.name==="applicant"?"initiator":"system"})),events:[{name:g.id||"StartEvent",id:g.id||"StartEvent",type:"StartEvent",description:"start event",role:i[0]?i[0].name:"Unknown"},{name:e.id||"EndEvent",id:e.id||"EndEvent",type:"EndEvent",description:"end event",role:i.length>0?i[i.length-1].name:"Unknown"}],activities:[...p.map(D=>{try{let _={};if(_.name=D.name,_.id=D.id,_.type="UserActivity",_.description=`${D.name} description`,_.instruction=`${D.name} instruction`,_.role=i.find(x=>(Array.isArray(x["bpmn:flowNodeRef"])?x["bpmn:flowNodeRef"]:[x["bpmn:flowNodeRef"]]).includes(D.id))?i.find(x=>(Array.isArray(x["bpmn:flowNodeRef"])?x["bpmn:flowNodeRef"]:[x["bpmn:flowNodeRef"]]).includes(D.id)).name:"Unknown",D["bpmn:extensionElements"]&&D["bpmn:extensionElements"]["uengine:properties"]){let x=JSON.parse(D["bpmn:extensionElements"]["uengine:properties"]["uengine:json"]);_.inputData=x&&x.parameters?x.parameters.filter(v=>v.direction==="IN").map(v=>v.variable.name):[],_.outputData=x&&x.parameters?x.parameters.filter(v=>v.direction==="OUT").map(v=>v.variable.name):[]}else _.inputData=[],_.outputData=[];return _.tool="formHandler:"+JSON.parse(D["bpmn:extensionElements"]["uengine:properties"]["uengine:json"]).variableForHtmlFormContext.name,_}catch{}}),...M.map(D=>({name:D.name,id:D.id,type:"ScriptActivity",description:D.name+" description",instruction:D.name+" instruction",role:i.find(_=>(Array.isArray(_["bpmn:flowNodeRef"])?_["bpmn:flowNodeRef"]:[_["bpmn:flowNodeRef"]]).includes(D.id))?i.find(_=>(Array.isArray(_["bpmn:flowNodeRef"])?_["bpmn:flowNodeRef"]:[_["bpmn:flowNodeRef"]]).includes(D.id)).name:"Unknown",pythonCode:D["bpmn:extensionElements"]&&D["bpmn:extensionElements"]["uengine:properties"]?JSON.parse(D["bpmn:extensionElements"]["uengine:properties"]["uengine:json"]).script:""}))],gateways:[...b.map(D=>({id:D.id||"Gateway",name:D.name||"Gateway",type:"ExclusiveGateway",description:D.name+" description",role:i.find(_=>(Array.isArray(_["bpmn:flowNodeRef"])?_["bpmn:flowNodeRef"]:[_["bpmn:flowNodeRef"]]).includes(D.id))?i.find(_=>(Array.isArray(_["bpmn:flowNodeRef"])?_["bpmn:flowNodeRef"]:[_["bpmn:flowNodeRef"]]).includes(D.id)).name:"Unknown",condition:D["bpmn:extensionElements"]&&D["bpmn:extensionElements"]["uengine:properties"]&&JSON.parse(D["bpmn:extensionElements"]["uengine:properties"]["uengine:json"]).condition||""}))],sequences:T.map(D=>({source:D.sourceRef,target:D.targetRef,condition:D["bpmn:extensionElements"]&&D["bpmn:extensionElements"]["uengine:properties"]&&JSON.parse(D["bpmn:extensionElements"]["uengine:properties"]["uengine:json"]).condition||""}))}}catch(o){throw console.error("Error parsing XML:",o),o}},async saveModel(t,o){var y=this;y.$try({context:y,action:async()=>{if(window.$mode=="uEngine")await Mt.putRawDefinition(o,t.proc_def_id,t);else{if(y.processDefinition||(y.processDefinition={}),y.processDefinition.processDefinitionId||(y.processDefinition.processDefinitionId=null),y.processDefinition.processDefinitionName||(y.processDefinition.processDefinitionName=null),y.processDefinition.processDefinitionId=t.proc_def_id?t.proc_def_id:prompt("please give a ID for the process definition"),!y.processDefinition.processDefinitionName&&t.name?y.processDefinition.processDefinitionName=t.name:!y.processDefinition.processDefinitionName&&!t.name&&(y.processDefinition.processDefinitionName=prompt("please give a name for the process definition")),y.projectName=y.processDefinition.processDefinitionName,!y.processDefinition.processDefinitionId||!y.processDefinition.processDefinitionName)throw new Error("processDefinitionId or processDefinitionName is missing");await Mt.putRawDefinition(o,t.proc_def_id,t)}y.$route.fullPath=="/definitions/chat"&&(y.$router.push(`/definitions/${t.proc_def_id}`),y.EventBus.emit("definitions-updated"))},catch:l=>{console.log(l)}})},async saveToVectorStore(t){await new pn.VectorStorage({openAIApiKey:this.openaiToken}).addText(JSON.stringify(t),{category:t.processDefinitionId})},generateElement(t,o,y,l,g,e,r){var i=this;const p=i.getComponentByName(t);return p?(e||(e=i.uuid()),o||(o=500),y||(o=500),r||(r=null),p.computed.createNew(r,e,o,y,l,g)):null},getComponentByName:function(t){var o;return $.each(window.bpmnComponents,function(y,l){l.default.name==t&&(o=l)}),o},taskMapping(t){switch(t){case"ScriptActivity":return"bpmn:scriptTask";case"EmailActivity":return"bpmn:sendTask";default:return"bpmn:userTask"}},createBpmnXml(t){let o=this;const l=new DOMParser().parseFromString('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:uengine="http://uengine" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_0bfky9r" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="16.4.0"></bpmn:definitions>',"application/xml"),g=l.documentElement;g.setAttribute("id","Definitions_"+t.processDefinitionId),g.setAttribute("targetNamespace","http://bpmn.io/schema/bpmn"),g.setAttribute("exporter","Custom BPMN Modeler"),g.setAttribute("exporterVersion","1.0");const e=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:collaboration");e.setAttribute("id","Collaboration_1"),g.appendChild(e);const r=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:process");r.setAttribute("id",t.processDefinitionId),r.setAttribute("isExecutable","true"),g.appendChild(r);const i=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:participant");i.setAttribute("id","Participant"),i.setAttribute("name","Participant"),i.setAttribute("processRef",t.processDefinitionId),e.appendChild(i);const p=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:extensionElements"),M=l.createElementNS("http://uengine","uengine:properties");t.data&&t.data.forEach(w=>{const a=l.createElementNS("http://uengine","uengine:variable");a.setAttribute("name",w.name),a.setAttribute("type",w.type),M.appendChild(a)}),p.appendChild(M),r.appendChild(p);const T={};if(t.activities&&t.activities.forEach(w=>{T[w==null?void 0:w.role]||(T[w==null?void 0:w.role]=[]),T[w.role].push(w.id)}),t.gateways&&t.gateways.forEach(w=>{T[w==null?void 0:w.role]||(T[w==null?void 0:w.role]=[]),T[w.role].push(w.id)}),t.roles){const w=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:laneSet");w.setAttribute("id","LaneSet_1"),r.appendChild(w),t.roles.forEach((a,C)=>{const P=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:lane");P.setAttribute("id","Lane_"+C),P.setAttribute("name",a.name),w.appendChild(P),T[a.name]&&T[a.name].forEach(B=>{const U=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:flowNodeRef");U.textContent=B,P.appendChild(U)})})}let b={},N={},I=140,D={};t.sequences&&t.sequences.forEach((w,a)=>{D[w.source]||(D[w.source]=I,I+=120),a===t.sequences.length-1&&(D[w.target]=I+=130);const C=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:sequenceFlow");C.setAttribute("id","SequenceFlow_"+w.source+"_"+w.target),C.setAttribute("name",w.name?w.name:""),C.setAttribute("sourceRef",w.source),C.setAttribute("targetRef",w.target);let P=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:extensionElements"),B=l.createElementNS("http://uengine","uengine:properties"),U=l.createElementNS("http://uengine","uengine:json");U.setAttribute("key","condition"),U.textContent=JSON.stringify({condition:w.condition?w.condition:""}),B.appendChild(U),P.appendChild(B),C.appendChild(P),r.appendChild(C),N[w.source]="SequenceFlow_"+w.source+"_"+w.target,b[w.target]="SequenceFlow_"+w.source+"_"+w.target}),t.activities&&t.activities.forEach((w,a)=>{var gt,Tt;const C=o.taskMapping(w.type),P=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL",C);if(P.setAttribute("id",w.id),P.setAttribute("name",w.name),N[w.id]){let ot=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:outgoing");ot.textContent=N[w.id],P.appendChild(ot)}if(b[w.id]){let ot=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:incoming");ot.textContent=b[w.id],P.appendChild(ot)}let B=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:extensionElements"),U=l.createElementNS("http://uengine","uengine:properties"),q=l.createElementNS("http://uengine","uengine:json");q.setAttribute("key","condition");let z=[],G=[];(gt=w==null?void 0:w.inputData)==null||gt.forEach(ot=>{z.push({argument:{text:ot},variable:{name:ot},direction:"OUT"})}),(Tt=w==null?void 0:w.outputData)==null||Tt.forEach(ot=>{G.push({argument:{text:ot},variable:{name:ot},direction:"IN"})});let W={role:{name:w.role},parameters:[...z,...G]};q.textContent=JSON.stringify(W),U.appendChild(q),B.appendChild(U),P.appendChild(B),t.events&&t.events.forEach((ot,Q)=>{const nt=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:"+ot.type);nt.setAttribute("id",ot.id),nt.setAttribute("name",ot.name),r.appendChild(nt)}),r.appendChild(P)}),t.gateways&&t.gateways.forEach(w=>{const a=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:"+w.type);a.setAttribute("id",w.id),a.setAttribute("name",w.name);let C=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:extensionElements"),P=l.createElementNS("http://uengine","uengine:properties"),B=l.createElementNS("http://uengine","uengine:json");if(B.setAttribute("key","condition"),B.textContent=JSON.stringify({condition:w.condition?w.condition:""}),P.appendChild(B),C.appendChild(P),a.appendChild(C),N[w.id]){let U=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:outgoing");U.textContent=N[w.id],a.appendChild(U)}if(b[w.id]){let U=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/MODEL","bpmn:incoming");U.textContent=b[w.id],a.appendChild(U)}r.appendChild(a)});const _=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNDiagram");_.setAttribute("id","BPMNDiagram_1"),g.appendChild(_);const S=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNPlane");S.setAttribute("id","BPMNPlane_1"),S.setAttribute("bpmnElement","Collaboration_1"),_.appendChild(S);let x=(t==null?void 0:t.roles.length)>0?(t==null?void 0:t.roles.length)*100:100;const v=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");v.setAttribute("id","Participant_1"),v.setAttribute("bpmnElement","Participant");const u=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");u.setAttribute("x","70"),u.setAttribute("y","100"),u.setAttribute("width",`${I+30}`),u.setAttribute("height",x),v.appendChild(u),S.appendChild(v);let f={},m={};return t.roles&&t.roles.forEach((w,a)=>{const C=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");C.setAttribute("id",`BPMNShape_${a}`),C.setAttribute("bpmnElement",`Lane_${a}`),C.setAttribute("isHorizontal",!0);const P=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");P.setAttribute("x","100"),P.setAttribute("y",`${100+a*100}`),P.setAttribute("width",`${I}`),P.setAttribute("height","100"),C.appendChild(P),S.appendChild(C),f[w.name]={x:P.getAttribute("x"),y:P.getAttribute("y")}}),t.activities&&t.activities.forEach((w,a)=>{if(!w.role)return!1;let C=D[w.id]?D[w.id]-20:I+120,P=parseInt(f[w.role].y);a>0&&t.activities[a-1].role!==w.role&&(C=I+40);const B=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");B.setAttribute("id",`BPMNShape_${w.id}`),B.setAttribute("bpmnElement",w.id);const U=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");U.setAttribute("x",C),U.setAttribute("y",P+10),U.setAttribute("width",100),U.setAttribute("height",80),m[w.id]={x:C,y:P+10,width:100,height:80},B.appendChild(U),S.appendChild(B),f[w.role].x=C+120,I=C+120}),t.gateways&&t.gateways.forEach(w=>{let a=D[w.id]?D[w.id]:f[w.role].x+120,C=parseInt(f[w.role].y);const P=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");P.setAttribute("id",`Shape_${w.id}`),P.setAttribute("bpmnElement",w.id);const B=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");B.setAttribute("x",a),B.setAttribute("y",C+25),B.setAttribute("width","50"),B.setAttribute("height","50"),P.appendChild(B),S.appendChild(P),m[w.id]={x:a,y:C+25,width:50,height:50},f[w.role].x+=120}),t.events&&t.events.forEach(w=>{let a,C;w.type=="StartEvent"?(a=160,C=parseInt(f[t.activities[0].role].y)+33):w.type=="EndEvent"?(a=D[w.id]?D[w.id]:I+120,C=parseInt(f[t.activities[t.activities.length-1].role].y)+33):(a=200,C=200);const P=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");P.setAttribute("id",`Shape_${w.id}`),P.setAttribute("bpmnElement",w.id);const B=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");B.setAttribute("x",a),B.setAttribute("y",C),B.setAttribute("width","34"),B.setAttribute("height","34"),P.appendChild(B);const U=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNLabel"),q=l.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");q.setAttribute("x",a-15),q.setAttribute("y",C+40),q.setAttribute("width","64"),q.setAttribute("height","14"),U.appendChild(q),P.appendChild(U),S.appendChild(P),m[w.id]={x:a,y:C,width:34,height:34}}),t.sequences&&t.sequences.forEach(w=>{if(!m[w.source]||!m[w.target])return!1;const a=l.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNEdge");a.setAttribute("id",`BPMNEdge_${w.source}_${w.target}`),a.setAttribute("bpmnElement","SequenceFlow_"+w.source+"_"+w.target);let C,P,B,U;C=parseInt(m[w.source].x)+parseInt(m[w.source].width),P=parseInt(m[w.source].y)+parseInt(m[w.source].height)/2,B=parseInt(m[w.target].x),U=parseInt(m[w.target].y)+parseInt(m[w.target].height)/2;const q=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");if(q.setAttribute("x",C),q.setAttribute("y",P),a.appendChild(q),P===U){const z=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");z.setAttribute("x",B),z.setAttribute("y",U),a.appendChild(z)}else{const z=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");z.setAttribute("x",C+25),z.setAttribute("y",P),a.appendChild(z);const G=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");G.setAttribute("x",C+25),G.setAttribute("y",U),a.appendChild(G);const W=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");W.setAttribute("x",B),W.setAttribute("y",U),a.appendChild(W);const gt=l.createElementNS("http://www.omg.org/spec/DD/20100524/DI","di:waypoint");gt.setAttribute("x",B),gt.setAttribute("y",U),a.appendChild(gt)}S.appendChild(a)}),new XMLSerializer().serializeToString(l)}}},ai={class:"no-scrollbar"},ui={class:"d-flex"},ci={key:0},li={key:0},pi={key:1},fi={key:1},hi={class:"d-flex"},di={key:0},mi={key:1};function yi(t,o,y,l,g,e){const r=wt("process-definition"),i=wt("process-definition-version-dialog"),p=wt("ProcessDefinitionVersionManager"),M=wt("Icon"),T=wt("HistoryIcon"),b=wt("TrashIcon"),N=wt("Chat"),I=wt("AppBaseCard");return tt(),ht(Rt,{elevation:"10",style:{"background-color":"rgba(255, 255, 255, 0)"},class:ln({"is-deleted":t.isDeleted})},{default:V(()=>[j(I,null,{leftpart:V(()=>[(tt(),ht(r,{class:"process-definition-resize",bpmn:t.bpmn,processDefinition:t.processDefinition,key:t.definitionChangeCount,isViewMode:t.isViewMode,definitionPath:e.fullPath,definitionChat:this,onUpdate:e.updateDefinition},null,8,["bpmn","processDefinition","isViewMode","definitionPath","onUpdate"])),j(i,{process:t.processDefinition,loading:t.loading,open:t.versionDialog,definitionPath:e.fullPath,onClose:e.toggleVersionDialog,onSave:e.saveDefinition},null,8,["process","loading","open","definitionPath","onClose","onSave"]),j(p,{process:t.processDefinition,open:t.verMangerDialog,onClose:e.toggleVerMangerDialog,onChangeXML:e.changeXML},null,8,["process","open","onClose","onChangeXML"])]),rightpart:V(()=>[lt("div",ai,[j(N,{prompt:t.prompt,name:t.projectName,messages:t.messages,chatInfo:t.chatInfo,userInfo:t.userInfo,lock:t.lock,disableChat:t.disableChat,onSendMessage:e.beforeSendMessage,onSendEditedMessage:t.sendEditedMessage,onStopMessage:t.stopMessage},{"custom-tools":V(()=>[lt("div",ui,[j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",type:"file",class:"text-medium-emphasis",onClick:e.triggerFileInput}),{default:V(()=>[j(M,{icon:"material-symbols:upload",width:"24",height:"24"})]),_:2},1040,["onClick"])]),default:V(()=>[lt("span",null,ut(t.$t("chat.import")),1)]),_:1}),lt("input",{type:"file",ref:"fileInput",onChange:o[0]||(o[0]=(...D)=>e.handleFileChange&&e.handleFileChange(...D)),accept:".bpmn",style:{display:"none"}},null,544),t.bpmn&&e.fullPath!=""?(tt(),mt("div",ci,[j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.toggleLock}),{default:V(()=>[t.lock?(tt(),ht(M,{key:0,icon:"f7:lock",width:"24",height:"24"})):(tt(),ht(M,{key:1,icon:"f7:lock-open",width:"24",height:"24"}))]),_:2},1040,["onClick"])]),default:V(()=>[t.lock?(tt(),mt("span",li,ut(t.$t("chat.unlock")),1)):(tt(),mt("span",pi,ut(t.$t("chat.lock")),1))]),_:1}),j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.toggleVerMangerDialog}),{default:V(()=>[j(T,{size:"24"})]),_:2},1040,["onClick"])]),default:V(()=>[lt("span",null,ut(t.$t("chat.history")),1)]),_:1})])):(tt(),mt("div",fi,[j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.toggleLock}),{default:V(()=>[j(M,{icon:"material-symbols:save",width:"24",height:"24"})]),_:2},1040,["onClick"])]),default:V(()=>[lt("span",null,ut(t.$t("chat.processDefinitionSave")),1)]),_:1})])),j(Et,{location:"bottom"},{activator:V(({props:D})=>[t.bpmn&&e.fullPath!=""?(tt(),ht(ct,Dt({key:0},D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.beforeDelete}),{default:V(()=>[j(b,{size:"24"})]),_:2},1040,["onClick"])):It("",!0)]),default:V(()=>[lt("span",null,ut(t.$t("processDefinition.deleteProcess")),1)]),_:1})])]),_:1},8,["prompt","name","messages","chatInfo","userInfo","lock","disableChat","onSendMessage","onSendEditedMessage","onStopMessage"])]),j(Le,{modelValue:t.deleteDialog,"onUpdate:modelValue":o[2]||(o[2]=D=>t.deleteDialog=D),"max-width":"500"},{default:V(()=>[j(Rt,null,{default:V(()=>[j(Ae,null,{default:V(()=>[dt(ut(t.$t("processDefinition.deleteProcessMessage")),1)]),_:1}),j(_e,{class:"justify-center pt-0"},{default:V(()=>[j(ct,{color:"primary",variant:"flat",onClick:e.deleteProcess},{default:V(()=>[dt(ut(t.$t("processDefinition.delete")),1)]),_:1},8,["onClick"]),j(ct,{color:"error",variant:"flat",onClick:o[1]||(o[1]=D=>t.deleteDialog=!1)},{default:V(()=>[dt(ut(t.$t("processDefinition.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),mobileLeftContent:V(()=>[j(N,{prompt:t.prompt,name:t.projectName,messages:t.messages,chatInfo:t.chatInfo,userInfo:t.userInfo,lock:t.lock,disableChat:t.disableChat,onSendMessage:e.beforeSendMessage,onSendEditedMessage:t.sendEditedMessage,onStopMessage:t.stopMessage},{"custom-tools":V(()=>[lt("div",hi,[j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",type:"file",class:"text-medium-emphasis",onClick:e.triggerFileInput}),{default:V(()=>[j(M,{icon:"material-symbols:upload",width:"24",height:"24"})]),_:2},1040,["onClick"])]),default:V(()=>[lt("span",null,ut(t.$t("chat.import")),1)]),_:1}),lt("input",{type:"file",ref:"fileInput",onChange:o[3]||(o[3]=(...D)=>e.handleFileChange&&e.handleFileChange(...D)),accept:".bpmn",style:{display:"none"}},null,544),j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.toggleLock}),{default:V(()=>[t.lock?(tt(),ht(M,{key:0,icon:"f7:lock",width:"24",height:"24"})):(tt(),ht(M,{key:1,icon:"f7:lock-open",width:"24",height:"24"}))]),_:2},1040,["onClick"])]),default:V(()=>[t.lock?(tt(),mt("span",di,ut(t.$t("chat.unlock")),1)):(tt(),mt("span",mi,ut(t.$t("chat.lock")),1))]),_:1}),j(Et,{location:"bottom"},{activator:V(({props:D})=>[j(ct,Dt(D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.toggleVerMangerDialog}),{default:V(()=>[j(T,{size:"24"})]),_:2},1040,["onClick"])]),default:V(()=>[lt("span",null,ut(t.$t("chat.history")),1)]),_:1}),j(Et,{location:"bottom"},{activator:V(({props:D})=>[t.bpmn&&e.fullPath!=""?(tt(),ht(ct,Dt({key:0},D,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:e.beforeDelete}),{default:V(()=>[j(b,{size:"24"})]),_:2},1040,["onClick"])):It("",!0)]),default:V(()=>[lt("span",null,ut(t.$t("processDefinition.deleteProcess")),1)]),_:1})])]),_:1},8,["prompt","name","messages","chatInfo","userInfo","lock","disableChat","onSendMessage","onSendEditedMessage","onStopMessage"])]),_:1})]),_:1},8,["class"])}const Si=Me(si,[["render",yi],["__scopeId","data-v-d4951577"]]);export{Si as default};
