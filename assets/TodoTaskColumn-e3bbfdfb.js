import{ar as k,as as D,at as M,au as _e,_ as ae,I as J,o as y,c as ee,x as b,w as d,b as o,V,av as ne,am as L,a as u,z as _,aq as re,aw as ie,al as q,a2 as K,ax as ye,ay as pe,Z as se,d as x,s as I,aj as De,ae as H,a8 as be,B as Ce,F as Z,a0 as Oe,T as xe,H as Ue,D as Se,ak as Me,A as ce,az as Ee,M as Ie,L as Ye}from"./index-dcd728bc.js";import{g as G,d as Pe,a as We}from"./index-18289fd3.js";function $e(a,t){k(2,arguments);var e=D(a).getTime(),n=M(t);return new Date(e+n)}function Ve(a){return k(1,arguments),a instanceof Date||_e(a)==="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Ne(a){if(k(1,arguments),!Ve(a)&&typeof a!="number")return!1;var t=D(a);return!isNaN(Number(t))}function Be(a,t){k(2,arguments);var e=M(t);return $e(a,-e)}var He=864e5;function Le(a){k(1,arguments);var t=D(a),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),r=e-n;return Math.floor(r/He)+1}function F(a){k(1,arguments);var t=1,e=D(a),n=e.getUTCDay(),r=(n<t?7:0)+n-t;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function fe(a){k(1,arguments);var t=D(a),e=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(e+1,0,4),n.setUTCHours(0,0,0,0);var r=F(n),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var s=F(i);return t.getTime()>=r.getTime()?e+1:t.getTime()>=s.getTime()?e:e-1}function qe(a){k(1,arguments);var t=fe(a),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var n=F(e);return n}var Fe=6048e5;function Re(a){k(1,arguments);var t=D(a),e=F(t).getTime()-qe(t).getTime();return Math.round(e/Fe)+1}function R(a,t){var e,n,r,i,s,c,f,m;k(1,arguments);var v=G(),h=M((e=(n=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:v.weekStartsOn)!==null&&n!==void 0?n:(f=v.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&e!==void 0?e:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=D(a),g=w.getUTCDay(),p=(g<h?7:0)+g-h;return w.setUTCDate(w.getUTCDate()-p),w.setUTCHours(0,0,0,0),w}function me(a,t){var e,n,r,i,s,c,f,m;k(1,arguments);var v=D(a),h=v.getUTCFullYear(),w=G(),g=M((e=(n=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:w.firstWeekContainsDate)!==null&&n!==void 0?n:(f=w.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,g),p.setUTCHours(0,0,0,0);var Y=R(p,t),U=new Date(0);U.setUTCFullYear(h,0,g),U.setUTCHours(0,0,0,0);var P=R(U,t);return v.getTime()>=Y.getTime()?h+1:v.getTime()>=P.getTime()?h:h-1}function Ge(a,t){var e,n,r,i,s,c,f,m;k(1,arguments);var v=G(),h=M((e=(n=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:v.firstWeekContainsDate)!==null&&n!==void 0?n:(f=v.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&e!==void 0?e:1),w=me(a,t),g=new Date(0);g.setUTCFullYear(w,0,h),g.setUTCHours(0,0,0,0);var p=R(g,t);return p}var je=6048e5;function Qe(a,t){k(1,arguments);var e=D(a),n=R(e,t).getTime()-Ge(e,t).getTime();return Math.round(n/je)+1}function l(a,t){for(var e=a<0?"-":"",n=Math.abs(a).toString();n.length<t;)n="0"+n;return e+n}var Xe={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return l(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):l(n+1,2)},d:function(t,e){return l(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return l(t.getUTCHours()%12||12,e.length)},H:function(t,e){return l(t.getUTCHours(),e.length)},m:function(t,e){return l(t.getUTCMinutes(),e.length)},s:function(t,e){return l(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return l(i,e.length)}};const O=Xe;var E={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ae={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return O.y(t,e)},Y:function(t,e,n,r){var i=me(t,r),s=i>0?i:1-i;if(e==="YY"){var c=s%100;return l(c,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):l(s,e.length)},R:function(t,e){var n=fe(t);return l(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return l(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return l(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return l(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return O.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return l(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=Qe(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):l(i,e.length)},I:function(t,e,n){var r=Re(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):l(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):O.d(t,e)},D:function(t,e,n){var r=Le(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):l(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return l(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return l(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return l(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),i;switch(r===12?i=E.noon:r===0?i=E.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),i;switch(r>=17?i=E.evening:r>=12?i=E.afternoon:r>=4?i=E.morning:i=E.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return O.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):O.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):l(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):l(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):O.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):O.s(t,e)},S:function(t,e){return O.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return de(s);case"XXXX":case"XX":return S(s);case"XXXXX":case"XXX":default:return S(s,":")}},x:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"x":return de(s);case"xxxx":case"xx":return S(s);case"xxxxx":case"xxx":default:return S(s,":")}},O:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+oe(s,":");case"OOOO":default:return"GMT"+S(s,":")}},z:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+oe(s,":");case"zzzz":default:return"GMT"+S(s,":")}},t:function(t,e,n,r){var i=r._originalDate||t,s=Math.floor(i.getTime()/1e3);return l(s,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,s=i.getTime();return l(s,e.length)}};function oe(a,t){var e=a>0?"-":"+",n=Math.abs(a),r=Math.floor(n/60),i=n%60;if(i===0)return e+String(r);var s=t||"";return e+String(r)+s+l(i,2)}function de(a,t){if(a%60===0){var e=a>0?"-":"+";return e+l(Math.abs(a)/60,2)}return S(a,t)}function S(a,t){var e=t||"",n=a>0?"-":"+",r=Math.abs(a),i=l(Math.floor(r/60),2),s=l(r%60,2);return n+i+e+s}const ze=Ae;var le=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},he=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ke=function(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return le(t,e);var s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",le(r,e)).replace("{{time}}",he(i,e))},Ze={p:he,P:Ke};const Je=Ze;var et=["D","DD"],tt=["YY","YYYY"];function at(a){return et.indexOf(a)!==-1}function nt(a){return tt.indexOf(a)!==-1}function ue(a,t,e){if(a==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var rt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,it=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,st=/^'([^]*?)'?$/,ot=/''/g,dt=/[a-zA-Z]/;function te(a,t,e){var n,r,i,s,c,f,m,v,h,w,g,p,Y,U,P,j,Q,X;k(2,arguments);var ve=String(t),W=G(),$=(n=(r=e==null?void 0:e.locale)!==null&&r!==void 0?r:W.locale)!==null&&n!==void 0?n:Pe,A=M((i=(s=(c=(f=e==null?void 0:e.firstWeekContainsDate)!==null&&f!==void 0?f:e==null||(m=e.locale)===null||m===void 0||(v=m.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&c!==void 0?c:W.firstWeekContainsDate)!==null&&s!==void 0?s:(h=W.locale)===null||h===void 0||(w=h.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=M((g=(p=(Y=(U=e==null?void 0:e.weekStartsOn)!==null&&U!==void 0?U:e==null||(P=e.locale)===null||P===void 0||(j=P.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&Y!==void 0?Y:W.weekStartsOn)!==null&&p!==void 0?p:(Q=W.locale)===null||Q===void 0||(X=Q.options)===null||X===void 0?void 0:X.weekStartsOn)!==null&&g!==void 0?g:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!$.localize)throw new RangeError("locale must contain localize property");if(!$.formatLong)throw new RangeError("locale must contain formatLong property");var N=D(a);if(!Ne(N))throw new RangeError("Invalid time value");var ge=We(N),we=Be(N,ge),ke={firstWeekContainsDate:A,weekStartsOn:z,locale:$,_originalDate:N},Te=ve.match(it).map(function(T){var C=T[0];if(C==="p"||C==="P"){var B=Je[C];return B(T,$.formatLong)}return T}).join("").match(rt).map(function(T){if(T==="''")return"'";var C=T[0];if(C==="'")return lt(T);var B=ze[C];if(B)return!(e!=null&&e.useAdditionalWeekYearTokens)&&nt(T)&&ue(T,t,String(a)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&at(T)&&ue(T,t,String(a)),B(we,T,$.localize,ke);if(C.match(dt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return T}).join("");return Te}function lt(a){var t=a.match(st);return t?t[1].replace(ot,"'"):a}const ut={props:{type:String,task:Object,todolist:Array},data:()=>({newTask:{taskId:"",endpoint:"",title:"",description:"",status:"TODO",startDate:null,dueDate:null}}),async created(){this.task&&this.task.taskId?this.newTask=this.task:this.newTask={taskId:"",endpoint:"",title:"",description:"",status:"TODO",startDate:null,dueDate:null}},methods:{close(){this.$emit("close")},async save(){const a=J.createBackend();if(this.newTask.taskId||(this.newTask.taskId=this.uuid()),!this.newTask.endpoint){const t=localStorage.getItem("email");this.newTask.endpoint=t}if(this.todolist&&this.todolist.length>0){const t=this.todolist.findIndex(e=>e.id===this.newTask.status);t!==-1&&this.todolist[t].tasks.push(this.newTask)}await a.putWorklist(this.newTask.taskId,this.newTask),this.close()},uuid(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},async addNewSchedule(a){const t=se.getStorage(),e=localStorage.getItem("uid"),n=te(new Date(a.start_date),"yyyy_MM"),r=await t.getObject(`calendar/${e}`,{key:"uid"});var i={};r&&r.data?(r.data[`${n}`]?i=r.data:i[`${n}`]={},i[`${n}`][`${a.id}`]={id:a.id,start:a.start_date,end:a.end_date,title:a.activity_id,allDay:!0}):(i[`${n}`]={},i[`${n}`][`${a.id}`]={id:a.id,start:a.start_date,end:a.end_date,title:a.activity_id,allDay:!0});var s={uid:e,data:i};t.putObject("calendar",s),this.sendNotification(a)},async sendNotification(a){const t=se.getStorage(),e=await t.getUserInfo(),n={match:{id:e.uid,email:e.email}};let i=(await t.getObject("users",n)).notifications;i||(i=[]);const s={id:a.id,type:"todo",isChecked:!1};i.push(s);const c={id:e.uid,notifications:i};t.putObject("users",c)}}},ct=u("h4",{class:"text-h4"},"할 일",-1),ft=x("mdi-pencil"),mt={class:"mb-3"},ht=u("span",{class:"text-h6 font-weight-semibold"},"제목: ",-1),vt={class:"text-h6"},gt={class:"mb-3"},wt=u("span",{class:"text-h6 font-weight-semibold"},"시작일: ",-1),kt={class:"text-h6"},Tt={class:"mb-3"},_t=u("span",{class:"text-h6 font-weight-semibold"},"종료일: ",-1),yt={class:"text-h6"},pt={class:"mb-3"},Dt=u("span",{class:"text-h6 font-weight-semibold"},"상태: ",-1),bt={class:"text-h6"},Ct=u("span",{class:"text-h6 font-weight-semibold"},"설명: ",-1),Ot={class:"text-h6"},xt=x("닫기"),Ut=u("h4",{class:"text-h4"},"할 일 수정",-1),St=x("mdi-arrow-left"),Mt=u("h4",{class:"text-h4 mb-5"},"할 일 등록",-1),Et=x("저장"),It=x("닫기");function Yt(a,t,e,n,r,i){return y(),ee("div",null,[e.type=="view"?(y(),b(q,{key:0},{default:d(()=>[o(L,{class:"d-flex align-center justify-space-between pt-3 pl-5"},{default:d(()=>[ct,o(V,{class:"edit-button",variant:"flat",onClick:t[0]||(t[0]=s=>e.type="edit")},{default:d(()=>[o(ne,null,{default:d(()=>[ft]),_:1})]),_:1})]),_:1}),o(re,{class:"mt-3 px-6"},{default:d(()=>[u("div",mt,[ht,u("span",vt,_(e.task.title),1)]),u("div",gt,[wt,u("span",kt,_(e.task.startDate),1)]),u("div",Tt,[_t,u("span",yt,_(e.task.endDate),1)]),u("div",pt,[Dt,u("span",bt,_(e.task.status),1)]),u("div",null,[Ct,u("span",Ot,_(e.task.description),1)])]),_:1}),o(ie,{class:"justify-center pt-0"},{default:d(()=>[o(V,{color:"error",variant:"flat",onClick:i.close},{default:d(()=>[xt]),_:1},8,["onClick"])]),_:1})]),_:1})):(y(),b(q,{key:1},{default:d(()=>[e.type&&e.type=="edit"?(y(),b(L,{key:0,class:"d-flex align-center justify-space-between pt-3 pl-5"},{default:d(()=>[Ut,o(V,{class:"edit-button",variant:"flat",onClick:t[1]||(t[1]=s=>e.type="view")},{default:d(()=>[o(ne,null,{default:d(()=>[St]),_:1})]),_:1})]),_:1})):(y(),b(L,{key:1,class:"pt-5 pl-5"},{default:d(()=>[Mt]),_:1})),o(re,{class:"mt-3"},{default:d(()=>[o(K,{modelValue:a.newTask.title,"onUpdate:modelValue":t[2]||(t[2]=s=>a.newTask.title=s),label:"할일명",outlined:""},null,8,["modelValue"]),o(K,{modelValue:a.newTask.startDate,"onUpdate:modelValue":t[3]||(t[3]=s=>a.newTask.startDate=s),label:"시작일",outlined:"",type:"datetime-local"},null,8,["modelValue"]),o(K,{modelValue:a.newTask.dueDate,"onUpdate:modelValue":t[4]||(t[4]=s=>a.newTask.dueDate=s),label:"종료일",outlined:"",type:"datetime-local"},null,8,["modelValue"]),o(ye,{modelValue:a.newTask.status,"onUpdate:modelValue":t[5]||(t[5]=s=>a.newTask.status=s),items:["TODO","IN_PROGRESS","PENDING","DONE"],label:"진행 상태",variant:"outlined"},null,8,["modelValue"]),o(pe,{modelValue:a.newTask.description,"onUpdate:modelValue":t[6]||(t[6]=s=>a.newTask.description=s),label:"설명",outlined:""},null,8,["modelValue"])]),_:1}),o(ie,{class:"justify-center pt-0"},{default:d(()=>[o(V,{disabled:a.newTask.title=="",color:"success",variant:"flat",onClick:i.save},{default:d(()=>[Et]),_:1},8,["disabled","onClick"]),o(V,{color:"error",variant:"flat",onClick:i.close},{default:d(()=>[It]),_:1},8,["onClick"])]),_:1})]),_:1}))])}const Pt=ae(ut,[["render",Yt]]);const Wt={components:{TodoDialog:Pt},props:{task:Object},data:()=>({managed:!1,dialog:!1,dialogType:"",mode:window.$mode}),mounted(){this.mode=window.$mode},computed:{remainingDays(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(this.task.dueDate);t.setHours(0,0,0,0);const n=(t-a)/(1e3*3600*24);return n>=0?`${n} days remaining`:"Due date passed"},isDueTodayOrTomorrow(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(a);t.setDate(t.getDate()+1);const e=new Date(this.task.dueDate);return e.setHours(0,0,0,0),e>=a&&e<=t},isPastDue(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(this.task.dueDate);return t.setHours(0,0,0,0),t<a},formattedDate(){var a="";return this.task.startDate&&(a+=te(new Date(this.task.startDate),"yyyy.MM.dd")+" ~"),this.task.dueDate&&(a.includes("~")||(a+="~ "),a+=te(new Date(this.task.dueDate),"yyyy.MM.dd")),a},category(){return this.task.instId?{name:"BPM",color:"primary"}:null}},created(){this.task.instId?this.managed=!1:this.managed=!0},methods:{executeTask(){this.managed?(this.dialogType="view",this.dialog=!0):this.$emit("executeTask",this.task)},closeDialog(){this.dialog=!1},deleteTask(){this.$emit("deleteTask",this.task)}}},$t={class:"d-flex align-items-center",style:{width:"100%"}},Vt={style:{"font-size":"16px","font-weight":"500"}},Nt=x("삭제"),Bt={class:"d-flex align-center"},Ht={class:"body-text-1 text-dark pl-2"},Lt={class:"text-subtitle-2"};function qt(a,t,e,n,r,i){const s=I("DotsVerticalIcon"),c=I("RouterLink"),f=I("CalendarIcon"),m=I("TodoDialog");return y(),b(q,{elevation:"10",class:ce(["mb-3 cursor-pointer pa-3",{"border-primary":i.isDueTodayOrTomorrow,"border-purple":i.isPastDue}]),onClick:i.executeTask},{default:d(()=>[o(L,{class:"ma-0 pa-0"},{default:d(()=>[o(De,{class:"ma-0 pa-0 mt-1",style:{"line-height":"100%"}},{default:d(()=>[o(H,{cols:"12",class:"pa-0"},{default:d(()=>[u("div",$t,[u("div",Vt,_(e.task.title),1),o(be),i.category?(y(),b(Ce,{key:0,color:i.category.color,size:"small",variant:"outlined",density:"comfortable",style:{"margin-left":"5px"}},{default:d(()=>[x(_(i.category.name),1)]),_:1},8,["color"])):Z("",!0),a.managed?(y(),b(c,{key:1,to:"",class:"px-0",color:"black"},{default:d(()=>[o(s,{size:"15"}),o(Oe,{activator:"parent"},{default:d(()=>[o(xe,{density:"compact"},{default:d(()=>[o(Ue,{onClick:i.deleteTask},{default:d(()=>[o(Se,null,{default:d(()=>[Nt]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):Z("",!0)])]),_:1}),a.mode=="uEngine"?(y(),b(H,{key:0,cols:"12",class:"pa-0",style:{"font-size":"12px","margin-top":"5px"}},{default:d(()=>[x(" TaskId : "+_(e.task.taskId)+" / InstId: "+_(e.task.instId),1)]),_:1})):Z("",!0),o(H,{cols:"12",class:"pa-0"},{default:d(()=>[u("div",Bt,[o(f,{size:"16"}),u("div",Ht,_(i.formattedDate),1)])]),_:1}),o(H,{cols:"12",class:"pa-0"},{default:d(()=>[u("div",Lt,_(e.task.description),1)]),_:1})]),_:1})]),_:1}),o(Me,{modelValue:a.dialog,"onUpdate:modelValue":t[0]||(t[0]=v=>a.dialog=v),"max-width":"500"},{default:d(()=>[o(m,{type:a.dialogType,task:e.task,onClose:i.closeDialog},null,8,["type","task","onClose"])]),_:1},8,["modelValue"])]),_:1},8,["onClick","class"])}const Ft=ae(Wt,[["render",qt],["__scopeId","data-v-c6ca31da"]]);const Rt={components:{TodoTaskItemCard:Ft},props:{column:Object,loading:Boolean},data:()=>({}),mounted(){this.$refs.section&&this.$refs.section.addEventListener("scroll",this.checkScrollBottom)},methods:{checkScrollBottom(){const a=this.$refs.section;a.scrollTop+a.clientHeight>=a.scrollHeight-1&&this.column.id=="DONE"&&(this.loading||this.$emit("scrollBottom"))},checkDraggable(a){const t=a.draggedContext.element;if(console.log(t),t.instId){if(this.column.id!="DONE")return!0}else return!0;return!1},addTask(a){console.log(a)},async updateTask(a){const t=this.column.tasks.find(n=>n.id===a.item.dataset.id);t.status=this.column.id,await J.createBackend().putWorklist(t.taskId,t)},async deleteTask(a){await J.createBackend().deleteWorkItem(a.taskId),this.column.tasks=this.column.tasks.filter(e=>e.taskId!==a.taskId)},executeTask(a){this.$emit("executeTask",a)},handleChange(){console.log("changed")},inputChanged(a){console.log(a)},getComponentData(){return{onChange:this.handleChange,onInput:this.inputChanged,wrap:!0,value:this.activeNames}}}},Gt={class:"d-flex align-center justify-space-between pa-3 pb-2 pt-2"},jt={class:"text-h6 font-weight-semibold"},Qt={ref:"section",class:"pa-3",style:{height:"calc(100vh - 300px) !important",overflow:"auto"}};function Xt(a,t,e,n,r,i){const s=I("TodoTaskItemCard"),c=I("draggable");return y(),b(q,{elevation:"10",class:ce("bg-"+e.column.cardbg)},{default:d(()=>[u("div",Gt,[u("h6",jt,_(a.$t(e.column.title)),1)]),u("div",Qt,[o(c,{class:"dragArea list-group cursor-move",list:e.column.tasks,animation:200,"ghost-class":"ghost-card",group:"tasks",onAdd:i.updateTask,"component-data":i.getComponentData(),move:i.checkDraggable},{default:d(()=>[o(Ee,null,{default:d(()=>[(y(!0),ee(Ye,null,Ie(e.column.tasks,f=>(y(),ee("div",{key:f.taskId,class:"cursor-move todo-task-item-card-style"},[o(s,{task:f,onDeleteTask:i.deleteTask,onExecuteTask:i.executeTask,onAdd:i.addTask},null,8,["task","onDeleteTask","onExecuteTask","onAdd"])]))),128))]),_:1})]),_:1},8,["list","onAdd","component-data","move"])],512)]),_:1},8,["class"])}const Kt=ae(Rt,[["render",Xt]]);export{Kt as T,Pt as a};
