import{P as C,o as _,x as g,w as r,b as s,a as o,z as u,C as R,V as v,aq as S,al as D,d as E,aJ as k,aK as L,_ as w,c as O,M as $,ae as p,aj as f,a8 as N,L as V,Z as I,s as y,a2 as T,F as B,am as M,R as x,aS as j,G as A,bw as G}from"./index-dcd728bc.js";import"./UpdateColors-c806f2c6.js";import"./customizer-6d690239.js";const z="/assets/school-d037249b.png",P=t=>(k("data-v-0287338d"),t=t(),L(),t),W={class:"text-h5 mb-1 font-weight-semibold"},Y=P(()=>o("div",{class:"text-subtitle-1 text-grey100 pb-1"},"Check all the statastics",-1)),K=E(" visit now "),q=P(()=>o("img",{src:z,class:"bg-img-1 mt-sm-0 mt-sm-n10"},null,-1)),H=C({setup(t){const l=localStorage.getItem("userName");return(c,d)=>(_(),g(D,{elevation:"10",class:"overflow-visible"},{default:r(()=>[s(S,{class:"position-relative pb-5"},{default:r(()=>[o("h5",W," Welcome "+u(R(l)),1),Y,s(v,{color:"primary",class:"mt-4 mb-2 px-7",rounded:"pill",size:"large"},{default:r(()=>[K]),_:1})]),_:1}),q]),_:1}))}});const J=w(H,[["__scopeId","data-v-0287338d"]]),Z="/assets/danger-shap-7a8daa91.svg",Q="/assets/info-shap-18352619.svg",X="/assets/warning-shap-97ca78fe.svg";const tt={data(){return{todoList:[{name:"DashboardTodoList.todo",count:0,img:X,icon:"icons8:todo-list",status:"TODO"},{name:"DashboardTodoList.inProgress",count:0,img:Z,icon:"carbon:in-progress",status:"IN_PROGRESS"},{name:"DashboardTodoList.done",count:0,img:Q,icon:"lets-icons:done-ring-round",status:"DONE"}]}},async created(){const t=I.getStorage();let l=localStorage.getItem("email");l||(l=(await(t==null?void 0:t.getUserInfo())).email);for(let c of this.todoList){const d={match:{status:c.status,user_id:l}},e=await t.getCount("todolist",d);e&&typeof e=="number"?c.count=e:e&&e.error?(console.error(`Error fetching count for ${c.status}`,e.error),c.count=0):(console.error(`Unexpected response format for ${c.status}`,e),c.count=0)}this.todoList=[...this.todoList]},methods:{goToTodoList(){this.$router.push("/todolist")}}},et=["src"],st={class:"text-h1 font-weight-semibold mb-2 text-white"},ot={class:"text-subtitle-1 opacity-50 font-weight-medium"};function at(t,l,c,d,e,i){const n=y("Icon");return _(),g(f,null,{default:r(()=>[(_(!0),O(V,null,$(e.todoList,(a,h)=>(_(),g(p,{key:h,cols:"12",sm:"4",style:{height:"190px"}},{default:r(()=>[s(D,{elevation:"10",color:"primary"},{default:r(()=>[s(S,{style:{padding:"15px"}},{default:r(()=>[o("img",{src:a.img,alt:"shape",class:"shape"},null,8,et),s(n,{icon:a.icon,width:"30",height:"30",class:"mb-6"},null,8,["icon"]),o("div",st,u(a.count),1),s(f,{class:"ma-0 pa-0"},{default:r(()=>[o("p",ot,u(t.$t(a.name)),1),s(N),s(v,{onClick:i.goToTodoList,icon:"",text:"",width:"24",height:"24",color:"primary"},{default:r(()=>[s(n,{icon:"material-symbols:tab-move",width:"20",height:"20"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const nt=w(tt,[["render",at],["__scopeId","data-v-8999b429"]]);const lt={components:{},data(){const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1).toISOString().substr(0,10),c=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().substr(0,10);return{topUsers:[],summary:{total:0,inProcess:0,done:0,todo:0},startDate:l,endDate:c}},created(){this.init()},watch:{startDate:"init",endDate:"init"},computed:{chartOptions(){const t=[...this.topUsers].sort((i,n)=>n.DONE-i.DONE),l=t.map(i=>i.name),c=t.map(i=>Math.floor(i.TODO)),d=t.map(i=>Math.floor(i.IN_PROCESS));return{series:[{name:"완료 됨",data:t.map(i=>Math.floor(i.DONE))},{name:"진행 중",data:d},{name:"할 일",data:c}],colors:["#2995DC","#fb977d","#FFF0B4"],chart:{type:"bar",fontFamily:"inherit",foreColor:"#adb0bb",width:"100%",height:300,stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"27%",borderRadius:6}},dataLabels:{enabled:!1},grid:{borderColor:"grey",padding:{top:0,bottom:-8,left:20,right:20}},xaxis:{categories:l,axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:"grey"}}},yaxis:{labels:{style:{colors:"grey"}}},legend:{show:!1}}}},methods:{init(){var t=this;const l=I.getStorage();l==null||l.list("todolist").then(c=>{l==null||l.list("users").then(d=>{const e={};d.forEach(n=>{c.forEach(a=>{const h=new Date(a.end_date),m=new Date(t.startDate),b=new Date(t.endDate);n.email===a.user_id&&h>=m&&h<=b&&(e[n.email]||(e[n.email]={name:n.username,end_dates:{TODO:null,IN_PROGRESS:null,DONE:null},TODO:0,IN_PROCESS:0,DONE:0}),a.status==="TODO"?(e[n.email].TODO+=1,e[n.email].end_dates.TODO=a.end_date):a.status==="IN_PROGRESS"?(e[n.email].IN_PROCESS+=1,e[n.email].end_dates.IN_PROGRESS=a.end_date):a.status==="DONE"&&(e[n.email].DONE+=1,e[n.email].end_dates.DONE=a.end_date))})});let i=Object.values(e);i.sort((n,a)=>new Date(a.end_dates.DONE)-new Date(n.end_dates.DONE)),t.topUsers=i.slice(0,7),t.summary.total=t.topUsers.reduce((n,a)=>n+a.TODO+a.IN_PROCESS+a.DONE,0),t.summary.todo=t.topUsers.reduce((n,a)=>n+a.TODO,0),t.summary.inProcess=t.topUsers.reduce((n,a)=>n+a.IN_PROCESS,0),t.summary.done=t.topUsers.reduce((n,a)=>n+a.DONE,0)})})}}},rt={class:"align-center justify-space-between"},it=o("h5",{class:"text-h5 mb-1 font-weight-semibold"},"직원별 프로세스 실행실적",-1),ct=E("Total"),dt={class:"d-flex align-center gap-4 mb-3 pb-3"},ut={class:"text-h5 font-weight-semibold"},ht=o("h6",{class:"text-subtitle-1 text-grey100"},"할 일",-1),_t={class:"d-flex align-center gap-4 mb-3 pb-3"},mt={class:"text-h5 font-weight-semibold"},pt=o("h6",{class:"text-subtitle-1 text-grey100"},"진행 중",-1),gt={class:"d-flex align-center gap-4 mb-3 pb-3"},ft={class:"text-h5 font-weight-semibold"},bt=o("h6",{class:"text-subtitle-1 text-grey100"},"완료 됨",-1),xt={class:"d-flex align-center gap-4 mb-3 pb-3"},yt={class:"text-h5 font-weight-semibold"},Dt=o("h6",{class:"text-subtitle-1 text-grey100"},"전체",-1);function wt(t,l,c,d,e,i){const n=y("apexchart"),a=y("Icon");return _(),g(D,{elevation:"10"},{default:r(()=>[s(j,null,{default:r(()=>[o("div",rt,[o("div",null,[s(f,{class:"ma-0 pa-0"},{default:r(()=>[it,s(N),s(T,{modelValue:e.startDate,"onUpdate:modelValue":l[0]||(l[0]=h=>e.startDate=h),label:"시작일",type:"date",outlined:"",style:{"margin-right":"10px"}},null,8,["modelValue"]),s(T,{modelValue:e.endDate,"onUpdate:modelValue":l[1]||(l[1]=h=>e.endDate=h),label:"종료일",type:"date",outlined:""},null,8,["modelValue"])]),_:1})])]),s(f,null,{default:r(()=>[s(p,{cols:"12",sm:"9",class:"pt-7"},{default:r(()=>[i.chartOptions?(_(),g(n,{key:0,type:"bar",class:"profit-expense",height:"300",options:i.chartOptions,series:i.chartOptions.series},null,8,["options","series"])):B("",!0)]),_:1}),s(p,{cols:"12",sm:"3",class:"mt-8 pb-6"},{default:r(()=>[s(M,{class:"mb-3"},{default:r(()=>[ct]),_:1}),o("div",dt,[s(x,{style:{"background-color":"#FFF0B4"}},{default:r(()=>[s(a,{color:"#FFB933",icon:"icons8:todo-list",width:"24",height:"24"})]),_:1}),o("div",null,[o("h5",ut,u(e.summary.todo),1),ht])]),o("div",_t,[s(x,{class:"bg-lighterror"},{default:r(()=>[s(a,{color:"#FBA690",icon:"carbon:in-progress",width:"24",height:"24"})]),_:1}),o("div",null,[o("h5",mt,u(e.summary.inProcess),1),pt])]),o("div",gt,[s(x,{class:"bg-lightinfo"},{default:r(()=>[s(a,{color:"#2995DC",icon:"lets-icons:done-ring-round",width:"24",height:"24"})]),_:1}),o("div",null,[o("h5",ft,u(e.summary.done),1),bt])]),o("div",xt,[s(x,{class:"bg-lightsecondary"},{default:r(()=>[s(a,{color:"grey",icon:"fluent-mdl2:total",width:"24",height:"24"})]),_:1}),o("div",null,[o("h5",yt,u(e.summary.total),1),Dt])])]),_:1})]),_:1})]),_:1})]),_:1})}const Ot=w(lt,[["render",wt]]);const vt={data(){return{calendars:[]}},async created(){const t=await I.getStorage();let l=localStorage.getItem("uid"),c={key:"uid"};const d=await t.getObject(`db://calendar/${l}`,c);let e=[];if(d){const i=new Date;i.setHours(0,0,0,0);const n=i.getFullYear(),a=String(i.getMonth()+1).padStart(2,"0"),h=`${n}_${a}`;Object.keys(d.data).forEach(m=>{m>=h&&e.length<8&&(e=[...e,...Object.values(d.data[m])])}),e=e.filter(m=>new Date(m.start)>=i).sort((m,b)=>{const U=new Date(m.start),F=new Date(b.start);return U-F}).slice(0,7),this.calendars=e}},methods:{goToCalendar(){this.$router.push("/calendar")},formatDateTime(t){if(!t)return"";const[l,c]=t.split("T"),d=new Date(t);if(!c)return new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric"}).format(d);const e={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat("ko-KR",e).format(d)}}},St={class:"d-flex align-center justify-space-between"},It={class:"text-h5 mb-1 font-weight-semibold"},Tt={class:"text-subtitle-1 font-weight-semibold text-grey200 text-no-wrap"},Ct={class:"text-subtitle-1 font-weight-semibold text-grey200 text-no-wrap"},Et={class:"text-subtitle-1 font-weight-semibold text-grey200 text-no-wrap"},$t={class:"text-subtitle-1 font-weight-medium text-no-wrap text-grey100"},Nt={class:"text-subtitle-1 font-weight-medium text-no-wrap text-grey100"};function Vt(t,l,c,d,e,i){const n=y("Icon");return _(),g(D,{elevation:"10",style:{height:"100%"}},{default:r(()=>[s(S,{style:{padding:"20px 20px 0px 20px"}},{default:r(()=>[o("div",St,[o("h5",It,u(t.$t("DashboardUpcomingScheduls.title")),1),s(v,{onClick:l[0]||(l[0]=a=>i.goToCalendar()),icon:""},{default:r(()=>[s(n,{icon:"material-symbols:tab-move",width:"24",height:"24"})]),_:1})])]),_:1}),s(G,{class:"mt-0 mb-0 pa-5",style:{"padding-top":"0px !important"}},{default:r(()=>[o("thead",null,[o("tr",null,[o("th",Tt,u(t.$t("DashboardUpcomingScheduls.schedule")),1),o("th",Ct,u(t.$t("DashboardUpcomingScheduls.dateAndTime")),1),o("th",Et,u(t.$t("DashboardUpcomingScheduls.category")),1)])]),o("tbody",null,[(_(!0),O(V,null,$(e.calendars,(a,h)=>(_(),O("tr",{key:h,class:"month-item"},[o("td",null,[o("h5",$t,u(a.title),1)]),o("td",null,[o("h5",Nt,u(i.formatDateTime(a.start)),1)]),o("td",null,[o("div",{style:A([{width:"16px",height:"16px","border-radius":"50%"},{backgroundColor:a.color}])},null,4)])]))),128))])]),_:1})]),_:1})}const Pt=w(vt,[["render",Vt]]),kt=C({setup(t){return(l,c)=>(_(),g(f,null,{default:r(()=>[s(p,{cols:"12",sm:"12",lg:"6"},{default:r(()=>[s(J)]),_:1}),s(p,{cols:"12",sm:"12",lg:"6",class:"d-flex"},{default:r(()=>[s(nt)]),_:1}),s(p,{cols:"12",sm:"12",lg:"4"},{default:r(()=>[s(Pt)]),_:1}),s(p,{cols:"12",sm:"12",lg:"8"},{default:r(()=>[s(Ot)]),_:1}),s(p,{cols:"12",sm:"12",lg:"8"})]),_:1}))}});export{kt as default};
